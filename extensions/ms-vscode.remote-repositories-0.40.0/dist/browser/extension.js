var Oc=Object.defineProperty;var o=(Ao,ja)=>Oc(Ao,"name",{value:ja,configurable:!0});(()=>{var Ao={850:(ot,l,b)=>{"use strict";b.r(l),b.d(l,{AppInsightsCore:()=>Xe,BaseCore:()=>Rn,BaseTelemetryPlugin:()=>Wr.i,CoreUtils:()=>S.Tr,DiagnosticLogger:()=>Se.AQ,ESPromise:()=>pr,ESPromiseScheduler:()=>Kn,EventHelper:()=>Br.zB,EventLatency:()=>O,EventPersistence:()=>w,EventPropertyType:()=>m,EventsDiscardedReason:()=>$r.h,FullVersionString:()=>S.vs,InternalAppInsightsCore:()=>nt.F,InternalBaseCore:()=>Kt.A,LoggingSeverity:()=>y.X,MinChannelPriorty:()=>hr,NotificationManager:()=>Pr.f,PerfEvent:()=>xe.zn,PerfManager:()=>xe.Jk,ProcessTelemetryContext:()=>Qn.Vi,TraceLevel:()=>B,Undefined:()=>Cr.jA,Utils:()=>S.cQ,ValueKind:()=>W,ValueSanitizer:()=>Gn,Version:()=>S.Gf,_ExtendedInternalMessageId:()=>H,_InternalLogMessage:()=>Se.lQ,_InternalMessageId:()=>y.v,__getRegisteredEvents:()=>vn.um,_logInternalMessage:()=>Se.L4,_throwInternal:()=>Se.kP,_warnToConsole:()=>Se.jV,addEventHandler:()=>vn.Ib,addEventListeners:()=>vn.yw,addPageHideEventListener:()=>vn.TJ,addPageShowEventListener:()=>vn.nD,addPageUnloadEventListener:()=>vn.c9,areCookiesSupported:()=>gr.p7,arrForEach:()=>L.tO,arrIndexOf:()=>L.UA,arrMap:()=>L.Mr,arrReduce:()=>L.Xz,attachEvent:()=>vn.pZ,cookieAvailable:()=>gr.p7,createCookieMgr:()=>gr.Nz,createEnumStyle:()=>v.By,createGuid:()=>S.cm,createProcessTelemetryContext:()=>Qn.CD,createTraceParent:()=>yr.SU,createUniqueNamespace:()=>oi.J,createUnloadHandlerContainer:()=>gi.Y,dateNow:()=>L.m6,deleteCookie:()=>S.kT,detachEvent:()=>vn.pD,disableCookies:()=>S.oF,disallowsSameSiteNone:()=>gr.UY,doPerf:()=>xe.Lm,dumpObj:()=>dt.eU,eventOff:()=>vn.QY,eventOn:()=>vn.XO,extend:()=>S.l7,findW3cTraceParent:()=>yr.lq,formatTraceParent:()=>yr.aR,generateW3CId:()=>Br.DO,getCommonSchemaMetaData:()=>S.Vv,getConsole:()=>dt.dr,getCookie:()=>S.ej,getCookieValue:()=>S.Do,getCrypto:()=>dt.MX,getDocument:()=>dt.Me,getExceptionName:()=>L.jj,getFieldValueType:()=>S.Sy,getGlobal:()=>mr.Rd,getGlobalInst:()=>dt.a8,getHistory:()=>dt.s1,getIEVersion:()=>dt.sA,getISOString:()=>L.Y6,getJSON:()=>dt.xA,getLocation:()=>dt.k$,getMsCrypto:()=>dt.gz,getNavigator:()=>dt.jW,getPerformance:()=>dt.r,getSetValue:()=>L.qK,getTenantId:()=>S.jM,getTime:()=>S.hK,getWindow:()=>dt.Jj,hasDocument:()=>dt.Nv,hasHistory:()=>dt.fE,hasJSON:()=>dt.nS,hasNavigator:()=>dt.d6,hasOwnProperty:()=>L.nr,hasWindow:()=>dt.Ym,isArray:()=>L.kJ,isArrayValid:()=>S.JT,isBeaconsSupported:()=>dt.MF,isBoolean:()=>L.jn,isChromium:()=>S.mJ,isDate:()=>L.J_,isDocumentObjectAvailable:()=>S.x9,isError:()=>L.VZ,isFetchSupported:()=>dt.JO,isFunction:()=>L.mf,isIE:()=>dt.w1,isLatency:()=>S.r7,isNotTruthy:()=>L.F,isNullOrUndefined:()=>L.le,isNumber:()=>L.hj,isObject:()=>L.Kn,isReactNative:()=>dt.b$,isSampledFlag:()=>yr.Pn,isString:()=>L.HD,isTruthy:()=>L.fQ,isTypeof:()=>L.Ym,isUint8ArrayAvailable:()=>S.IZ,isUndefined:()=>L.o8,isValidSpanId:()=>yr.Lc,isValidTraceId:()=>yr.jN,isValidTraceParent:()=>yr.J6,isValueAssigned:()=>S.Sn,isValueKind:()=>S.oS,isWindowObjectAvailable:()=>S.dH,isXhrSupported:()=>dt.Z3,mergeEvtNamespace:()=>vn.jU,newGuid:()=>Br.GW,newId:()=>Zn.pZ,normalizeJsName:()=>L.Gf,objCreate:()=>mr.pu,objDefineAccessors:()=>L.l_,objForEachKey:()=>L.rW,objFreeze:()=>L.FL,objKeys:()=>L.FY,objSeal:()=>L.Xi,openXhr:()=>S.ot,optimizeObject:()=>L.Ax,parseTraceParent:()=>yr.j_,perfNow:()=>Br.Jj,proxyAssign:()=>L.cf,proxyFunctionAs:()=>L.Oi,proxyFunctions:()=>L.Vb,random32:()=>Zn._l,randomValue:()=>Zn.az,removeEventHandler:()=>vn.C1,removeEventListeners:()=>vn.nJ,removePageHideEventListener:()=>vn.C9,removePageShowEventListener:()=>vn.Yl,removePageUnloadEventListener:()=>vn.JA,safeGetCookieMgr:()=>gr.JP,safeGetLogger:()=>Se.vH,sanitizeProperty:()=>S.yj,setCookie:()=>S.d8,setEnableEnvMocks:()=>dt.dI,setProcessTelemetryTimings:()=>S.if,setValue:()=>L.sO,strContains:()=>L._Q,strEndsWith:()=>L.Id,strFunction:()=>Cr.cb,strObject:()=>Cr.fK,strPrototype:()=>Cr.hB,strStartsWith:()=>L.xe,strTrim:()=>L.nd,strUndefined:()=>Cr.jA,throwError:()=>L._y,toISOString:()=>L.Y6,useXDomainRequest:()=>dt.cp});var T=b(1088),v=b(4873),L=b(6708),y=b(7310),W=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),O=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,v.By)({Normal:1,Critical:2}),B=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),H=(0,L.FL)((0,T.uc)((0,T.uc)({},y.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var A,$="undefined",N="constructor",J="prototype",q="function",Ee="_dynInstFuncs",G="_isDynProxy",X="_dynClass",Z="_dynCls$",M="_dynInstChk",Y=M,x="_dfOpts",se="_unknown_",z="__proto__",de="_dyn"+z,Ae="__dynProto$Gbl",Oe="_dynInstProto",ie="useBaseInst",we="setInstFuncs",R=Object,Ve=R.getPrototypeOf,me=R.getOwnPropertyNames;function ge(){var P;return typeof globalThis!==$&&(P=globalThis),!P&&typeof self!==$&&(P=self),!P&&typeof window!==$&&(P=window),!P&&typeof b.g!==$&&(P=b.g),P||{}}o(ge,"_getGlobal");var K=ge(),oe=K[Ae]||(K[Ae]={o:(A={},A[we]=!0,A[ie]=!0,A),n:1e3});function Re(P,ce){return P&&R[J].hasOwnProperty.call(P,ce)}o(Re,"_hasOwnProperty");function $e(P){return P&&(P===R[J]||P===Array[J])}o($e,"_isObjectOrArrayPrototype");function re(P){return $e(P)||P===Function[J]}o(re,"_isObjectArrayOrFunctionPrototype");function et(P){var ce;if(P){if(Ve)return Ve(P);var be=P[z]||P[J]||(P[N]?P[N][J]:null);ce=P[de]||be,Re(P,de)||(delete P[Oe],ce=P[de]=P[Oe]||P[de],P[Oe]=be)}return ce}o(et,"_getObjProto");function ut(P,ce){var be=[];if(me)be=me(P);else for(var Fe in P)typeof Fe=="string"&&Re(P,Fe)&&be.push(Fe);if(be&&be.length>0)for(var Ze=0;Ze<be.length;Ze++)ce(be[Ze])}o(ut,"_forEachProp");function wt(P,ce,be){return ce!==N&&typeof P[ce]===q&&(be||Re(P,ce))}o(wt,"_isDynamicCandidate");function k(P){throw new TypeError("DynamicProto: "+P)}o(k,"_throwTypeError");function U(P){var ce={};return ut(P,function(be){!ce[be]&&wt(P,be,!1)&&(ce[be]=P[be])}),ce}o(U,"_getInstanceFuncs");function te(P,ce){for(var be=P.length-1;be>=0;be--)if(P[be]===ce)return!0;return!1}o(te,"_hasVisited");function ue(P,ce,be,Fe){function Ze(ct,qt,bt){var Ot=qt[bt];if(Ot[G]&&Fe){var Ht=ct[Ee]||{};Ht[Y]!==!1&&(Ot=(Ht[qt[X]]||{})[bt]||Ot)}return function(){return Ot.apply(ct,arguments)}}o(Ze,"_instFuncProxy");var Qe={};ut(be,function(ct){Qe[ct]=Ze(ce,be,ct)});for(var ht=et(P),Dt=[];ht&&!re(ht)&&!te(Dt,ht);)ut(ht,function(ct){!Qe[ct]&&wt(ht,ct,!Ve)&&(Qe[ct]=Ze(ce,ht,ct))}),Dt.push(ht),ht=et(ht);return Qe}o(ue,"_getBaseFuncs");function Be(P,ce,be,Fe){var Ze=null;if(P&&Re(be,X)){var Qe=P[Ee]||{};if(Ze=(Qe[be[X]]||{})[ce],Ze||k("Missing ["+ce+"] "+q),!Ze[M]&&Qe[Y]!==!1){for(var ht=!Re(P,ce),Dt=et(P),ct=[];ht&&Dt&&!re(Dt)&&!te(ct,Dt);){var qt=Dt[ce];if(qt){ht=qt===Fe;break}ct.push(Dt),Dt=et(Dt)}try{ht&&(P[ce]=Ze),Ze[M]=1}catch(bt){Qe[Y]=!1}}}return Ze}o(Be,"_getInstFunc");function Ie(P,ce,be){var Fe=ce[P];return Fe===be&&(Fe=et(ce)[P]),typeof Fe!==q&&k("["+P+"] is not a "+q),Fe}o(Ie,"_getProtoFunc");function le(P,ce,be,Fe,Ze){function Qe(ct,qt){var bt=o(function(){var Ot=Be(this,qt,ct,bt)||Ie(qt,ct,bt);return Ot.apply(this,arguments)},"dynProtoProxy");return bt[G]=1,bt}if(o(Qe,"_createDynamicPrototype"),!$e(P)){var ht=be[Ee]=be[Ee]||{},Dt=ht[ce]=ht[ce]||{};ht[Y]!==!1&&(ht[Y]=!!Ze),ut(be,function(ct){wt(be,ct,!1)&&be[ct]!==Fe[ct]&&(Dt[ct]=be[ct],delete be[ct],(!Re(P,ct)||P[ct]&&!P[ct][G])&&(P[ct]=Qe(P,ct)))})}}o(le,"_populatePrototype");function _e(P,ce){if(Ve){for(var be=[],Fe=et(ce);Fe&&!re(Fe)&&!te(be,Fe);){if(Fe===P)return!0;be.push(Fe),Fe=et(Fe)}return!1}return!0}o(_e,"_checkPrototype");function Te(P,ce){return Re(P,J)?P.name||ce||se:((P||{})[N]||{}).name||ce||se}o(Te,"_getObjName");function Ye(P,ce,be,Fe){Re(P,J)||k("theClass is an invalid class definition.");var Ze=P[J];_e(Ze,ce)||k("["+Te(P)+"] not in hierarchy of ["+Te(ce)+"]");var Qe=null;Re(Ze,X)?Qe=Ze[X]:(Qe=Z+Te(P,"_")+"$"+oe.n,oe.n++,Ze[X]=Qe);var ht=Ye[x],Dt=!!ht[ie];Dt&&Fe&&Fe[ie]!==void 0&&(Dt=!!Fe[ie]);var ct=U(ce),qt=ue(Ze,ce,ct,Dt);be(ce,qt);var bt=!!Ve&&!!ht[we];bt&&Fe&&(bt=!!Fe[we]),le(Ze,Qe,ce,ct,bt!==!1)}o(Ye,"dynamicProto"),Ye[x]=oe.o;var Se=b(5018),xe=b(9288),dt=b(7630),nt=b(5121),Ce=b(7984),S=b(3599),ye=function(P){(0,T.ne)(ce,P);function ce(){var be=P.call(this)||this;return be.pluginVersionStringArr=[],Ye(ce,be,function(Fe,Ze){(!Fe.logger||!Fe.logger.queue)&&(Fe.logger=new Se.AQ({loggingLevelConsole:1})),Fe.initialize=function(Qe,ht,Dt,ct){(0,xe.Lm)(Fe,function(){return"AppInsightsCore.initialize"},function(){var qt=Fe.pluginVersionStringArr;if(Qe){Qe.endpointUrl||(Qe.endpointUrl=Ce.YT);var bt=Qe.propertyStorageOverride;bt&&(!bt.getProperty||!bt.setProperty)&&(0,L._y)("Invalid property storage override passed."),Qe.channels&&(0,L.tO)(Qe.channels,function(kt){kt&&(0,L.tO)(kt,function(xt){if(xt.identifier&&xt.version){var On=xt.identifier+"="+xt.version;qt.push(On)}})})}Fe.getWParam=function(){return typeof document!="undefined"||!!Qe.enableWParam?0:-1},ht&&(0,L.tO)(ht,function(kt){if(kt&&kt.identifier&&kt.version){var xt=kt.identifier+"="+kt.version;qt.push(xt)}}),Fe.pluginVersionString=qt.join(";"),Fe.pluginVersionStringArr=qt;try{Ze.initialize(Qe,ht,Dt,ct),Fe.pollInternalLogs("InternalLog")}catch(kt){var Ot=Fe.logger,Ht=(0,dt.eU)(kt);Ht.indexOf("channels")!==-1&&(Ht+=`
 - Channels must be provided through config.channels only!`),(0,Se.kP)(Ot,1,514,"SDK Initialization Failed - no telemetry will be sent: "+Ht)}},function(){return{config:Qe,extensions:ht,logger:Dt,notificationManager:ct}})},Fe.track=function(Qe){(0,xe.Lm)(Fe,function(){return"AppInsightsCore.track"},function(){var ht=Qe;if(ht){ht.timings=ht.timings||{},ht.timings.trackStart=(0,S.hK)(),(0,S.r7)(ht.latency)||(ht.latency=1);var Dt=ht.ext=ht.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=S.vs;var ct=ht.baseData=ht.baseData||{};ct[Ce.o6]=ct[Ce.o6]||{};var qt=ct[Ce.o6];qt[Ce.p8]=qt[Ce.p8]||Fe.pluginVersionString||Ce.qS}Ze.track(ht)},function(){return{item:Qe}},!Qe.sync)}}),be}return o(ce,"AppInsightsCore"),ce.__ieDyn=1,ce}(nt.F);const Xe=ye;var Kt=b(6900),Nn=function(P){(0,T.ne)(ce,P);function ce(){var be=P.call(this)||this;return Ye(ce,be,function(Fe,Ze){Fe.initialize=function(Qe,ht,Dt,ct){Qe&&!Qe.endpointUrl&&(Qe.endpointUrl=Ce.YT),Fe.getWParam=function(){return S.x9||!!Qe.enableWParam?0:-1};try{Ze.initialize(Qe,ht,Dt,ct)}catch(qt){(0,Se.kP)(Fe.logger,1,514,"Initialization Failed: "+(0,dt.eU)(qt)+`
 - Note: Channels must be provided through config.channels only`)}},Fe.track=function(Qe){var ht=Qe;if(ht){var Dt=ht.ext=ht.ext||{};Dt.sdk=Dt.sdk||{},Dt.sdk.ver=S.vs}Ze.track(ht)}}),be}return o(ce,"BaseCore"),ce.__ieDyn=1,ce}(Kt.A);const Rn=Nn;var _n=L.mf;function dr(P,ce,be){return function(Fe){P[ce]=Fe,be()}}o(dr,"_createPromiseAllOnResolvedFunction");var ir=function(){function P(ce){var be=0,Fe=null,Ze=[];Ye(P,this,function(qt){qt.then=function(bt,Ot){return new P(function(Ht,kt){Qe(bt,Ot,Ht,kt)})},qt.catch=function(bt){return qt.then(null,bt)}});function Qe(qt,bt,Ot,Ht){Ze.push(function(){var kt;try{be===1?kt=_n(qt)?qt(Fe):Fe:kt=_n(bt)?bt(Fe):Fe,kt instanceof P?kt.then(Ot,Ht):be===2&&!_n(bt)?Ht(kt):Ot(kt)}catch(xt){Ht(xt);return}}),be!==0&&ht()}o(Qe,"_enqueue");function ht(){if(Ze.length>0){var qt=Ze.slice();Ze=[],setTimeout(function(){for(var bt=0,Ot=qt.length;bt<Ot;++bt)try{qt[bt]()}catch(Ht){}},0)}}o(ht,"_processQueue");function Dt(qt){be===0&&(Fe=qt,be=1,ht())}o(Dt,"_resolve");function ct(qt){be===0&&(Fe=qt,be=2,ht())}o(ct,"_reject"),o(function(){if(!_n(ce))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ce(Dt,ct)}catch(bt){ct(bt)}},"_initialize")()}return o(P,"ESPromise"),P.resolve=function(ce){return ce instanceof P?ce:ce&&_n(ce.then)?new P(function(be,Fe){try{ce.then(be,Fe)}catch(Ze){Fe(Ze)}}):new P(function(be){be(ce)})},P.reject=function(ce){return new P(function(be,Fe){Fe(ce)})},P.all=function(ce){if(!(!ce||!ce.length))return new P(function(be,Fe){try{for(var Ze=[],Qe=0,ht=0;ht<ce.length;ht++){var Dt=ce[ht];Dt&&_n(Dt.then)?(Qe++,Dt.then(dr(Ze,ht,function(){--Qe==0&&be(Ze)}),Fe)):Ze[ht]=Dt}Qe===0&&setTimeout(function(){be(Ze)},0)}catch(ct){Fe(ct)}})},P.race=function(ce){return new P(function(be,Fe){if(!(!ce||!ce.length))try{for(var Ze=o(function(ht){var Dt=ce[ht];Dt&&_n(Dt.then)?Dt.then(be,Fe):setTimeout(function(){be(Dt)},0)},"_loop_1"),Qe=0;Qe<ce.length;Qe++)Ze(Qe)}catch(ht){Fe(ht)}})},P}();const pr=ir;var mr=b(2091),fr=6e5,vt=0,zt=[],tn=[],Yt=[];function on(){return new Date().getTime()}o(on,"_getTime");var Mn=function(){function P(ce,be){var Fe=0,Ze=(ce||"<unnamed>")+"."+vt;vt++,Ye(P,this,function(Dt){var ct=null,qt=0;Dt.scheduleEvent=function(Ot,Ht,kt){var xt=Ze+"."+qt;qt++,Ht&&(xt+="-("+Ht+")");var On=xt+"{"+Fe+"}";Fe++;var En={evt:null,tm:on(),id:On,isRunning:!1,isAborted:!1};return ct?En.evt=vi(En,ct):En.evt=jn(En),ct=En,ct.evt._schId=On,En.evt;function lr(Jt){for(var zn=on(),Ln=zn-fr,nn=Jt.length,Bn=0;Bn<nn;){var kn=Jt[Bn];if(kn&&kn.tm<Ln){var wr=null;kn.abort?(wr="Aborting ["+kn.id+"] due to Excessive runtime ("+(zn-kn.tm)+" ms)",kn.abort(wr)):wr="Removing ["+kn.id+"] due to Excessive runtime ("+(zn-kn.tm)+" ms)",ht(wr),Jt.splice(Bn,1),nn--}else Bn++}}o(lr,"_abortAndRemoveOldEvents");function nr(Jt,zn){var Ln=!1,nn=bt(zt,Jt);if(nn||(nn=bt(Yt,Jt),Ln=!0),nn){nn.to&&(clearTimeout(nn.to),nn.to=null);var Bn=on()-nn.tm;zn?Ln?ht("Timed out event ["+Jt+"] finally complete -- "+Bn+" ms"):Qe("Promise ["+Jt+"] Complete -- "+Bn+" ms"):(Yt.push(nn),ht("Event ["+Jt+"] Timed out and removed -- "+Bn+" ms"))}else Qe("Failed to remove ["+Jt+"] from running queue");ct&&ct.id===Jt&&(ct=null),lr(zt),lr(tn),lr(Yt)}o(nr,"_cleanup");function ar(Jt,zn){return function(Ln){return nr(Jt,!0),zn&&zn(Ln),Ln}}o(ar,"_removeScheduledEvent");function Kr(Jt,zn,Ln,nn){zn.then(function(Bn){return Bn instanceof pr?(Qe("Event ["+Jt+"] returned a promise -- waiting"),Kr(Jt,Bn,Ln,nn),Bn):ar(Jt,Ln)(Bn)},ar(Jt,nn))}o(Kr,"_waitForFinalResult");function Ir(Jt,zn){var Ln=Jt.id;return new pr(function(nn,Bn){Qe("Event ["+Ln+"] Starting -- waited for "+(Jt.wTm||"--")+" ms"),Jt.isRunning=!0,Jt.abort=function(wr){Jt.abort=null,Jt.isAborted=!0,nr(Ln,!1),Bn(new Error(wr))};var kn=zn(Ln);kn instanceof pr?(kt&&(Jt.to=setTimeout(function(){nr(Ln,!1),Bn(new Error("Timed out after ["+kt+"] ms"))},kt)),Kr(Ln,kn,function(wr){Qe("Event ["+Ln+"] Resolving after "+(on()-Jt.tm)+" ms"),nn(wr)},Bn)):(Qe("Promise ["+Ln+"] Auto completed as the start action did not return a promise"),nn())})}o(Ir,"_createScheduledEvent");function jn(Jt){var zn=on();return Jt.wTm=zn-Jt.tm,Jt.tm=zn,Jt.isAborted?pr.reject(new Error("["+xt+"] was aborted")):(zt.push(Jt),Ir(Jt,Ot))}o(jn,"_startWaitingEvent");function vi(Jt,zn){var Ln=new pr(function(nn,Bn){var kn=on()-zn.tm,wr=zn.id;Qe("["+xt+"] is waiting for ["+wr+":"+kn+" ms] to complete before starting -- ["+tn.length+"] waiting and ["+zt.length+"] running"),Jt.abort=function(Gr){Jt.abort=null,bt(tn,xt),Jt.isAborted=!0,Bn(new Error(Gr))},zn.evt.then(function(Gr){bt(tn,xt),jn(Jt).then(nn,Bn)},function(Gr){bt(tn,xt),jn(Jt).then(nn,Bn)})});return tn.push(Jt),Ln}o(vi,"_waitForPreviousEvent")};function bt(Ot,Ht){for(var kt=0;kt<Ot.length;kt++)if(Ot[kt].id===Ht)return Ot.splice(kt,1)[0];return null}o(bt,"_removeQueuedEvent")});function Qe(Dt){var ct=(0,mr.Rd)();ct&&ct.QUnit&&console&&console.log("ESPromiseScheduler["+Ze+"] "+Dt)}o(Qe,"_debugLog");function ht(Dt){(0,Se.jV)(be,"ESPromiseScheduler["+Ze+"] "+Dt)}o(ht,"_warnLog")}return o(P,"ESPromiseScheduler"),P.incomplete=function(){return zt},P.waitingToStart=function(){return tn},P}();const Kn=Mn;var Gn=function(){function P(ce){var be=this,Fe={},Ze=[],Qe=[];ce&&Qe.push(ce);function ht(bt,Ot){var Ht,kt=Fe[bt];if(kt&&(Ht=kt[Ot]),!Ht&&Ht!==null){if((0,L.HD)(bt)&&(0,L.HD)(Ot))if(Qe.length>0){for(var xt=0;xt<Qe.length;xt++)if(Qe[xt].handleField(bt,Ot)){Ht={canHandle:!0,fieldHandler:Qe[xt]};break}}else Ze.length===0&&(Ht={canHandle:!0});if(!Ht&&Ht!==null){Ht=null;for(var xt=0;xt<Ze.length;xt++)if(Ze[xt].handleField(bt,Ot)){Ht={canHandle:!0,handler:Ze[xt],fieldHandler:null};break}}kt||(kt=Fe[bt]={}),kt[Ot]=Ht}return Ht}o(ht,"_getFieldSanitizer"),be.addSanitizer=function(bt){bt&&(Ze.push(bt),Fe={})},be.addFieldSanitizer=function(bt){bt&&(Qe.push(bt),Fe={})},be.handleField=function(bt,Ot){var Ht=ht(bt,Ot);return Ht?Ht.canHandle:!1},be.value=function(bt,Ot,Ht,kt){var xt=ht(bt,Ot);if(xt&&xt.canHandle){if(!xt||!xt.canHandle)return null;if(xt.handler)return xt.handler.value(bt,Ot,Ht,kt);if(!(0,L.HD)(Ot)||(0,L.le)(Ht)||Ht===Ce.qS)return null;var On=null,En=(0,S.Sy)(Ht);if((En&8192)==8192){var lr=En&~8192;if(On=Ht,!(0,S.Sn)(On.value)||lr!==1&&lr!==2&&lr!==3&&(lr&4096)!=4096)return null}else En===1||En===2||En===3||(En&4096)==4096?On=ct(bt,Ot,Ht):En===4&&(On=ct(bt,Ot,kt?JSON.stringify(Ht):Ht));if(On)return Dt(xt,bt,Ot,En,On,kt)}return null},be.property=function(bt,Ot,Ht,kt){var xt=ht(bt,Ot);if(!xt||!xt.canHandle||!(0,L.HD)(Ot)||(0,L.le)(Ht)||!(0,S.Sn)(Ht.value))return null;var On=(0,S.Sy)(Ht.value);return On===0?null:Dt(xt,bt,Ot,On,Ht,kt)};function Dt(bt,Ot,Ht,kt,xt,On){if(bt.handler)return bt.handler.property(Ot,Ht,xt,On);if(!(0,L.le)(xt.kind)){if((kt&4096)==4096||!(0,S.oS)(xt.kind))return null;xt.value=xt.value.toString()}return qt(bt.fieldHandler,Ot,Ht,kt,xt)}o(Dt,"_handleProperty");function ct(bt,Ot,Ht){return(0,S.Sn)(Ht)?{value:Ht}:null}o(ct,"_convertToProperty");function qt(bt,Ot,Ht,kt,xt){if(xt&&bt){var On=bt.getSanitizer(Ot,Ht,kt,xt.kind,xt.propertyType);if(On)if(kt===4){var En={},lr=xt.value;(0,L.rW)(lr,function(ar,Kr){var Ir=Ot+"."+Ht;if((0,S.Sn)(Kr)){var jn=ct(Ir,ar,Kr);jn=qt(bt,Ir,ar,(0,S.Sy)(Kr),jn),jn&&(En[ar]=jn.value)}}),xt.value=En}else{var nr={path:Ot,name:Ht,type:kt,prop:xt,sanitizer:be};xt=On.call(be,nr)}}return xt}o(qt,"_callFieldSanitizer")}return o(P,"ValueSanitizer"),P.getFieldType=S.Sy,P}(),hr=100,Pr=b(1880),Wr=b(4063),Qn=b(1589),$r=b(5928),Br=b(5843),vn=b(4869),Zn=b(4878),Cr=b(4392),gr=b(3242),oi=b(5883),gi=b(310),yr=b(4206)},7984:(ot,l,b)=>{"use strict";b.d(l,{qS:()=>T,YT:()=>v,p8:()=>W,o6:()=>O});var T="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",L="pluginVersionString",y=L+"Arr",W="version",O="properties"},3599:(ot,l,b)=>{"use strict";b.d(l,{Gf:()=>A,vs:()=>$,x9:()=>X,dH:()=>Z,Sn:()=>M,jM:()=>Y,IZ:()=>x,r7:()=>se,yj:()=>z,Vv:()=>de,oF:()=>Ae,d8:()=>Oe,kT:()=>ie,ej:()=>we,Do:()=>R,cm:()=>Ve,l7:()=>me,hK:()=>ge,oS:()=>K,JT:()=>$e,if:()=>re,Sy:()=>et,cQ:()=>ut,Tr:()=>wt,mJ:()=>k,ot:()=>U});var T=b(7630),v=b(6708),L=b(3242),y=b(5843),W=b(4392),O=b(4869),m=b(4878),w=b(2091),B=b(7984),H,A="3.2.10",$="1DS-Web-JS-"+A,N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",J="withCredentials",q="timeout",Ee=(H={},H[0]=0,H[2]=6,H[1]=1,H[3]=7,H[4096|2]=6,H[4096|1]=1,H[4096|3]=7,H),G=null,X=Boolean((0,T.Me)()),Z=Boolean((0,T.Jj)());function M(te){return!(te===B.qS||(0,v.le)(te))}o(M,"isValueAssigned");function Y(te){if(te){var ue=te.indexOf("-");if(ue>-1)return te.substring(0,ue)}return B.qS}o(Y,"getTenantId");function x(){return G===null&&(G=!(0,v.o8)(Uint8Array)&&!Re()&&!(0,T.b$)()),G}o(x,"isUint8ArrayAvailable");function se(te){return!!(te&&(0,v.hj)(te)&&te>=1&&te<=4)}o(se,"isLatency");function z(te,ue,Be){if(!ue&&!M(ue)||typeof te!="string")return null;var Ie=typeof ue;if(Ie==="string"||Ie==="number"||Ie==="boolean"||(0,v.kJ)(ue))ue={value:ue};else if(Ie==="object"&&!W.CY.call(ue,"value"))ue={value:Be?JSON.stringify(ue):ue};else if((0,v.le)(ue.value)||ue.value===B.qS||!(0,v.HD)(ue.value)&&!(0,v.hj)(ue.value)&&!(0,v.jn)(ue.value)&&!(0,v.kJ)(ue.value))return null;if((0,v.kJ)(ue.value)&&!$e(ue.value))return null;if(!(0,v.le)(ue.kind)){if((0,v.kJ)(ue.value)||!K(ue.kind))return null;ue.value=ue.value.toString()}return ue}o(z,"sanitizeProperty");function de(te,ue,Be){var Ie=-1;if(!(0,v.o8)(te))if(ue>0&&(ue===32?Ie=1<<13:ue<=13&&(Ie=ue<<5)),oe(Be))Ie===-1&&(Ie=0),Ie|=Be;else{var le=Ee[et(te)]||-1;Ie!==-1&&le!==-1?Ie|=le:le===6&&(Ie=le)}return Ie}o(de,"getCommonSchemaMetaData");function Ae(){(0,L.JP)(null).setEnabled(!1)}o(Ae,"disableCookies");function Oe(te,ue,Be){(0,L.p7)(null)&&(0,L.JP)(null).set(te,ue,Be*86400,null,"/")}o(Oe,"setCookie");function ie(te){(0,L.p7)(null)&&(0,L.JP)(null).del(te)}o(ie,"deleteCookie");function we(te){return(0,L.p7)(null)?R((0,L.JP)(null),te):B.qS}o(we,"getCookie");function R(te,ue,Be){Be===void 0&&(Be=!0);var Ie;return te&&(Ie=te.get(ue),Be&&Ie&&decodeURIComponent&&(Ie=decodeURIComponent(Ie))),Ie||B.qS}o(R,"getCookieValue");function Ve(te){te===void 0&&(te="D");var ue=(0,y.GW)();return te==="B"?ue="{"+ue+"}":te==="P"?ue="("+ue+")":te==="N"&&(ue=ue.replace(/-/g,B.qS)),ue}o(Ve,"createGuid");function me(te,ue,Be,Ie,le){var _e={},Te=!1,Ye=0,Se=arguments.length,xe=Object[W.hB],dt=arguments;for(xe.toString.call(dt[0])==="[object Boolean]"&&(Te=dt[0],Ye++);Ye<Se;Ye++){var te=dt[Ye];(0,v.rW)(te,function(Ce,S){Te&&S&&(0,v.Kn)(S)?(0,v.kJ)(S)?(_e[Ce]=_e[Ce]||[],(0,v.tO)(S,function(ye,Xe){ye&&(0,v.Kn)(ye)?_e[Ce][Xe]=me(!0,_e[Ce][Xe],ye):_e[Ce][Xe]=ye})):_e[Ce]=me(!0,_e[Ce],S):_e[Ce]=S})}return _e}o(me,"extend");var ge=y.Jj;function K(te){return te===0||te>0&&te<=13||te===32}o(K,"isValueKind");function oe(te){return te>=0&&te<=9}o(oe,"isDataType");function Re(){var te=(0,T.jW)();if(!(0,v.o8)(te)&&te.userAgent){var ue=te.userAgent.toLowerCase();if((ue.indexOf("safari")>=0||ue.indexOf("firefox")>=0)&&ue.indexOf("chrome")<0)return!0}return!1}o(Re,"isSafariOrFirefox");function $e(te){return te.length>0}o($e,"isArrayValid");function re(te,ue){var Be=te;Be.timings=Be.timings||{},Be.timings.processTelemetryStart=Be.timings.processTelemetryStart||{},Be.timings.processTelemetryStart[ue]=ge()}o(re,"setProcessTelemetryTimings");function et(te){var ue=0;if(te!=null){var Be=typeof te;Be==="string"?ue=1:Be==="number"?ue=2:Be==="boolean"?ue=3:Be===W.fK&&(ue=4,(0,v.kJ)(te)?(ue=4096,te.length>0&&(ue|=et(te[0]))):W.CY.call(te,"value")&&(ue=8192|et(te.value)))}return ue}o(et,"getFieldValueType");var ut={Version:A,FullVersionString:$,strUndefined:W.jA,strObject:W.fK,Undefined:W.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:T.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:X,isWindowObjectAvailable:Z,isValueAssigned:M,getTenantId:Y,isBeaconsSupported:T.MF,isUint8ArrayAvailable:x,isLatency:se,sanitizeProperty:z,getISOString:v.Y6,useXDomainRequest:T.cp,getCommonSchemaMetaData:de,cookieAvailable:L.p7,disallowsSameSiteNone:L.UY,setCookie:Oe,deleteCookie:ie,getCookie:we,createGuid:Ve,extend:me,getTime:ge,isValueKind:K,isArrayValid:$e,objDefineAccessors:v.l_,addPageUnloadEventListener:O.c9,setProcessTelemetryTimings:re,addEventHandler:O.Ib,getFieldValueType:et,strEndsWith:v.Id,objForEachKey:v.rW},wt={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:w.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:O.Ib,dateNow:v.m6,isIE:T.w1,disableCookies:Ae,newGuid:y.GW,perfNow:y.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:y.DO};function k(){return!!(0,T.a8)("chrome")}o(k,"isChromium");function U(te,ue,Be,Ie,le,_e){Ie===void 0&&(Ie=!1),le===void 0&&(le=!1);function Te(Se,xe,dt){try{Se[xe]=dt}catch(nt){}}o(Te,"_wrapSetXhrProp");var Ye=new XMLHttpRequest;return Ie&&Te(Ye,N,Ie),Be&&Te(Ye,J,Be),Ye.open(te,ue,!le),Be&&Te(Ye,J,Be),!le&&_e&&Te(Ye,q,_e),Ye}o(U,"openXhr")},5229:(ot,l,b)=>{"use strict";b.r(l),b.d(l,{BE_PROFILE:()=>dt,NRT_PROFILE:()=>xe,PostChannel:()=>Ji,RT_PROFILE:()=>Se});var T=b(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,L="undefined",y="constructor",W="prototype",O="function",m="_dynInstFuncs",w="_isDynProxy",B="_dynClass",H="_dynCls$",A="_dynInstChk",$=A,N="_dfOpts",J="_unknown_",q="__proto__",Ee="_dyn"+q,G="__dynProto$Gbl",X="_dynInstProto",Z="useBaseInst",M="setInstFuncs",Y=Object,x=Y.getPrototypeOf,se=Y.getOwnPropertyNames;function z(){var Ne;return typeof globalThis!==L&&(Ne=globalThis),!Ne&&typeof self!==L&&(Ne=self),!Ne&&typeof window!==L&&(Ne=window),!Ne&&typeof b.g!==L&&(Ne=b.g),Ne||{}}o(z,"_getGlobal");var de=z(),Ae=de[G]||(de[G]={o:(v={},v[M]=!0,v[Z]=!0,v),n:1e3});function Oe(Ne,rt){return Ne&&Y[W].hasOwnProperty.call(Ne,rt)}o(Oe,"_hasOwnProperty");function ie(Ne){return Ne&&(Ne===Y[W]||Ne===Array[W])}o(ie,"_isObjectOrArrayPrototype");function we(Ne){return ie(Ne)||Ne===Function[W]}o(we,"_isObjectArrayOrFunctionPrototype");function R(Ne){var rt;if(Ne){if(x)return x(Ne);var pt=Ne[q]||Ne[W]||(Ne[y]?Ne[y][W]:null);rt=Ne[Ee]||pt,Oe(Ne,Ee)||(delete Ne[X],rt=Ne[Ee]=Ne[X]||Ne[Ee],Ne[X]=pt)}return rt}o(R,"_getObjProto");function Ve(Ne,rt){var pt=[];if(se)pt=se(Ne);else for(var at in Ne)typeof at=="string"&&Oe(Ne,at)&&pt.push(at);if(pt&&pt.length>0)for(var Lt=0;Lt<pt.length;Lt++)rt(pt[Lt])}o(Ve,"_forEachProp");function me(Ne,rt,pt){return rt!==y&&typeof Ne[rt]===O&&(pt||Oe(Ne,rt))}o(me,"_isDynamicCandidate");function ge(Ne){throw new TypeError("DynamicProto: "+Ne)}o(ge,"_throwTypeError");function K(Ne){var rt={};return Ve(Ne,function(pt){!rt[pt]&&me(Ne,pt,!1)&&(rt[pt]=Ne[pt])}),rt}o(K,"_getInstanceFuncs");function oe(Ne,rt){for(var pt=Ne.length-1;pt>=0;pt--)if(Ne[pt]===rt)return!0;return!1}o(oe,"_hasVisited");function Re(Ne,rt,pt,at){function Lt(Ut,hn,Pn){var Un=hn[Pn];if(Un[w]&&at){var Yn=Ut[m]||{};Yn[$]!==!1&&(Un=(Yn[hn[B]]||{})[Pn]||Un)}return function(){return Un.apply(Ut,arguments)}}o(Lt,"_instFuncProxy");var Gt={};Ve(pt,function(Ut){Gt[Ut]=Lt(rt,pt,Ut)});for(var Ct=R(Ne),en=[];Ct&&!we(Ct)&&!oe(en,Ct);)Ve(Ct,function(Ut){!Gt[Ut]&&me(Ct,Ut,!x)&&(Gt[Ut]=Lt(rt,Ct,Ut))}),en.push(Ct),Ct=R(Ct);return Gt}o(Re,"_getBaseFuncs");function $e(Ne,rt,pt,at){var Lt=null;if(Ne&&Oe(pt,B)){var Gt=Ne[m]||{};if(Lt=(Gt[pt[B]]||{})[rt],Lt||ge("Missing ["+rt+"] "+O),!Lt[A]&&Gt[$]!==!1){for(var Ct=!Oe(Ne,rt),en=R(Ne),Ut=[];Ct&&en&&!we(en)&&!oe(Ut,en);){var hn=en[rt];if(hn){Ct=hn===at;break}Ut.push(en),en=R(en)}try{Ct&&(Ne[rt]=Lt),Lt[A]=1}catch(Pn){Gt[$]=!1}}}return Lt}o($e,"_getInstFunc");function re(Ne,rt,pt){var at=rt[Ne];return at===pt&&(at=R(rt)[Ne]),typeof at!==O&&ge("["+Ne+"] is not a "+O),at}o(re,"_getProtoFunc");function et(Ne,rt,pt,at,Lt){function Gt(Ut,hn){var Pn=o(function(){var Un=$e(this,hn,Ut,Pn)||re(hn,Ut,Pn);return Un.apply(this,arguments)},"dynProtoProxy");return Pn[w]=1,Pn}if(o(Gt,"_createDynamicPrototype"),!ie(Ne)){var Ct=pt[m]=pt[m]||{},en=Ct[rt]=Ct[rt]||{};Ct[$]!==!1&&(Ct[$]=!!Lt),Ve(pt,function(Ut){me(pt,Ut,!1)&&pt[Ut]!==at[Ut]&&(en[Ut]=pt[Ut],delete pt[Ut],(!Oe(Ne,Ut)||Ne[Ut]&&!Ne[Ut][w])&&(Ne[Ut]=Gt(Ne,Ut)))})}}o(et,"_populatePrototype");function ut(Ne,rt){if(x){for(var pt=[],at=R(rt);at&&!we(at)&&!oe(pt,at);){if(at===Ne)return!0;pt.push(at),at=R(at)}return!1}return!0}o(ut,"_checkPrototype");function wt(Ne,rt){return Oe(Ne,W)?Ne.name||rt||J:((Ne||{})[y]||{}).name||rt||J}o(wt,"_getObjName");function k(Ne,rt,pt,at){Oe(Ne,W)||ge("theClass is an invalid class definition.");var Lt=Ne[W];ut(Lt,rt)||ge("["+wt(Ne)+"] not in hierarchy of ["+wt(rt)+"]");var Gt=null;Oe(Lt,B)?Gt=Lt[B]:(Gt=H+wt(Ne,"_")+"$"+Ae.n,Ae.n++,Lt[B]=Gt);var Ct=k[N],en=!!Ct[Z];en&&at&&at[Z]!==void 0&&(en=!!at[Z]);var Ut=K(rt),hn=Re(Lt,rt,Ut,en);pt(rt,hn);var Pn=!!x&&!!Ct[M];Pn&&at&&(Pn=!!at[M]),et(Lt,Gt,rt,Ut,Pn!==!1)}o(k,"dynamicProto"),k[N]=Ae.o;var U=b(9288),te=b(4869),ue=b(5883),Be=b(3599),Ie=b(6708),le=b(7630),_e=b(5928),Te=b(5018),Ye=b(4063),Se="REAL_TIME",xe="NEAR_REAL_TIME",dt="BEST_EFFORT",nt="",Ce="POST",S="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ye="drop",Xe="send",Kt="requeue",Nn="rspFail",Rn="oth",_n="no-cache, no-store",dr="application/x-json-stream",ir="cache-control",pr="content-type",mr="kill-tokens",fr="kill-duration",vt="kill-duration-seconds",zt="time-delta-millis",tn="client-version",Yt="client-id",on="time-delta-to-apply-millis",Mn="upload-time",Kn="apikey",Gn="AuthMsaDeviceTicket",hr="AuthXToken",Pr="sdk-version",Wr="NoResponseBody",Qn="msfpc",$r="trace",Br="user";function vn(Ne){var rt=(Ne.ext||{}).intweb;return rt&&(0,Be.Sn)(rt[Qn])?rt[Qn]:null}o(vn,"_getEventMsfpc");function Zn(Ne){for(var rt=null,pt=0;rt===null&&pt<Ne.length;pt++)rt=vn(Ne[pt]);return rt}o(Zn,"_getMsfpc");var Cr=function(){function Ne(rt,pt){var at=pt?[].concat(pt):[],Lt=this,Gt=Zn(at);Lt.iKey=function(){return rt},Lt.Msfpc=function(){return Gt||nt},Lt.count=function(){return at.length},Lt.events=function(){return at},Lt.addEvent=function(Ct){return Ct?(at.push(Ct),Gt||(Gt=vn(Ct)),!0):!1},Lt.split=function(Ct,en){var Ut;if(Ct<at.length){var hn=at.length-Ct;(0,Ie.le)(en)||(hn=en<hn?en:hn),Ut=at.splice(Ct,hn),Gt=Zn(at)}return new Ne(rt,Ut)}}return o(Ne,"EventBatch"),Ne.create=function(rt,pt){return new Ne(rt,pt)},Ne}(),gr=function(){function Ne(){var rt=!0,pt=!0,at=!0,Lt="use-collector-delta",Gt=!1;k(Ne,this,function(Ct){Ct.allowRequestSending=function(){return rt},Ct.firstRequestSent=function(){at&&(at=!1,Gt||(rt=!1))},Ct.shouldAddClockSkewHeaders=function(){return pt},Ct.getClockSkewHeaderValue=function(){return Lt},Ct.setClockSkew=function(en){Gt||(en?(Lt=en,pt=!0,Gt=!0):pt=!1,rt=!0)}})}return o(Ne,"ClockSkewManager"),Ne.__ieDyn=1,Ne}();const oi=gr;var gi=1e3,yr=function(){function Ne(){var rt={};function pt(at){var Lt=[];return at&&(0,Ie.tO)(at,function(Gt){Lt.push((0,Ie.nd)(Gt))}),Lt}o(pt,"_normalizeTenants"),k(Ne,this,function(at){at.setKillSwitchTenants=function(Lt,Gt){if(Lt&&Gt)try{var Ct=pt(Lt.split(","));if(Gt==="this-request-only")return Ct;for(var en=parseInt(Gt,10)*gi,Ut=0;Ut<Ct.length;++Ut)rt[Ct[Ut]]=(0,Ie.m6)()+en}catch(hn){return[]}return[]},at.isTenantKilled=function(Lt){var Gt=rt,Ct=(0,Ie.nd)(Lt);return Gt[Ct]!==void 0&&Gt[Ct]>(0,Ie.m6)()?!0:(delete Gt[Ct],!1)}})}return o(Ne,"KillSwitch"),Ne.__ieDyn=1,Ne}();const P=yr;var ce=b(4392),be=.8,Fe=1.2,Ze=3e3,Qe=6e5;function ht(Ne){return!(Ne>=300&&Ne<500&&Ne!=408&&Ne!=429||Ne==501||Ne==505)}o(ht,"retryPolicyShouldRetryForStatus");function Dt(Ne){var rt=0,pt=Ze*be,at=Ze*Fe,Lt=Math.floor(Math.random()*(at-pt))+pt;return rt=Math.pow(2,Ne)*Lt,Math.min(rt,Qe)}o(Dt,"retryPolicyGetMillisToBackoffForRetry");var ct=20,qt=3984588,bt=65e3,Ot=2e6,Ht=Math.min(Ot,bt),kt="metadata",xt="f",On=/\./,En=function(){function Ne(rt,pt,at,Lt){var Gt="data",Ct="baseData",en="ext",Ut=!!Lt,hn=!0,Pn=pt,Un={};k(Ne,this,function(Yn){Yn.createPayload=function(Qt,sn,rn,yn,I,j){return{apiKeys:[],payloadBlob:nt,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Qt,isTeardown:sn,isSync:rn,isBeacon:yn,sendType:j,sendReason:I}},Yn.appendPayload=function(Qt,sn,rn){var yn=Qt&&sn&&!Qt.overflow;return yn&&(0,U.Lm)(rt,function(){return"Serializer:appendPayload"},function(){for(var I=sn.events(),j=Qt.payloadBlob,Ue=Qt.numEvents,tt=!1,Rt=[],Ft=[],pn=Qt.isBeacon,mn=pn?bt:qt,Wt=pn?Ht:Ot,gn=0,wn=0;gn<I.length;){var Bt=I[gn];if(Bt){if(Ue>=rn){Qt.overflow=sn.split(gn);break}var mt=Yn.getEventBlob(Bt);if(mt&&mt.length<=Wt){var xn=mt.length,Tn=j.length;if(Tn+xn>mn){Qt.overflow=sn.split(gn);break}j&&(j+=`
`),j+=mt,wn++,wn>ct&&(j.substr(0,1),wn=0),tt=!0,Ue++}else mt?Rt.push(Bt):Ft.push(Bt),I.splice(gn,1),gn--}gn++}if(Rt&&Rt.length>0&&Qt.sizeExceed.push(Cr.create(sn.iKey(),Rt)),Ft&&Ft.length>0&&Qt.failedEvts.push(Cr.create(sn.iKey(),Ft)),tt){Qt.batches.push(sn),Qt.payloadBlob=j,Qt.numEvents=Ue;var Cn=sn.iKey();(0,Ie.UA)(Qt.apiKeys,Cn)===-1&&Qt.apiKeys.push(Cn)}},function(){return{payload:Qt,theBatch:{iKey:sn.iKey(),evts:sn.events()},max:rn}}),yn},Yn.getEventBlob=function(Qt){try{return(0,U.Lm)(rt,function(){return"Serializer.getEventBlob"},function(){var sn={};sn.name=Qt.name,sn.time=Qt.time,sn.ver=Qt.ver,sn.iKey="o:"+(0,Be.jM)(Qt.iKey);var rn={},yn=Qt[en];yn&&(sn[en]=rn,(0,Ie.rW)(yn,function(Ue,tt){var Rt=rn[Ue]={};Fn(tt,Rt,"ext."+Ue,!0,null,null,!0)}));var I=sn[Gt]={};I.baseType=Qt.baseType;var j=I[Ct]={};return Fn(Qt.baseData,j,Ct,!1,[Ct],function(Ue,tt,Rt){lr(rn,Ue,tt,Rt)},hn),Fn(Qt.data,I,Gt,!1,[],function(Ue,tt,Rt){lr(rn,Ue,tt,Rt)},hn),JSON.stringify(sn)},function(){return{item:Qt}})}catch(sn){return null}};function er(Qt,sn){var rn=Un[Qt];return rn===void 0&&(Qt.length>=7&&(rn=(0,Ie.xe)(Qt,"ext.metadata")||(0,Ie.xe)(Qt,"ext.web")),Un[Qt]=rn),rn}o(er,"_isReservedField");function Fn(Qt,sn,rn,yn,I,j,Ue){(0,Ie.rW)(Qt,function(tt,Rt){var Ft=null;if(Rt||(0,Be.Sn)(Rt)){var pn=rn,mn=tt,Wt=I,gn=sn;if(Ut&&!yn&&On.test(tt)){var wn=tt.split("."),Bt=wn.length;if(Bt>1){Wt&&(Wt=Wt.slice());for(var mt=0;mt<Bt-1;mt++){var xn=wn[mt];gn=gn[xn]=gn[xn]||{},pn+="."+xn,Wt&&Wt.push(xn)}mn=wn[Bt-1]}}var Tn=yn&&er(pn,mn);if(!Tn&&Pn&&Pn.handleField(pn,mn)?Ft=Pn.value(pn,mn,Rt,at):Ft=(0,Be.yj)(mn,Rt,at),Ft){var Cn=Ft.value;if(gn[mn]=Cn,j&&j(Wt,mn,Ft),Ue&&typeof Cn=="object"&&!(0,Ie.kJ)(Cn)){var or=Wt;or&&(or=or.slice(),or.push(mn)),Fn(Rt,Cn,pn+"."+mn,yn,or,j,Ue)}}}})}o(Fn,"_processPathKeys")})}return o(Ne,"Serializer"),Ne.__ieDyn=1,Ne}();function lr(Ne,rt,pt,at){if(at&&Ne){var Lt=(0,Be.Vv)(at.value,at.kind,at.propertyType);if(Lt>-1){var Gt=Ne[kt];Gt||(Gt=Ne[kt]={f:{}});var Ct=Gt[xt];if(Ct||(Ct=Gt[xt]={}),rt)for(var en=0;en<rt.length;en++){var Ut=rt[en];Ct[Ut]||(Ct[Ut]={f:{}});var hn=Ct[Ut][xt];hn||(hn=Ct[Ut][xt]={}),Ct=hn}Ct=Ct[pt]={},(0,Ie.kJ)(at.value)?Ct.a={t:Lt}:Ct.t=Lt}}}o(lr,"_addJSONPropertyMetaData");var nr,ar="sendAttempt",Kr="&"+Wr+"=true",Ir=(nr={},nr[1]=Kt,nr[100]=Kt,nr[200]="sent",nr[8004]=ye,nr[8003]=ye,nr),jn={},vi={};function Jt(Ne,rt,pt){jn[Ne]=rt,pt!==!1&&(vi[rt]=Ne)}o(Jt,"_addCollectorHeaderQsMapping"),Jt(Gn,Gn,!1),Jt(tn,tn),Jt(Yt,"Client-Id"),Jt(Kn,Kn),Jt(on,on),Jt(Mn,Mn),Jt(hr,hr);function zn(Ne){try{return Ne.responseText}catch(rt){}return nt}o(zn,"_getResponseText");function Ln(Ne,rt){var pt=!1;if(Ne&&rt){var at=(0,Ie.FY)(Ne);if(at&&at.length>0)for(var Lt=rt.toLowerCase(),Gt=0;Gt<at.length;Gt++){var Ct=at[Gt];if(Ct&&(0,Ie.nr)(rt,Ct)&&Ct.toLowerCase()===Lt){pt=!0;break}}}return pt}o(Ln,"_hasHeader");function nn(Ne,rt,pt,at){rt&&pt&&pt.length>0&&(at&&jn[rt]?(Ne.hdrs[jn[rt]]=pt,Ne.useHdrs=!0):Ne.url+="&"+rt+"="+pt)}o(nn,"_addRequestDetails");function Bn(Ne,rt){return rt&&((0,Ie.hj)(rt)?Ne=[rt].concat(Ne):(0,Ie.kJ)(rt)&&(Ne=rt.concat(Ne))),Ne}o(Bn,"_prependTransports");var kn=function(){function Ne(rt,pt,at,Lt,Gt){this._responseHandlers=[];var Ct="?cors=true&"+pr.toLowerCase()+"="+dr,en=new P,Ut=!1,hn=new oi,Pn=!1,Un=0,Yn,er,Fn,Qt,sn=!0,rn=[],yn={},I=[],j=null,Ue=!1,tt,Rt=!1,Ft=!1,pn,mn,Wt,gn,wn;k(Ne,this,function(Bt){var mt=!0;Bt.initialize=function(he,qe,st,St,Tt){var Nt;Tt||(Tt={}),Ct=he+Ct,Ft=(0,Ie.o8)(Tt.avoidOptions)?!0:!Tt.avoidOptions,Qt=qe,tt=qe.getCookieMgr(),Ue=!Qt.config.disableEventTimings;var ln=!!Qt.config.enableCompoundKey;Yn=st,er=Yn.diagLog();var fe=Tt.valueSanitizer,Ge=Tt.stringifyObjects;(0,Ie.o8)(Tt.enableCompoundKey)||(ln=!!Tt.enableCompoundKey),pn=Tt.xhrTimeout,mn=!!Tt.disableXhrSync,Wt=!!Tt.disableFetchKeepAlive,wn=Tt.addNoResponse!==!1,Pn=!(0,le.b$)(),j=new En(Qt,fe,Ge,ln),(0,Ie.le)(Tt.useSendBeacon)||(Pn=!!Tt.useSendBeacon);var He=St,lt=Tt.alwaysUseXhrOverride?St:null,Et=Tt.alwaysUseXhrOverride?St:null,Vt=[3,2];if(!St){sn=!1;var An=(0,le.k$)();An&&An.protocol&&An.protocol.toLowerCase()==="file:"&&(mt=!1);var In=[];(0,le.b$)()?(In=[2,1],Vt=[2,1,3]):In=[1,2,3],In=Bn(In,Tt.transports),St=xn(In,!1),St||(0,Te.jV)(er,"No available transport to send events"),He=xn(In,!0)}lt||(Vt=Bn(Vt,Tt.unloadTransports),lt=xn(Vt,!0)),gn=!sn&&(Pn&&(0,le.MF)()||!Wt&&(0,le.JO)(!0)),Fn=(Nt={},Nt[0]=St,Nt[1]=He||xn([1,2,3],!0),Nt[2]=lt||He||xn([1],!0),Nt[3]=Et||xn([2,3],!0)||He||xn([1],!0),Nt)};function xn(he,qe){for(var st=0,St=null,Tt=0;St==null&&Tt<he.length;)st=he[Tt],st===1?(0,le.cp)()?St=Tn:(0,le.Z3)()&&(St=or):st===2&&(0,le.JO)(qe)&&(!qe||qe&&!Wt)?St=Cn:Pn&&st===3&&(0,le.MF)()&&(St=Hr),Tt++;return St?{_transport:st,_isSync:qe,sendPOST:St}:null}o(xn,"_getSenderInterface"),Bt._getDbgPlgTargets=function(){return[Fn[0],en,j,Fn]};function Tn(he,qe,st){var St=new XDomainRequest;St.open(Ce,he.urlString),he.timeout&&(St.timeout=he.timeout),St.onload=function(){var Tt=zn(St);jt(qe,200,{},Tt),kr(Tt)},St.onerror=function(){jt(qe,400,{})},St.ontimeout=function(){jt(qe,500,{})},St.onprogress=function(){},st?St.send(he.data):Gt.set(function(){St.send(he.data)},0)}o(Tn,"_xdrSendPost");function Cn(he,qe,st){var St,Tt=he.urlString,Nt=!1,ln=!1,fe=(St={body:he.data,method:Ce},St[S]=!0,St);st&&(fe.keepalive=!0,he._sendReason===2&&(Nt=!0,wn&&(Tt+=Kr))),mt&&(fe.credentials="include"),he.headers&&(0,Ie.FY)(he.headers).length>0&&(fe.headers=he.headers),fetch(Tt,fe).then(function(Ge){var He={},lt=nt,Et=Ge.headers;Et&&Et.forEach(function(Vt,An){He[An]=Vt}),Ge.body&&Ge.text().then(function(Vt){lt=Vt}),ln||(ln=!0,jt(qe,Ge.status,He,lt),kr(lt))}).catch(function(Ge){ln||(ln=!0,jt(qe,0,{}))}),Nt&&!ln&&(ln=!0,jt(qe,200,{})),!ln&&he.timeout>0&&Gt.set(function(){ln||(ln=!0,jt(qe,500,{}))},he.timeout)}o(Cn,"_fetchSendPost");function or(he,qe,st){var St=he.urlString;function Tt(Ge,He,lt){if(!Ge[lt]&&He&&He.getResponseHeader){var Et=He.getResponseHeader(lt);Et&&(Ge[lt]=(0,Ie.nd)(Et))}return Ge}o(Tt,"_appendHeader");function Nt(Ge){var He={};return Ge.getAllResponseHeaders?He=Pi(Ge.getAllResponseHeaders()):(He=Tt(He,Ge,zt),He=Tt(He,Ge,fr),He=Tt(He,Ge,vt)),He}o(Nt,"_getAllResponseHeaders");function ln(Ge,He){jt(qe,Ge.status,Nt(Ge),He)}o(ln,"xhrComplete"),st&&he.disableXhrSync&&(st=!1);var fe=(0,Be.ot)(Ce,St,mt,!0,st,he.timeout);(0,Ie.rW)(he.headers,function(Ge,He){fe.setRequestHeader(Ge,He)}),fe.onload=function(){var Ge=zn(fe);ln(fe,Ge),kr(Ge)},fe.onerror=function(){ln(fe)},fe.ontimeout=function(){ln(fe)},fe.send(he.data)}o(or,"_xhrSendPost");function jt(he,qe,st,St){try{he(qe,st,St)}catch(Tt){(0,Te.kP)(er,2,518,(0,le.eU)(Tt))}}o(jt,"_doOnComplete");function Hr(he,qe,st){var St=he,Tt=200,Nt=St._thePayload,ln=he.urlString+(wn?Kr:nt);try{var fe=(0,le.jW)();if(!fe.sendBeacon(ln,he.data))if(Nt){var Ge=[];(0,Ie.tO)(Nt.batches,function(He){if(Ge&&He&&He.count()>0){for(var lt=He.events(),Et=0;Et<lt.length;Et++)if(!fe.sendBeacon(ln,j.getEventBlob(lt[Et]))){Ge.push(He.split(Et));break}}else Ge.push(He.split(0))}),tr(Ge,8003,Nt.sendType,!0)}else Tt=0}catch(He){(0,Te.jV)(er,"Failed to send telemetry using sendBeacon API. Ex:"+(0,le.eU)(He)),Tt=0}finally{jt(qe,Tt,{},nt)}}o(Hr,"_beaconSendPost");function _r(he){return he===2||he===3}o(_r,"_isBeaconPayload");function fn(he){return Rt&&_r(he)&&(he=2),he}o(fn,"_adjustSendType"),Bt.addQueryStringParameter=function(he,qe){for(var st=0;st<rn.length;st++)if(rn[st].name===he){rn[st].value=qe;return}rn.push({name:he,value:qe})},Bt.addHeader=function(he,qe){yn[he]=qe},Bt.canSendRequest=function(){return Xn()&&hn.allowRequestSending()},Bt.sendQueuedRequests=function(he,qe){(0,Ie.o8)(he)&&(he=0),Rt&&(he=fn(he),qe=2),Ur(I,he,0)&&Qr(Lr(),0,!1,he,qe||0)},Bt.isCompletelyIdle=function(){return!Ut&&Un===0&&I.length===0},Bt.setUnloading=function(he){Rt=he},Bt.addBatch=function(he){if(he&&he.count()>0){if(en.isTenantKilled(he.iKey()))return!1;I.push(he)}return!0},Bt.teardown=function(){I.length>0&&Qr(Lr(),0,!0,2,2)},Bt.pause=function(){Ut=!0},Bt.resume=function(){Ut=!1,Bt.sendQueuedRequests(0,4)},Bt.sendSynchronousBatch=function(he,qe,st){he&&he.count()>0&&((0,Ie.le)(qe)&&(qe=1),Rt&&(qe=fn(qe),st=2),Qr([he],0,!1,qe,st||0))};function Xn(){return!Ut&&Un<pt}o(Xn,"_hasIdleConnection");function Lr(){var he=I;return I=[],he}o(Lr,"_clearQueue");function Ur(he,qe,st){var St=!1;return he&&he.length>0&&!Ut&&Fn[qe]&&j&&(St=qe!==0||Xn()&&(st>0||hn.allowRequestSending())),St}o(Ur,"_canSendPayload");function li(he){var qe={};return he&&(0,Ie.tO)(he,function(st,St){qe[St]={iKey:st.iKey(),evts:st.events()}}),qe}o(li,"_createDebugBatches");function Qr(he,qe,st,St,Tt){if(!(!he||he.length===0)){if(Ut){tr(he,1,St);return}St=fn(St);try{var Nt=he,ln=St!==0;(0,U.Lm)(Qt,function(){return"HttpManager:_sendBatches"},function(fe){fe&&(he=he.slice(0));for(var Ge=[],He=null,lt=(0,Be.hK)(),Et=Fn[St]||(ln?Fn[1]:Fn[0]),Vt=Et&&Et._transport,An=gn&&(Rt||_r(St)||Vt===3||Et._isSync&&Vt===2);Ur(he,St,qe);){var In=he.shift();In&&In.count()>0&&(en.isTenantKilled(In.iKey())?Ge.push(In):(He=He||j.createPayload(qe,st,ln,An,Tt,St),j.appendPayload(He,In,rt)?He.overflow!==null&&(he=[He.overflow].concat(he),He.overflow=null,br(He,lt,(0,Be.hK)(),Tt),lt=(0,Be.hK)(),He=null):(br(He,lt,(0,Be.hK)(),Tt),lt=(0,Be.hK)(),he=[In].concat(he),He=null)))}He&&br(He,lt,(0,Be.hK)(),Tt),he.length>0&&(I=he.concat(I)),tr(Ge,8004,St)},function(){return{batches:li(Nt),retryCount:qe,isTeardown:st,isSynchronous:ln,sendReason:Tt,useSendBeacon:_r(St),sendType:St}},!ln)}catch(fe){(0,Te.kP)(er,2,48,"Unexpected Exception sending batch: "+(0,le.eU)(fe))}}}o(Qr,"_sendBatches");function Vr(he,qe){var st={url:Ct,hdrs:{},useHdrs:!1};qe?(st.hdrs=(0,Be.l7)(st.hdrs,yn),st.useHdrs=(0,Ie.FY)(st.hdrs).length>0):(0,Ie.rW)(yn,function(fe,Ge){vi[fe]?nn(st,vi[fe],Ge,!1):(st.hdrs[fe]=Ge,st.useHdrs=!0)}),nn(st,Yt,"NO_AUTH",qe),nn(st,tn,Be.vs,qe);var St=nt;(0,Ie.tO)(he.apiKeys,function(fe){St.length>0&&(St+=","),St+=fe}),nn(st,Kn,St,qe),nn(st,Mn,(0,Ie.m6)().toString(),qe);var Tt=qr(he);if((0,Be.Sn)(Tt)&&(st.url+="&ext.intweb.msfpc="+Tt),hn.shouldAddClockSkewHeaders()&&nn(st,on,hn.getClockSkewHeaderValue(),qe),Qt.getWParam){var Nt=Qt.getWParam();Nt>=0&&(st.url+="&w="+Nt)}for(var ln=0;ln<rn.length;ln++)st.url+="&"+rn[ln].name+"="+rn[ln].value;return st}o(Vr,"_buildRequestDetails");function Yr(he,qe,st){he[qe]=he[qe]||{},he[qe][Yn.identifier]=st}o(Yr,"_setTimingValue");function br(he,qe,st,St){if(he&&he.payloadBlob&&he.payloadBlob.length>0){var Tt=!!Bt.sendHook,Nt=Fn[he.sendType];!_r(he.sendType)&&he.isBeacon&&he.sendReason===2&&(Nt=Fn[2]||Fn[3]||Nt);var ln=Ft;(he.isBeacon||Nt._transport===3)&&(ln=!1);var fe=Vr(he,ln);ln=ln||fe.useHdrs;var Ge=(0,Be.hK)();(0,U.Lm)(Qt,function(){return"HttpManager:_doPayloadSend"},function(){for(var He=0;He<he.batches.length;He++)for(var lt=he.batches[He],Et=lt.events(),Vt=0;Vt<Et.length;Vt++){var An=Et[Vt];if(Ue){var In=An.timings=An.timings||{};Yr(In,"sendEventStart",Ge),Yr(In,"serializationStart",qe),Yr(In,"serializationCompleted",st)}An[ar]>0?An[ar]++:An[ar]=1}tr(he.batches,1e3+(St||0),he.sendType,!0);var Vn={data:he.payloadBlob,urlString:fe.url,headers:fe.hdrs,_thePayload:he,_sendReason:St,timeout:pn,disableXhrSync:mn,disableFetchKeepAlive:Wt};ln&&(Ln(Vn.headers,ir)||(Vn.headers[ir]=_n),Ln(Vn.headers,pr)||(Vn.headers[pr]=dr));var di=null;Nt&&(di=o(function(fi){hn.firstRequestSent();var Ui=o(function(ni,Ii){yi(ni,Ii,he,St)},"onComplete"),sr=he.isTeardown||he.isSync;try{Nt.sendPOST(fi,Ui,sr),Bt.sendListener&&Bt.sendListener(Vn,fi,sr,he.isBeacon)}catch(ni){(0,Te.jV)(er,"Unexpected exception sending payload. Ex:"+(0,le.eU)(ni)),jt(Ui,0,{})}},"sender")),(0,U.Lm)(Qt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(di)if(he.sendType===0&&Un++,Tt&&!he.isBeacon&&Nt._transport!==3){var fi={data:Vn.data,urlString:Vn.urlString,headers:(0,Be.l7)({},Vn.headers),timeout:Vn.timeout,disableXhrSync:Vn.disableXhrSync,disableFetchKeepAlive:Vn.disableFetchKeepAlive},Ui=!1;(0,U.Lm)(Qt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Bt.sendHook(fi,function(sr){Ui=!0,!sn&&!sr._thePayload&&(sr._thePayload=sr._thePayload||Vn._thePayload,sr._sendReason=sr._sendReason||Vn._sendReason),di(sr)},he.isSync||he.isTeardown)}catch(sr){Ui||di(Vn)}})}else di(Vn)})},function(){return{thePayload:he,serializationStart:qe,serializationCompleted:st,sendReason:St}},he.isSync)}he.sizeExceed&&he.sizeExceed.length>0&&tr(he.sizeExceed,8003,he.sendType),he.failedEvts&&he.failedEvts.length>0&&tr(he.failedEvts,8002,he.sendType)}o(br,"_doPayloadSend");function ci(he,qe){Ue&&(0,Ie.tO)(he,function(st){var St=st.timings=st.timings||{};Yr(St,"sendEventCompleted",qe)})}o(ci,"_addEventCompletedTimings");function yi(he,qe,st,St){var Tt=9e3,Nt=null,ln=!1,fe=!1;try{var Ge=!0;if(typeof he!==ce.jA){if(qe){hn.setClockSkew(qe[zt]);var He=qe[fr]||qe["kill-duration-seconds"];(0,Ie.tO)(en.setKillSwitchTenants(qe[mr],He),function(Et){(0,Ie.tO)(st.batches,function(Vt){if(Vt.iKey()===Et){Nt=Nt||[];var An=Vt.split(0);st.numEvents-=An.count(),Nt.push(An)}})})}if(he==200||he==204){Tt=200;return}(!ht(he)||st.numEvents<=0)&&(Ge=!1),Tt=9e3+he%1e3}if(Ge){Tt=100;var lt=st.retryCnt;st.sendType===0&&(lt<at?(ln=!0,wi(function(){st.sendType===0&&Un--,Qr(st.batches,lt+1,st.isTeardown,Rt?2:st.sendType,5)},Rt,Dt(lt))):(fe=!0,Rt&&(Tt=8001)))}}finally{ln||(hn.setClockSkew(),Er(st,Tt,St,fe)),tr(Nt,8004,st.sendType)}}o(yi,"_retryRequestIfNeeded");function Er(he,qe,st,St){try{St&&Yn._backOffTransmission(),qe===200&&(!St&&!he.isSync&&Yn._clearBackOff(),ui(he.batches)),tr(he.batches,qe,he.sendType,!0)}finally{he.sendType===0&&(Un--,st!==5&&Bt.sendQueuedRequests(he.sendType,st))}}o(Er,"_handleRequestFinished");function ui(he){if(Ue){var qe=(0,Be.hK)();(0,Ie.tO)(he,function(st){st&&st.count()>0&&ci(st.events(),qe)})}}o(ui,"_addCompleteTimings");function wi(he,qe,st){qe?he():Gt.set(he,st)}o(wi,"_doAction");function Pi(he){var qe={};if((0,Ie.HD)(he)){var st=(0,Ie.nd)(he).split(/[\r\n]+/);(0,Ie.tO)(st,function(St){if(St){var Tt=St.indexOf(": ");if(Tt!==-1){var Nt=(0,Ie.nd)(St.substring(0,Tt)).toLowerCase(),ln=(0,Ie.nd)(St.substring(Tt+1));qe[Nt]=ln}else qe[(0,Ie.nd)(St)]=1}})}return qe}o(Pi,"_convertAllHeadersToMap");function qr(he){for(var qe=0;qe<he.batches.length;qe++){var st=he.batches[qe].Msfpc();if(st)return encodeURIComponent(st)}return nt}o(qr,"_getMsfpc");function kr(he){var qe=Bt._responseHandlers;try{for(var st=0;st<qe.length;st++)try{qe[st](he)}catch(Tt){(0,Te.kP)(er,1,519,"Response handler failed: "+Tt)}if(he){var St=JSON.parse(he);(0,Be.Sn)(St.webResult)&&(0,Be.Sn)(St.webResult[Qn])&&tt.set("MSFPC",St.webResult[Qn],365*86400)}}catch(Tt){}}o(kr,"_handleCollectorResponse");function tr(he,qe,st,St){if(he&&he.length>0&&Lt){var Tt=Lt[Si(qe)];if(Tt){var Nt=st!==0;(0,U.Lm)(Qt,function(){return"HttpManager:_sendBatchesNotification"},function(){wi(function(){try{Tt.call(Lt,he,qe,Nt,st)}catch(ln){(0,Te.kP)(er,1,74,"send request notification failed: "+ln)}},St||Nt,0)},function(){return{batches:li(he),reason:qe,isSync:Nt,sendSync:St,sendType:st}},!Nt)}}}o(tr,"_sendBatchesNotification");function Si(he){var qe=Ir[he];return(0,Be.Sn)(qe)||(qe=Rn,he>=9e3&&he<=9999?qe=Nn:he>=8e3&&he<=8999?qe=ye:he>=1e3&&he<=1999&&(qe=Xe)),qe}o(Si,"_getNotificationAction")})}return o(Ne,"HttpManager"),Ne.__ieDyn=1,Ne}();function wr(Ne,rt){for(var pt=[],at=2;at<arguments.length;at++)pt[at-2]=arguments[at];return setTimeout(Ne,rt,pt)}o(wr,"defaultSetTimeout");function Gr(Ne){clearTimeout(Ne)}o(Gr,"defaultClearTimeout");function pi(Ne,rt){return{set:Ne||wr,clear:rt||Gr}}o(pi,"createTimeoutWrapper");var mi=.25,si=500,zr=20,ta=6,Ti=2,na=4,Mi=2,ra=1,Xr="eventsDiscarded",Zr="overrideInstrumentationKey",ei="maxEventRetryAttempts",ca="maxUnloadEventRetryAttempts",Hi="addUnloadCb",ti=function(Ne){(0,T.ne)(rt,Ne);function rt(){var pt=Ne.call(this)||this;pt.identifier="PostChannel",pt.priority=1011,pt.version="3.2.10";var at,Lt=!1,Gt=[],Ct=null,en=!1,Ut=0,hn=500,Pn=0,Un=1e4,Yn={},er=Se,Fn=null,Qt=null,sn=0,rn=0,yn,I,j={},Ue,tt,Rt=-1,Ft,pn=!0,mn=!1,Wt=ta,gn=Ti,wn,Bt;return k(rt,pt,function(mt,xn){Xn(),mt._getDbgPlgTargets=function(){return[I]},mt.initialize=function(fe,Ge,He){(0,U.Lm)(Ge,function(){return"PostChannel:initialize"},function(){var lt=Ge;xn.initialize(fe,Ge,He);try{var Et=!!Ge[Hi];wn=(0,te.jU)((0,ue.J)(mt.identifier),Ge.evtNamespace&&Ge.evtNamespace());var Vt=mt._getTelCtx();fe.extensionConfig[mt.identifier]=fe.extensionConfig[mt.identifier]||{},at=Vt.getExtCfg(mt.identifier),Bt=pi(at.setTimeoutOverride,at.clearTimeoutOverride),pn=!at.disableOptimizeObj&&(0,Be.mJ)(),Tn(lt),at.eventsLimitInMem>0&&(Un=at.eventsLimitInMem),at.immediateEventLimit>0&&(hn=at.immediateEventLimit),at.autoFlushEventsLimit>0&&(Ue=at.autoFlushEventsLimit),(0,Ie.hj)(at[ei])&&(Wt=at[ei]),(0,Ie.hj)(at[ca])&&(gn=at[ca]),ln(),at.httpXHROverride&&at.httpXHROverride.sendPOST&&(yn=at.httpXHROverride),(0,Be.Sn)(fe.anonCookieName)&&I.addQueryStringParameter("anoncknm",fe.anonCookieName),I.sendHook=at.payloadPreprocessor,I.sendListener=at.payloadListener;var An=at.overrideEndpointUrl?at.overrideEndpointUrl:fe.endpointUrl;mt._notificationManager=Ge.getNotifyMgr(),I.initialize(An,mt.core,mt,yn,at);var In=fe.disablePageUnloadEvents||[];(0,te.c9)(Cn,In,wn),(0,te.TJ)(Cn,In,wn),(0,te.nD)(or,fe.disablePageShowEvents,wn)}catch(Vn){throw mt.setInitialized(!1),Vn}},function(){return{coreConfig:fe,core:Ge,extensions:He}})},mt.processTelemetry=function(fe,Ge){(0,Be.if)(fe,mt.identifier),Ge=mt._getTelCtx(Ge);var He=Ge.getExtCfg(mt.identifier),lt=!!at.disableTelemetry;He&&(lt=lt||!!He.disableTelemetry);var Et=fe;!lt&&!Lt&&(at[Zr]&&(Et.iKey=at[Zr]),He&&He[Zr]&&(Et.iKey=He[Zr]),jt(Et,!0),mn?li(2,2):fn()),mt.processNext(Et,Ge)},mt._doTeardown=function(fe,Ge){li(2,2),Lt=!0,I.teardown(),(0,te.JA)(null,wn),(0,te.C9)(null,wn),(0,te.Yl)(null,wn),Xn()};function Tn(fe){var Ge=fe.getWParam;fe.getWParam=function(){var He=0;return at.ignoreMc1Ms0CookieProcessing&&(He=He|2),He|Ge()}}o(Tn,"_hookWParam");function Cn(fe){var Ge=fe||(0,le.Jj)().event;Ge.type!=="beforeunload"&&(mn=!0,I.setUnloading(mn)),li(2,2)}o(Cn,"_handleUnloadEvents");function or(fe){mn=!1,I.setUnloading(mn)}o(or,"_handleShowEvents");function jt(fe,Ge){if(fe.sendAttempt||(fe.sendAttempt=0),fe.latency||(fe.latency=1),fe.ext&&fe.ext[$r]&&delete fe.ext[$r],fe.ext&&fe.ext[Br]&&fe.ext[Br].id&&delete fe.ext[Br].id,pn&&(Be.if,fe.ext=(0,Ie.Ax)(fe.ext),fe.baseData&&(fe.baseData=(0,Ie.Ax)(fe.baseData)),fe.data&&(fe.data=(0,Ie.Ax)(fe.data))),fe.sync){if(sn||en)fe.latency=3,fe.sync=!1;else if(I){pn&&(fe=(0,Ie.Ax)(fe)),I.sendSynchronousBatch(Cr.create(fe.iKey,[fe]),fe.sync===!0?1:fe.sync,3);return}}var He=fe.latency,lt=Pn,Et=Un;He===4&&(lt=Ut,Et=hn);var Vt=!1;if(lt<Et)Vt=!br(fe,Ge);else{var An=1,In=zr;He===4&&(An=4,In=1),Vt=!0,ci(fe.iKey,fe.latency,An,In)&&(Vt=!br(fe,Ge))}Vt&&Si(Xr,[fe],_e.h.QueueFull)}o(jt,"_addEventToQueues"),mt.setEventQueueLimits=function(fe,Ge){Un=fe>0?fe:1e4,Ue=Ge>0?Ge:0,ln();var He=Pn>fe;if(!He&&tt>0)for(var lt=1;!He&&lt<=3;lt++){var Et=j[lt];Et&&Et.batches&&(0,Ie.tO)(Et.batches,function(Vt){Vt&&Vt.count()>=tt&&(He=!0)})}Yr(!0,He)},mt.pause=function(){Ur(),en=!0,I.pause()},mt.resume=function(){en=!1,I.resume(),fn()},mt.addResponseHandler=function(fe){I._responseHandlers.push(fe)},mt._loadTransmitProfiles=function(fe){Pi(),(0,Ie.rW)(fe,function(Ge,He){var lt=He.length;if(lt>=2){var Et=lt>2?He[2]:0;if(He.splice(0,lt-2),He[1]<0&&(He[0]=-1),He[1]>0&&He[0]>0){var Vt=He[0]/He[1];He[0]=Math.ceil(Vt)*He[1]}Et>=0&&He[1]>=0&&Et>He[1]&&(Et=He[1]),He.push(Et),Yn[Ge]=He}})},mt.flush=function(fe,Ge,He){if(fe===void 0&&(fe=!0),!en)if(He=He||1,fe)Ct==null?(Ur(),Er(1,0,He),Ct=Lr(function(){Ct=null,ui(Ge,He)},0)):Gt.push(Ge);else{var lt=Ur();Hr(1,1,He),Ge!=null&&Ge(),lt&&fn()}},mt.setMsaAuthTicket=function(fe){I.addHeader(Gn,fe)},mt.hasEvents=_r,mt._setTransmitProfile=function(fe){er!==fe&&Yn[fe]!==void 0&&(Ur(),er=fe,fn())};function Hr(fe,Ge,He){var lt=Er(fe,Ge,He);return I.sendQueuedRequests(Ge,He),lt}o(Hr,"_sendEventsForLatencyAndAbove");function _r(){return Pn>0}o(_r,"_hasEvents");function fn(){if(Rt>=0&&Er(Rt,0,Ft)&&I.sendQueuedRequests(0,Ft),Ut>0&&!Qt&&!en){var fe=Yn[er][2];fe>=0&&(Qt=Lr(function(){Qt=null,Hr(4,0,1),fn()},fe))}var Ge=Yn[er][1];!Fn&&!Ct&&Ge>=0&&!en&&(_r()?Fn=Lr(function(){Fn=null,Hr(rn===0?3:1,0,1),rn++,rn%=2,fn()},Ge):rn=0)}o(fn,"_scheduleTimer"),mt._backOffTransmission=function(){sn<na&&(sn++,Ur(),fn())},mt._clearBackOff=function(){sn&&(sn=0,Ur(),fn())};function Xn(){at=null,Lt=!1,Gt=[],Ct=null,en=!1,Ut=0,hn=500,Pn=0,Un=1e4,Yn={},er=Se,Fn=null,Qt=null,sn=0,rn=0,yn=null,j={},Ue=void 0,tt=0,Rt=-1,Ft=null,pn=!0,mn=!1,Wt=ta,gn=Ti,wn=null,Bt=pi(),I=new kn(si,Mi,ra,{requeue:kr,send:qe,sent:st,drop:St,rspFail:Tt,oth:Nt},Bt),qr(),Qr(),ln()}o(Xn,"_initDefaults");function Lr(fe,Ge){Ge===0&&sn&&(Ge=1);var He=1e3;return sn&&(He=Dt(sn-1)),Bt.set(fe,Ge*He)}o(Lr,"_createTimer");function Ur(){return Fn!==null?(Bt.clear(Fn),Fn=null,rn=0,!0):!1}o(Ur,"_clearScheduledTimer");function li(fe,Ge){Ur(),Ct&&(Bt.clear(Ct),Ct=null),en||Hr(1,fe,Ge)}o(li,"_releaseAllQueues");function Qr(){j[4]={batches:[],iKeyMap:{}},j[3]={batches:[],iKeyMap:{}},j[2]={batches:[],iKeyMap:{}},j[1]={batches:[],iKeyMap:{}}}o(Qr,"_clearQueues");function Vr(fe,Ge,He){var lt=j[Ge];lt||(Ge=1,lt=j[Ge]);var Et=lt.iKeyMap[fe];return!Et&&He&&(Et=Cr.create(fe),lt.batches.push(Et),lt.iKeyMap[fe]=Et),Et}o(Vr,"_getEventBatch");function Yr(fe,Ge){I.canSendRequest()&&!sn&&(Ue>0&&Pn>Ue&&(Ge=!0),Ge&&Ct==null&&mt.flush(fe,null,20))}o(Yr,"_performAutoFlush");function br(fe,Ge){pn&&(fe=(0,Ie.Ax)(fe));var He=fe.latency,lt=Vr(fe.iKey,He,!0);return lt.addEvent(fe)?(He!==4?(Pn++,Ge&&fe.sendAttempt===0&&Yr(!fe.sync,tt>0&&lt.count()>=tt)):Ut++,!0):!1}o(br,"_addEventToProperQueue");function ci(fe,Ge,He,lt){for(;He<=Ge;){var Et=Vr(fe,Ge,!0);if(Et&&Et.count()>0){var Vt=Et.split(0,lt),An=Vt.count();if(An>0)return He===4?Ut-=An:Pn-=An,he(Xr,[Vt],_e.h.QueueFull),!0}He++}return yi(),!1}o(ci,"_dropEventWithLatencyOrLess");function yi(){for(var fe=0,Ge=0,He=o(function(Et){var Vt=j[Et];Vt&&Vt.batches&&(0,Ie.tO)(Vt.batches,function(An){Et===4?fe+=An.count():Ge+=An.count()})},"_loop_1"),lt=1;lt<=4;lt++)He(lt);Pn=Ge,Ut=fe}o(yi,"_resetQueueCounts");function Er(fe,Ge,He){var lt=!1,Et=Ge===0;return!Et||I.canSendRequest()?(0,U.Lm)(mt.core,function(){return"PostChannel._queueBatches"},function(){for(var Vt=[],An=4;An>=fe;){var In=j[An];In&&In.batches&&In.batches.length>0&&((0,Ie.tO)(In.batches,function(Vn){I.addBatch(Vn)?lt=lt||Vn&&Vn.count()>0:Vt=Vt.concat(Vn.events()),An===4?Ut-=Vn.count():Pn-=Vn.count()}),In.batches=[],In.iKeyMap={}),An--}Vt.length>0&&Si(Xr,Vt,_e.h.KillSwitch),lt&&Rt>=fe&&(Rt=-1,Ft=0)},function(){return{latency:fe,sendType:Ge,sendReason:He}},!Et):(Rt=Rt>=0?Math.min(Rt,fe):fe,Ft=Math.max(Ft,He)),lt}o(Er,"_queueBatches");function ui(fe,Ge){Hr(1,0,Ge),yi(),wi(function(){fe&&fe(),Gt.length>0?Ct=Lr(function(){Ct=null,ui(Gt.shift(),Ge)},0):(Ct=null,fn())})}o(ui,"_flushImpl");function wi(fe){I.isCompletelyIdle()?fe():Ct=Lr(function(){Ct=null,wi(fe)},mi)}o(wi,"_waitForIdleManager");function Pi(){Ur(),qr(),er=Se,fn()}o(Pi,"_resetTransmitProfiles");function qr(){Yn={},Yn[Se]=[2,1,0],Yn[xe]=[6,3,0],Yn[dt]=[18,9,0]}o(qr,"_initializeProfiles");function kr(fe,Ge){var He=[],lt=Wt;mn&&(lt=gn),(0,Ie.tO)(fe,function(Et){Et&&Et.count()>0&&(0,Ie.tO)(Et.events(),function(Vt){Vt&&(Vt.sync&&(Vt.latency=4,Vt.sync=!1),Vt.sendAttempt<lt?((0,Be.if)(Vt,mt.identifier),jt(Vt,!1)):He.push(Vt))})}),He.length>0&&Si(Xr,He,_e.h.NonRetryableStatus),mn&&li(2,2)}o(kr,"_requeueEvents");function tr(fe,Ge){var He=mt._notificationManager||{},lt=He[fe];if(lt)try{lt.apply(He,Ge)}catch(Et){(0,Te.kP)(mt.diagLog(),1,74,fe+" notification failed: "+Et)}}o(tr,"_callNotification");function Si(fe,Ge){for(var He=[],lt=2;lt<arguments.length;lt++)He[lt-2]=arguments[lt];Ge&&Ge.length>0&&tr(fe,[Ge].concat(He))}o(Si,"_notifyEvents");function he(fe,Ge){for(var He=[],lt=2;lt<arguments.length;lt++)He[lt-2]=arguments[lt];Ge&&Ge.length>0&&(0,Ie.tO)(Ge,function(Et){Et&&Et.count()>0&&tr(fe,[Et.events()].concat(He))})}o(he,"_notifyBatchEvents");function qe(fe,Ge,He){fe&&fe.length>0&&tr("eventsSendRequest",[Ge>=1e3&&Ge<=1999?Ge-1e3:0,He!==!0])}o(qe,"_sendingEvent");function st(fe,Ge){he("eventsSent",fe,Ge),fn()}o(st,"_eventsSentEvent");function St(fe,Ge){he(Xr,fe,Ge>=8e3&&Ge<=8999?Ge-8e3:_e.h.Unknown)}o(St,"_eventsDropped");function Tt(fe){he(Xr,fe,_e.h.NonRetryableStatus),fn()}o(Tt,"_eventsResponseFail");function Nt(fe,Ge){he(Xr,fe,_e.h.Unknown),fn()}o(Nt,"_otherEvent");function ln(){!at||!at.disableAutoBatchFlushLimit?tt=Math.max(si*(Mi+1),Un/6):tt=0}o(ln,"_setAutoLimits"),(0,Ie.l_)(mt,"_setTimeoutOverride",function(){return Bt.set},function(fe){Bt=pi(fe,Bt.clear)}),(0,Ie.l_)(mt,"_clearTimeoutOverride",function(){return Bt.clear},function(fe){Bt=pi(Bt.set,fe)})}),pt}return o(rt,"PostChannel"),rt.__ieDyn=1,rt}(Ye.i);const Ji=ti},4873:(ot,l,b)=>{"use strict";b.d(l,{By:()=>v,cc:()=>y});var T=b(6708);function v(W){var O={};return(0,T.rW)(W,function(m,w){O[m]=w,O[w]=m}),(0,T._A)(O)}o(v,"createEnumStyle");function L(W){var O={};return objForEachKey(W,function(m,w){O[m]=m,O[w]=m}),deepFreeze(O)}o(L,"createEnumMap");function y(W){var O={};return(0,T.rW)(W,function(m,w){O[m]=w[1],O[w[0]]=w[1]}),(0,T._A)(O)}o(y,"createValueMap")},5928:(ot,l,b)=>{"use strict";b.d(l,{h:()=>v});var T=b(4873),v=(0,T.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(ot,l,b)=>{"use strict";b.d(l,{X:()=>X,v:()=>Z});var T=b(4873),v,L="Failed",y=L+"MonitorAjax",W="Track",O="Start",m="Stop",w="Event",B="AuthContext",H="Exception",A="Local",$="Session",N="Storage",J="Browser",q="Cannot",Ee="Buffer",G="InstrumentationKey",X=(0,T.By)({CRITICAL:1,WARNING:2}),Z=(0,T.By)((v={},v[J+"DoesNotSupport"+A+N]=0,v[J+q+"Read"+A+N]=1,v[J+q+"Read"+$+N]=2,v[J+q+"Write"+A+N]=3,v[J+q+"Write"+$+N]=4,v[J+L+"RemovalFrom"+A+N]=5,v[J+L+"RemovalFrom"+$+N]=6,v[q+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+$+"Cookie"]=9,v.ErrorPVCalc=10,v[H+"WhileLoggingError"]=11,v[L+"AddingTelemetryTo"+Ee]=12,v[y+"Abort"]=13,v[y+"Dur"]=14,v[y+"Open"]=15,v[y+"RSC"]=16,v[y+"Send"]=17,v[y+"GetCorrelationHeader"]=18,v[L+"ToAddHandlerForOnBeforeUnload"]=19,v[L+"ToSendQueuedTelemetry"]=20,v[L+"ToReportDataLoss"]=21,v["Flush"+L]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[$+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[O+W+w+L]=29,v[m+W+w+L]=30,v[O+W+L]=31,v[m+W+L]=32,v.TelemetrySampledAndNotSent=33,v[W+w+L]=34,v[W+H+L]=35,v[W+"Metric"+L]=36,v[W+"PV"+L]=37,v[W+"PV"+L+"Calc"]=38,v[W+"Trace"+L]=39,v["Transmission"+L]=40,v[L+"ToSet"+N+Ee]=41,v[L+"ToRestore"+N+Ee]=42,v.InvalidBackendResponse=43,v[L+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[q+"SerializeObject"]=48,v[q+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+B+L]=51,v[H+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+B+L]=59,v["Set"+B+L+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+L]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[$+N+Ee+"Full"]=67,v[q+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[y+"SetRequestHeader"]=71,v["Send"+J+"InfoOnUserInit"]=72,v["Plugin"+H]=73,v["Notification"+H]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+G]=100,v[q+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[W+"PageAction"+w+L]=103,v[L+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+N+Ee+"Full"]=105,v[G+"Deprecation"]=106,v))},5121:(ot,l,b)=>{"use strict";b.d(l,{F:()=>H});var T=b(1088),v=b(1679),L=b(8096),y=b(6900),W=b(5018),O=b(6708),m=b(6041),w=b(1880),B=b(9288),H=function(A){(0,T.ne)($,A);function $(){var N=A.call(this)||this;return(0,v.Z)($,N,function(J,q){J[L.VL]=function(X,Z,M,Y){q[L.VL](X,Z,M||new W.AQ(X),Y||new w.f(X))},J.track=function(X){(0,B.Lm)(J[m.kl](),function(){return"AppInsightsCore:track"},function(){X===null&&(G(X),(0,O._y)("Invalid telemetry item")),Ee(X),q.track(X)},function(){return{item:X}},!X.sync)};function Ee(X){(0,O.le)(X[L.I])&&(G(X),(0,O._y)("telemetry name required"))}o(Ee,"_validateTelemetryItem");function G(X){var Z=J[L.tb]();Z&&Z[m.$F]([X],2)}o(G,"_notifyInvalidEvent")}),N}return o($,"AppInsightsCore"),$.__ieDyn=1,$}(y.A)},6900:(ot,l,b)=>{"use strict";b.d(l,{A:()=>me});var T=b(1088),v=b(1679),L=b(2091),y=b(8096),W=b(6708),O=b(6041),m=b(1589),w=b(3833),B=500,H="Channel has invalid priority - ";function A(ge,K,oe){K&&(0,W.kJ)(K)&&K[y.R5]>0&&(K=K.sort(function(Re,$e){return Re[O.yi]-$e[O.yi]}),(0,W.tO)(K,function(Re){Re[O.yi]<B&&(0,W._y)(H+Re[y.pZ])}),ge[y.MW]({queue:(0,W.FL)(K),chain:(0,m.jV)(K,oe[y.TC],oe)}))}o(A,"_addChannelQueue");function $(ge,K){function oe(){return(0,m.CD)(null,K[y.TC],K,null)}o(oe,"_getTelCtx");function Re(k,U,te,ue){var Be=k?k[y.R5]+1:1;function Ie(){Be--,Be===0&&(ue&&ue(),ue=null)}o(Ie,"_runChainOnComplete"),Be>0&&(0,W.tO)(k,function(le){if(le&&le.queue[y.R5]>0){var _e=le.chain,Te=U[y.zV](_e);Te[y.Fc](Ie),te(Te)}else Be--}),Ie()}o(Re,"_processChannelQueue");function $e(k,U){var te=U||{reason:0};return Re(ge,k,function(ue){ue[y.uL](te)},function(){k[y.uL](te)}),!0}o($e,"_doUpdate");function re(k,U){var te=U||{reason:0,isAsync:!1};return Re(ge,k,function(ue){ue[y.uL](te)},function(){k[y.uL](te),ut=!1}),!0}o(re,"_doTeardown");function et(k){var U=null;return ge&&ge[y.R5]>0&&(0,W.tO)(ge,function(te){if(te&&te.queue[y.R5]>0&&((0,W.tO)(te.queue,function(ue){if(ue[y.pZ]===k)return U=ue,-1}),U))return-1}),U}o(et,"_getChannel");var ut=!1,wt={identifier:"ChannelControllerPlugin",priority:B,initialize:function(k,U,te,ue){ut=!0,(0,W.tO)(ge,function(Be){Be&&Be.queue[y.R5]>0&&(0,w.bP)((0,m.CD)(Be.chain,k,U),te)})},isInitialized:function(){return ut},processTelemetry:function(k,U){Re(ge,U||oe(),function(te){te[y.uL](k)},function(){U[y.uL](k)})},update:$e,pause:function(){Re(ge,oe(),function(k){k.iterate(function(U){U.pause&&U.pause()})},null)},resume:function(){Re(ge,oe(),function(k){k.iterate(function(U){U.resume&&U.resume()})},null)},teardown:re,getChannel:et,flush:function(k,U,te,ue){var Be=1,Ie=!1,le=null;ue=ue||5e3;function _e(){Be--,Ie&&Be===0&&(le&&(clearTimeout(le),le=null),U&&U(Ie),U=null)}return o(_e,"doCallback"),Re(ge,oe(),function(Te){Te.iterate(function(Ye){if(Ye[y.kL]){Be++;var Se=!1;Ye[y.kL](k,function(){Se=!0,_e()},te)||Se||(k&&le==null?le=setTimeout(function(){le=null,_e()},ue):_e())}})},function(){Ie=!0,_e()}),!0},_setQueue:function(k){ge=k}};return wt}o($,"createChannelControllerPlugin");function N(ge,K,oe){var Re=[];if(ge&&(0,W.tO)(ge,function(re){return A(Re,re,oe)}),K){var $e=[];(0,W.tO)(K,function(re){re[O.yi]>B&&$e[y.MW](re)}),A(Re,$e,oe)}return Re}o(N,"createChannelQueues");var J=b(3242),q=b(5883),Ee=b(7158),G=b(5018),X=b(9288),Z=b(4063),M=b(7630),Y=function(ge){(0,T.ne)(K,ge);function K(){var oe=ge.call(this)||this;oe.identifier="TelemetryInitializerPlugin",oe.priority=199;var Re,$e;re(),(0,v.Z)(K,oe,function(et,ut){et.addTelemetryInitializer=function(wt){var k={id:Re++,fn:wt};$e[y.MW](k);var U={remove:function(){(0,W.tO)($e,function(te,ue){if(te.id===k.id)return $e[y.cb](ue,1),-1})}};return U},et[O.hL]=function(wt,k){for(var U=!1,te=$e[y.R5],ue=0;ue<te;++ue){var Be=$e[ue];if(Be)try{if(Be.fn[y.ZV](null,[wt])===!1){U=!0;break}}catch(Ie){(0,G.kP)(k[y.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,W.jj)(Ie),{exception:(0,M.eU)(Ie)},!0)}}U||et[y.uL](wt,k)},et[y.F3]=function(){re()}});function re(){Re=0,$e=[]}return o(re,"_initDefaults"),oe}return o(K,"TelemetryInitializerPlugin"),K.__ieDyn=1,K}(Z.i),x=b(310),se="Plugins must provide initialize method",z="_notificationManager",de="SDK is still unloading...",Ae="SDK is not initialized",Oe={loggingLevelConsole:1};function ie(ge,K){return new X.Jk(K)}o(ie,"_createPerfManager");function we(ge,K,oe){var Re,$e=[],re={};return(0,W.tO)(oe,function(et){((0,W.le)(et)||(0,W.le)(et[y.VL]))&&(0,W._y)(se);var ut=et[O.yi],wt=et[y.pZ];et&&ut&&((0,W.le)(re[ut])?re[ut]=wt:(0,G.jV)(ge,"Two extensions have same priority #"+ut+" - "+re[ut]+", "+wt)),(!ut||ut<K)&&$e[y.MW](et)}),Re={all:oe},Re[O.oV]=$e,Re}o(we,"_validateExtensions");function R(ge,K){var oe=!1;return(0,W.tO)(K,function(Re){if(Re===ge)return oe=!0,-1}),oe}o(R,"_isPluginPresent");function Ve(){var ge;return(0,L.pu)((ge={},ge[y.g]=function(K){},ge[y.n7]=function(K){},ge[O.uC]=function(K){},ge[O.$F]=function(K,oe){},ge[O.f_]=function(K,oe){},ge))}o(Ve,"_createDummyNotificationManager");var me=function(){function ge(){var K,oe,Re,$e,re,et,ut,wt,k,U,te,ue,Be,Ie,le,_e,Te,Ye,Se,xe,dt=0;(0,v.Z)(ge,this,function(nt){Ce(),nt[y.yl]=function(){return oe},nt[y.VL]=function(vt,zt,tn,Yt){Ie&&(0,W._y)(de),nt[y.yl]()&&(0,W._y)("Core should not be initialized more than once"),K=vt||{},nt[y.TC]=K,(0,W.le)(vt[y.p$])&&(0,W._y)("Please provide instrumentation key"),$e=Yt,nt[z]=Yt,dr(),ir(),pr(),tn&&(nt[y.eZ]=tn);var on=(0,W.qK)(K,O.js,[]);k=[],k[y.MW].apply(k,(0,T.$h)((0,T.$h)([],zt,!1),on,!1)),ue=(0,W.qK)(K,O.Z,[]),ye(null),(!Be||Be[y.R5]===0)&&(0,W._y)("No "+O.Z+" available"),oe=!0,nt.releaseQueue()},nt.getTransmissionControls=function(){var vt=[];return Be&&(0,W.tO)(Be,function(zt){vt[y.MW](zt.queue)}),(0,W.FL)(vt)},nt.track=function(vt){vt.iKey=vt.iKey||K[y.p$],vt[y.Z_]=vt[y.Z_]||(0,W.Y6)(new Date),vt.ver=vt.ver||"4.0",!Ie&&nt[y.yl]()?S()[y.uL](vt):Re[y.MW](vt)},nt[y.SD]=S,nt[y.tb]=function(){return $e||($e=Ve(),nt[z]=$e),$e},nt[y.g]=function(vt){$e&&$e[y.g](vt)},nt[y.n7]=function(vt){$e&&$e[y.n7](vt)},nt.getCookieMgr=function(){return ut||(ut=(0,J.Nz)(K,nt[y.eZ])),ut},nt.setCookieMgr=function(vt){ut=vt},nt[O.kl]=function(){if(!re&&!et&&(0,W.v4)(K.enablePerfMgr)){var vt=(0,W.v4)(K[O.DN]);(0,W.mf)(vt)&&(et=vt(nt,nt[y.tb]()))}return re||et||(0,X.j5)()},nt.setPerfMgr=function(vt){re=vt},nt.eventCnt=function(){return Re[y.R5]},nt.releaseQueue=function(){if(oe&&Re[y.R5]>0){var vt=Re;Re=[],(0,W.tO)(vt,function(zt){S()[y.uL](zt)})}},nt.pollInternalLogs=function(vt){_e=vt||null;var zt=(0,W.v4)(K.diagnosticLogInterval);return(!zt||!(zt>0))&&(zt=1e4),dt&&clearInterval(dt),dt=setInterval(function(){Rn()},zt),dt},nt[y.LS]=function(){dt&&(clearInterval(dt),dt=0,Rn())},(0,W.Vb)(nt,function(){return le},["addTelemetryInitializer"]),nt.unload=function(vt,zt,tn){var Yt;vt===void 0&&(vt=!0),oe||(0,W._y)(Ae),Ie&&(0,W._y)(de);var on=(Yt={reason:50},Yt[y.d]=vt,Yt.flushComplete=!1,Yt),Mn=(0,m.Bt)(Kt(),nt);Mn[y.Fc](function(){Ce(),zt&&zt(on)},nt);function Kn(Gn){on.flushComplete=Gn,Ie=!0,Ye.run(Mn,on),nt[y.LS](),Mn[y.uL](on)}o(Kn,"_doUnload"),_n(vt,Kn,6,tn)||Kn(!1)},nt[y.TO]=Xe,nt.addPlugin=function(vt,zt,tn,Yt){if(!vt){Yt&&Yt(!1),fr(se);return}var on=Xe(vt[y.pZ]);if(on&&!zt){Yt&&Yt(!1),fr("Plugin ["+vt[y.pZ]+"] is already loaded!");return}var Mn={reason:16};function Kn(Pr){k[y.MW](vt),Mn.added=[vt],ye(Mn),Yt&&Yt(!0)}if(o(Kn,"_addPlugin"),on){var Gn=[on.plugin],hr={reason:2,isAsync:!!tn};Nn(Gn,hr,function(Pr){Pr?(Mn.removed=Gn,Mn.reason|=32,Kn(!0)):Yt&&Yt(!1)})}else Kn(!1)},nt.evtNamespace=function(){return Te},nt[y.kL]=_n,nt.getTraceCtx=function(vt){return xe||(xe=(0,w.Yn)()),xe},nt.setTraceCtx=function(vt){xe=vt||null},(0,W.Oi)(nt,"addUnloadCb",function(){return Ye},"add");function Ce(){oe=!1,K=(0,W.mm)(!0,{},Oe),nt[y.TC]=K,nt[y.eZ]=new G.AQ(K),nt[y.iC]=[],le=new Y,Re=[],$e=null,re=null,et=null,ut=null,wt=null,U=null,k=[],te=null,ue=null,Be=null,Ie=!1,_e=null,Te=(0,q.J)("AIBaseCore",!0),Ye=(0,x.Y)(),xe=null}o(Ce,"_initDefaults");function S(){return(0,m.CD)(Kt(),K,nt)}o(S,"_createTelCtx");function ye(vt){var zt=we(nt[y.eZ],B,k);U=zt[O.oV],wt=null;var tn=zt.all;if(Be=(0,W.FL)(N(ue,tn,nt)),te){var Yt=(0,W.UA)(tn,te);Yt!==-1&&tn[y.cb](Yt,1),Yt=(0,W.UA)(U,te),Yt!==-1&&U[y.cb](Yt,1),te._setQueue(Be)}else te=$(Be,nt);tn[y.MW](te),U[y.MW](te),nt[y.iC]=(0,w.AA)(tn),te[y.VL](K,nt,tn),(0,w.bP)(S(),tn),nt[y.iC]=(0,W.FL)((0,w.AA)(U||[])).slice(),vt&&mr(vt)}o(ye,"_initPluginChain");function Xe(vt){var zt,tn=null,Yt=null;return(0,W.tO)(nt[y.iC],function(on){if(on[y.pZ]===vt&&on!==te&&on!==le)return Yt=on,-1}),!Yt&&te&&(Yt=te.getChannel(vt)),Yt&&(tn=(zt={plugin:Yt},zt[y.$h]=function(on){(0,w.OY)(Yt)[O.mE]=!on},zt.isEnabled=function(){var on=(0,w.OY)(Yt);return!on[y.fi]&&!on[O.mE]},zt.remove=function(on,Mn){var Kn;on===void 0&&(on=!0);var Gn=[Yt],hr=(Kn={reason:1},Kn[y.d]=on,Kn);Nn(Gn,hr,function(Pr){Pr&&ye({reason:32,removed:Gn}),Mn&&Mn(Pr)})},zt)),tn}o(Xe,"_getPlugin");function Kt(){if(!wt){var vt=(U||[]).slice();(0,W.UA)(vt,le)===-1&&vt[y.MW](le),wt=(0,m.jV)((0,w.AA)(vt),K,nt)}return wt}o(Kt,"_getPluginChain");function Nn(vt,zt,tn){if(vt&&vt[y.R5]>0){var Yt=(0,m.jV)(vt,K,nt),on=(0,m.Bt)(Yt,nt);on[y.Fc](function(){var Mn=!1,Kn=[];(0,W.tO)(k,function(hr,Pr){R(hr,vt)?Mn=!0:Kn[y.MW](hr)}),k=Kn;var Gn=[];ue&&((0,W.tO)(ue,function(hr,Pr){var Wr=[];(0,W.tO)(hr,function(Qn){R(Qn,vt)?Mn=!0:Wr[y.MW](Qn)}),Gn[y.MW](Wr)}),ue=Gn),tn&&tn(Mn)}),on[y.uL](zt)}else tn(!1)}o(Nn,"_removePlugins");function Rn(){var vt=nt[y.eZ]?nt[y.eZ].queue:[];vt&&((0,W.tO)(vt,function(zt){var tn,Yt=(tn={},tn[y.I]=_e||"InternalMessageId: "+zt[y.Gc],tn.iKey=(0,W.v4)(K[y.p$]),tn.time=(0,W.Y6)(new Date),tn.baseType=G.lQ.dataType,tn.baseData={message:zt[y.gU]},tn);nt.track(Yt)}),vt[y.R5]=0)}o(Rn,"_flushInternalLogs");function _n(vt,zt,tn,Yt){return te?te[y.kL](vt,zt,tn||6,Yt):(zt&&zt(!1),!0)}o(_n,"_flushChannels");function dr(){var vt=(0,W.v4)(K.disableDbgExt);vt===!0&&Se&&($e[y.n7](Se),Se=null),$e&&!Se&&vt!==!0&&(Se=(0,Ee.p)(K),$e[y.g](Se))}o(dr,"_initDebugListener");function ir(){var vt=(0,W.v4)(K.enablePerfMgr);!vt&&et&&(et=null),vt&&(0,W.qK)(K,O.DN,ie)}o(ir,"_initPerfManager");function pr(){var vt=(0,W.qK)(K,O.Zh,{});vt.NotificationManager=$e}o(pr,"_initExtConfig");function mr(vt){var zt=(0,m.xy)(Kt(),nt);(!nt._updateHook||nt._updateHook(zt,vt)!==!0)&&zt[y.uL](vt)}o(mr,"_doUpdate");function fr(vt){var zt=nt[y.eZ];zt?(0,G.kP)(zt,2,73,vt):(0,W._y)(vt)}o(fr,"_logOrThrowError")})}return o(ge,"BaseCore"),ge.__ieDyn=1,ge}()},4063:(ot,l,b)=>{"use strict";b.d(l,{i:()=>w});var T=b(1679),v=b(8096),L=b(6708),y=b(6041),W=b(1589),O=b(310),m="getPlugin",w=function(){function B(){var H=this,A,$,N,J,q;X(),(0,T.Z)(B,H,function(Z){Z[v.VL]=function(M,Y,x,se){G(M,Y,se),A=!0},Z[v.fi]=function(M,Y){var x,se=Z[y.oV];if(!se||M&&se!==M[y.oV]())return;var z,de=!1,Ae=M||(0,W.Bt)(null,se,N&&N[m]?N[m]():N),Oe=Y||(x={reason:0},x[v.d]=!1,x);function ie(){if(!de){de=!0,J.run(Ae,Y);var we=q;q=[],(0,L.tO)(we,function(R){R.rm()}),z===!0&&Ae[v.uL](Oe),X()}}return o(ie,"_unloadCallback"),!Z[v.F3]||Z[v.F3](Ae,Oe,ie)!==!0?ie():z=!0,z},Z[v.Tu]=function(M,Y){var x=Z[y.oV];if(!x||M&&x!==M[y.oV]())return;var se,z=!1,de=M||(0,W.xy)(null,x,N&&N[m]?N[m]():N),Ae=Y||{reason:0};function Oe(){z||(z=!0,G(de.getCfg(),de.core(),de[v.W2]()))}return o(Oe,"_updateCallback"),!Z._doUpdate||Z._doUpdate(de,Ae,Oe)!==!0?Oe():se=!0,se},Z._addHook=function(M){M&&((0,L.kJ)(M)?q=q.concat(M):q[v.MW](M))},(0,L.Oi)(Z,"_addUnloadCb",function(){return J},"add")}),H[v.mc]=function(Z){return Ee(Z)[v.mc]()},H[v.yl]=function(){return A},H.setInitialized=function(Z){A=Z},H[v.Jd]=function(Z){N=Z},H[v.uL]=function(Z,M){M?M[v.uL](Z):N&&(0,L.mf)(N[y.hL])&&N[y.hL](Z,null)},H._getTelCtx=Ee;function Ee(Z){Z===void 0&&(Z=null);var M=Z;if(!M){var Y=$||(0,W.CD)(null,{},H[y.oV]);N&&N[m]?M=Y[v.zV](null,N[m]):M=Y[v.zV](null,N)}return M}o(Ee,"_getTelCtx");function G(Z,M,Y){Z&&(0,L.sO)(Z,y.Zh,[],null,L.le),!Y&&M&&(Y=M[v.SD]()[v.W2]());var x=N;N&&N[m]&&(x=N[m]()),H[y.oV]=M,$=(0,W.CD)(Y,Z,M,x)}o(G,"_setDefaults");function X(){A=!1,H[y.oV]=null,$=null,N=null,q=[],J=(0,O.Y)()}o(X,"_initDefaults")}return o(B,"BaseTelemetryPlugin"),B.__ieDyn=1,B}()},3242:(ot,l,b)=>{"use strict";b.d(l,{kj:()=>M,JP:()=>de,Nz:()=>Ae,p7:()=>Oe,UY:()=>ge});var T=b(8096),v=b(5018),L=b(7630),y=b(6708),W=b(6041),O="toGMTString",m="toUTCString",w="cookie",B="expires",H="enabled",A="isCookieUseDisabled",$="disableCookiesUsage",N="_ckMgr",J=null,q=null,Ee=null,G=(0,L.Me)(),X={},Z={};function M(K,oe){var Re=Ae[N]||Z[N];return Re||(Re=Ae[N]=Ae(K,oe),Z[N]=Re),Re}o(M,"_gblCookieMgr");function Y(K){return K?K.isEnabled():!0}o(Y,"_isMgrEnabled");function x(K){var oe=K[T.Lk]=K[T.Lk]||{};if((0,y.sO)(oe,"domain",K.cookieDomain,y.BX,y.le),(0,y.sO)(oe,"path",K.cookiePath||"/",null,y.le),(0,y.le)(oe[H])){var Re=void 0;(0,y.o8)(K[A])||(Re=!K[A]),(0,y.o8)(K[$])||(Re=!K[$]),oe[H]=Re}return oe}o(x,"_createCookieMgrConfig");function se(K,oe){return oe&&K&&(0,y.kJ)(K.ignoreCookies)?K.ignoreCookies[T.ou](oe)!==-1:!1}o(se,"_isIgnoredCookie");function z(K,oe){return oe&&K&&(0,y.kJ)(K.blockedCookies)&&K.blockedCookies[T.ou](oe)!==-1?!0:se(K,oe)}o(z,"_isBlockedCookie");function de(K,oe){var Re;if(K)Re=K.getCookieMgr();else if(oe){var $e=oe[T.Lk];$e[N]?Re=$e[N]:Re=Ae(oe)}return Re||(Re=M(oe,(K||{})[T.eZ])),Re}o(de,"safeGetCookieMgr");function Ae(K,oe){var Re,$e=x(K||Z),re=$e.path||"/",et=$e.domain,ut=$e[H]!==!1,wt=(Re={isEnabled:function(){var k=ut&&Oe(oe),U=Z[N];return k&&U&&wt!==U&&(k=Y(U)),k}},Re[T.$h]=function(k){ut=k!==!1},Re.set=function(k,U,te,ue,Be){var Ie=!1;if(Y(wt)&&!z($e,k)){var le={},_e=(0,y.nd)(U||W.qS),Te=_e[T.ou](";");if(Te!==-1&&(_e=(0,y.nd)(U[T.zc](0,Te)),le=ie(U[T.zc](Te+1))),(0,y.sO)(le,"domain",ue||et,y.fQ,y.o8),!(0,y.le)(te)){var Ye=(0,L.w1)();if((0,y.o8)(le[B])){var Se=(0,y.m6)(),xe=Se+te*1e3;if(xe>0){var dt=new Date;dt.setTime(xe),(0,y.sO)(le,B,we(dt,Ye?O:m)||we(dt,Ye?O:m)||W.qS,y.fQ)}}Ye||(0,y.sO)(le,"max-age",W.qS+te,null,y.o8)}var nt=(0,L.k$)();nt&&nt.protocol==="https:"&&((0,y.sO)(le,"secure",null,null,y.o8),q===null&&(q=!ge(((0,L.jW)()||{})[T.qV])),q&&(0,y.sO)(le,"SameSite","None",null,y.o8)),(0,y.sO)(le,"path",Be||re,null,y.o8);var Ce=$e.setCookie||me;Ce(k,R(_e,le)),Ie=!0}return Ie},Re.get=function(k){var U=W.qS;return Y(wt)&&!se($e,k)&&(U=($e.getCookie||Ve)(k)),U},Re.del=function(k,U){var te=!1;return Y(wt)&&(te=wt.purge(k,U)),te},Re.purge=function(k,U){var te,ue=!1;if(Oe(oe)){var Be=(te={},te.path=U||"/",te[B]="Thu, 01 Jan 1970 00:00:01 GMT",te);(0,L.w1)()||(Be["max-age"]="0");var Ie=$e.delCookie||me;Ie(k,R(W.qS,Be)),ue=!0}return ue},Re);return wt[N]=wt,wt}o(Ae,"createCookieMgr");function Oe(K){if(J===null){J=!1;try{var oe=G||{};J=oe[w]!==void 0}catch(Re){(0,v.kP)(K,2,68,"Cannot access document.cookie - "+(0,y.jj)(Re),{exception:(0,L.eU)(Re)})}}return J}o(Oe,"areCookiesSupported");function ie(K){var oe={};if(K&&K[T.R5]){var Re=(0,y.nd)(K)[T.w6](";");(0,y.tO)(Re,function($e){if($e=(0,y.nd)($e||W.qS),$e){var re=$e[T.ou]("=");re===-1?oe[$e]=null:oe[(0,y.nd)($e[T.zc](0,re))]=(0,y.nd)($e[T.zc](re+1))}})}return oe}o(ie,"_extractParts");function we(K,oe){return(0,y.mf)(K[oe])?K[oe]():null}o(we,"_formatDate");function R(K,oe){var Re=K||W.qS;return(0,y.rW)(oe,function($e,re){Re+="; "+$e+((0,y.le)(re)?W.qS:"="+re)}),Re}o(R,"_formatCookieValue");function Ve(K){var oe=W.qS;if(G){var Re=G[w]||W.qS;Ee!==Re&&(X=ie(Re),Ee=Re),oe=(0,y.nd)(X[K]||W.qS)}return oe}o(Ve,"_getCookieValue");function me(K,oe){G&&(G[w]=K+"="+oe)}o(me,"_setCookieValue");function ge(K){return(0,y.HD)(K)?!!((0,y._Q)(K,"CPU iPhone OS 12")||(0,y._Q)(K,"iPad; CPU OS 12")||(0,y._Q)(K,"Macintosh; Intel Mac OS X 10_14")&&(0,y._Q)(K,"Version/")&&(0,y._Q)(K,"Safari")||(0,y._Q)(K,"Macintosh; Intel Mac OS X 10_14")&&(0,y.Id)(K,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,y._Q)(K,"Chrome/5")||(0,y._Q)(K,"Chrome/6")||(0,y._Q)(K,"UnrealEngine")&&!(0,y._Q)(K,"Chrome")||(0,y._Q)(K,"UCBrowser/12")||(0,y._Q)(K,"UCBrowser/11")):!1}o(ge,"uaDisallowsSameSiteNone")},5843:(ot,l,b)=>{"use strict";b.d(l,{GW:()=>$,Jj:()=>N,DO:()=>q,Tr:()=>Ee,zB:()=>X,oF:()=>M,vn:()=>Y,ej:()=>x,d8:()=>se,kT:()=>z});var T=b(2091),v=b(8096),L=b(3242),y=b(7630),W=b(4869),O=b(6708),m=b(6041),w=b(4878),B=null,H,A=null;function $(){var de=q();return de[v.zc](0,8)+"-"+de[v.zc](8,12)+"-"+de[v.zc](12,16)+"-"+de[v.zc](16,20)+"-"+de[v.zc](20)}o($,"newGuid");function N(){var de=(0,y.r)();return de&&de.now?de.now():(0,O.m6)()}o(N,"perfNow");function J(de,Ae){if(de&&Ae){var Oe=de[_DYN_LENGTH],ie=Oe-Ae[_DYN_LENGTH];return de[_DYN_SUBSTRING](ie>=0?ie:0,Oe)===Ae}return!1}o(J,"strEndsWith");function q(){for(var de=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],Ae=m.qS,Oe,ie=0;ie<4;ie++)Oe=(0,w._l)(),Ae+=de[Oe&15]+de[Oe>>4&15]+de[Oe>>8&15]+de[Oe>>12&15]+de[Oe>>16&15]+de[Oe>>20&15]+de[Oe>>24&15]+de[Oe>>28&15];var we=de[8+((0,w._l)()&3)|0];return Ae[v.Jn](0,8)+Ae[v.Jn](9,4)+"4"+Ae[v.Jn](13,3)+we+Ae[v.Jn](16,3)+Ae[v.Jn](19,12)}o(q,"generateW3CId");var Ee={_canUseCookies:void 0,isTypeof:O.Ym,isUndefined:O.o8,isNullOrUndefined:O.le,hasOwnProperty:O.nr,isFunction:O.mf,isObject:O.Kn,isDate:O.J_,isArray:O.kJ,isError:O.VZ,isString:O.HD,isNumber:O.hj,isBoolean:O.jn,toISOString:O.Y6,arrForEach:O.tO,arrIndexOf:O.UA,arrMap:O.Mr,arrReduce:O.Xz,strTrim:O.nd,objCreate:T.pu,objKeys:O.FY,objDefineAccessors:O.l_,addEventHandler:W.Ib,dateNow:O.m6,isIE:y.w1,disableCookies:M,newGuid:$,perfNow:N,newId:w.pZ,randomValue:w.az,random32:w._l,mwcRandomSeed:w.CN,mwcRandom32:w.F6,generateW3CId:q},G=/[xy]/g,X={Attach:W.pZ,AttachEvent:W.pZ,Detach:W.pD,DetachEvent:W.pD};function Z(de,Ae){var Oe=(0,L.kj)(de,Ae),ie=Ee._canUseCookies;return B===null&&(B=[],H=ie,(0,O.l_)(Ee,"_canUseCookies",function(){return H},function(we){H=we,(0,O.tO)(B,function(R){R[v.$h](we)})})),(0,O.UA)(B,Oe)===-1&&B[v.MW](Oe),(0,O.jn)(ie)&&Oe[v.$h](ie),(0,O.jn)(H)&&Oe[v.$h](H),Oe}o(Z,"_legacyCookieMgr");function M(){Z()[v.$h](!1)}o(M,"disableCookies");function Y(de){return Z(null,de).isEnabled()}o(Y,"canUseCookies");function x(de,Ae){return Z(null,de).get(Ae)}o(x,"getCookie");function se(de,Ae,Oe,ie){Z(null,de).set(Ae,Oe,null,ie)}o(se,"setCookie");function z(de,Ae){return Z(null,de).del(Ae)}o(z,"deleteCookie")},5883:(ot,l,b)=>{"use strict";b.d(l,{J:()=>N,K:()=>J});var T=b(4392),v=b(8096),L=b(6708),y=b(6041),W=b(4878),O=T.RJ,m="2.8.12",w="."+(0,W.pZ)(6),B=0;function H(q,Ee,G){if(O)try{return O(q,Ee,{value:G,enumerable:!1,configurable:!0}),!0}catch(X){}return!1}o(H,"_createAccessor");function A(q){return q[v.xv]===1||q[v.xv]===9||!+q[v.xv]}o(A,"_canAcceptData");function $(q,Ee){var G=Ee[q.id];if(!G){G={};try{A(Ee)&&(H(Ee,q.id,G)||(Ee[q.id]=G))}catch(X){}}return G}o($,"_getCache");function N(q,Ee){return Ee===void 0&&(Ee=!1),(0,L.Gf)(q+B+++(Ee?"."+m:y.qS)+w)}o(N,"createUniqueNamespace");function J(q){var Ee={id:N("_aiData-"+(q||y.qS)+"."+m),accept:function(G){return A(G)},get:function(G,X,Z,M){var Y=G[Ee.id];return Y?Y[(0,L.Gf)(X)]:(M&&(Y=$(Ee,G),Y[(0,L.Gf)(X)]=Z),Z)},kill:function(G,X){if(G&&G[X])try{delete G[X]}catch(Z){}}};return Ee}o(J,"createElmNodeData")},7158:(ot,l,b)=>{"use strict";b.d(l,{j:()=>w,p:()=>B});var T=b(8096),v=b(7630),L=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],y=null,W;function O(H,A){return function(){var $=arguments,N=w(A);if(N){var J=N.listener;J&&J[H]&&J[H][T.ZV](J,$)}}}o(O,"_listenerProxyFunc");function m(){var H=(0,v.a8)("Microsoft");return H&&(y=H.ApplicationInsights),y}o(m,"_getExtensionNamespace");function w(H){var A=y;return!A&&H.disableDbgExt!==!0&&(A=y||m()),A?A.ChromeDbgExt:null}o(w,"getDebugExt");function B(H){if(!W){W={};for(var A=0;A<L[T.R5];A++)W[L[A]]=O(L[A],H)}return W}o(B,"getDebugListener")},5018:(ot,l,b)=>{"use strict";b.d(l,{lQ:()=>$,vH:()=>N,AQ:()=>J,kP:()=>Ee,jV:()=>G,L4:()=>X});var T=b(1679),v=b(8096),L=b(7158),y=b(7630),W=b(6708),O=b(6041),m="AI (Internal): ",w="AI: ",B="AITR_";function H(Z){return Z?'"'+Z[v.i7](/\"/g,O.qS)+'"':O.qS}o(H,"_sanitizeDiagnosticText");function A(Z,M){var Y=(0,y.dr)();if(Y){var x="log";Y[Z]&&(x=Z),(0,W.mf)(Y[x])&&Y[x](M)}}o(A,"_logToConsole");var $=function(){function Z(M,Y,x,se){x===void 0&&(x=!1);var z=this;z[v.Gc]=M,z[v.gU]=(x?w:m)+M;var de=O.qS;(0,y.nS)()&&(de=(0,y.xA)().stringify(se));var Ae=(Y?" message:"+H(Y):O.qS)+(se?" props:"+H(de):O.qS);z[v.gU]+=Ae}return o(Z,"_InternalLogMessage"),Z.dataType="MessageData",Z}();function N(Z,M){return(Z||{})[v.eZ]||new J(M)}o(N,"safeGetLogger");var J=function(){function Z(M){this.identifier="DiagnosticLogger",this.queue=[];var Y=0,x={},se,z,de,Ae;(0,T.Z)(Z,this,function(Oe){we(M||{}),Oe.consoleLoggingLevel=function(){return se},Oe.telemetryLoggingLevel=function(){return z},Oe.maxInternalMessageLimit=function(){return de},Oe[v.Fr]=function(){return Ae},Oe.throwInternal=function(me,ge,K,oe,Re){Re===void 0&&(Re=!1);var $e=new $(ge,K,Re,oe);if(Ae)throw(0,y.eU)($e);var re=me===1?O.ys:O.cL;if((0,W.o8)($e[v.gU]))Ve("throw"+(me===1?"Critical":"Warning"),$e);else{if(Re){var et=+$e[v.Gc];!x[et]&&se>=me&&(Oe[re]($e[v.gU]),x[et]=!0)}else se>=me&&Oe[re]($e[v.gU]);ie(me,$e)}},Oe[O.cL]=function(me){A("warn",me),Ve("warning",me)},Oe[O.ys]=function(me){A("error",me),Ve("error",me)},Oe.resetInternalMessageCount=function(){Y=0,x={}},Oe[v.jk]=ie;function ie(me,ge){if(!R()){var K=!0,oe=B+ge[v.Gc];if(x[oe]?K=!1:x[oe]=!0,K&&(me<=z&&(Oe.queue[v.MW](ge),Y++,Ve(me===1?"error":"warn",ge)),Y===de)){var Re="Internal events throttle limit per PageView reached for this app.",$e=new $(23,Re,!1);Oe.queue[v.MW]($e),me===1?Oe[O.ys](Re):Oe[O.cL](Re)}}}o(ie,"_logInternalMessage");function we(me){se=(0,W.v4)(me.loggingLevelConsole,0),z=(0,W.v4)(me.loggingLevelTelemetry,1),de=(0,W.v4)(me.maxMessageLimit,25),Ae=(0,W.v4)(me.enableDebug,(0,W.v4)(me[v.Fr],!1))}o(we,"_setDefaultsFromConfig");function R(){return Y>=de}o(R,"_areInternalMessagesThrottled");function Ve(me,ge){var K=(0,L.j)(M||{});K&&K[v.mc]&&K[v.mc](me,ge)}o(Ve,"_debugExtMsg")})}return o(Z,"DiagnosticLogger"),Z.__ieDyn=1,Z}();function q(Z){return Z||new J}o(q,"_getLogger");function Ee(Z,M,Y,x,se,z){z===void 0&&(z=!1),q(Z).throwInternal(M,Y,x,se,z)}o(Ee,"_throwInternal");function G(Z,M){q(Z)[O.cL](M)}o(G,"_warnToConsole");function X(Z,M,Y){q(Z)[v.jk](M,Y)}o(X,"_logInternalMessage")},7630:(ot,l,b)=>{"use strict";b.d(l,{dI:()=>Oe,a8:()=>ie,Ym:()=>we,Jj:()=>R,Nv:()=>Ve,Me:()=>me,d6:()=>ge,jW:()=>K,fE:()=>oe,s1:()=>Re,k$:()=>$e,dr:()=>re,r:()=>et,nS:()=>ut,xA:()=>wt,MX:()=>k,gz:()=>U,b$:()=>te,w1:()=>ue,sA:()=>Be,eU:()=>Ie,MF:()=>_e,JO:()=>Te,cp:()=>Ye,Z3:()=>Se,ed:()=>dt,pI:()=>nt});var T=b(4392),v=b(2091),L=b(8096),y=b(6708),W=b(6041),O="window",m="document",w="documentMode",B="navigator",H="history",A="location",$="console",N="performance",J="JSON",q="crypto",Ee="msCrypto",G="ReactNative",X="msie",Z="trident/",M="XMLHttpRequest",Y=null,x=null,se=!1,z=null,de=null;function Ae(Ce,S){var ye=!1;if(Ce){try{if(ye=S in Ce,!ye){var Xe=Ce[T.hB];Xe&&(ye=S in Xe)}}catch(Nn){}if(!ye)try{var Kt=new Ce;ye=!(0,y.o8)(Kt[S])}catch(Nn){}}return ye}o(Ae,"_hasProperty");function Oe(Ce){se=Ce}o(Oe,"setEnableEnvMocks");function ie(Ce){var S=(0,v.Rd)();return S&&S[Ce]?S[Ce]:Ce===O&&we()?window:null}o(ie,"getGlobalInst");function we(){return Boolean(typeof window===T.fK&&window)}o(we,"hasWindow");function R(){return we()?window:ie(O)}o(R,"getWindow");function Ve(){return Boolean(typeof document===T.fK&&document)}o(Ve,"hasDocument");function me(){return Ve()?document:ie(m)}o(me,"getDocument");function ge(){return Boolean(typeof navigator===T.fK&&navigator)}o(ge,"hasNavigator");function K(){return ge()?navigator:ie(B)}o(K,"getNavigator");function oe(){return Boolean(typeof history===T.fK&&history)}o(oe,"hasHistory");function Re(){return oe()?history:ie(H)}o(Re,"getHistory");function $e(Ce){if(Ce&&se){var S=ie("__mockLocation");if(S)return S}return typeof location===T.fK&&location?location:ie(A)}o($e,"getLocation");function re(){return typeof console!==T.jA?console:ie($)}o(re,"getConsole");function et(){return ie(N)}o(et,"getPerformance");function ut(){return Boolean(typeof JSON===T.fK&&JSON||ie(J)!==null)}o(ut,"hasJSON");function wt(){return ut()?JSON||ie(J):null}o(wt,"getJSON");function k(){return ie(q)}o(k,"getCrypto");function U(){return ie(Ee)}o(U,"getMsCrypto");function te(){var Ce=K();return Ce&&Ce.product?Ce.product===G:!1}o(te,"isReactNative");function ue(){var Ce=K();if(Ce&&(Ce[L.qV]!==x||Y===null)){x=Ce[L.qV];var S=(x||W.qS)[L.T1]();Y=(0,y._Q)(S,X)||(0,y._Q)(S,Z)}return Y}o(ue,"isIE");function Be(Ce){if(Ce===void 0&&(Ce=null),!Ce){var S=K()||{};Ce=S?(S[L.qV]||W.qS)[L.T1]():W.qS}var ye=(Ce||W.qS)[L.T1]();if((0,y._Q)(ye,X)){var Xe=me()||{};return Math.max(parseInt(ye[L.w6](X)[1]),Xe[w]||0)}else if((0,y._Q)(ye,Z)){var Kt=parseInt(ye[L.w6](Z)[1]);if(Kt)return Kt+4}return null}o(Be,"getIEVersion");function Ie(Ce){var S=Object[T.hB].toString[L._S](Ce),ye=W.qS;return S==="[object Error]"?ye="{ stack: '"+Ce.stack+"', message: '"+Ce.message+"', name: '"+Ce[L.I]+"'":ut()&&(ye=wt().stringify(Ce)),S+ye}o(Ie,"dumpObj");function le(Ce){if(!Ce||!isString(Ce)){var S=K()||{};Ce=S?(S[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var ye=(Ce||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return ye[_DYN_INDEX_OF]("safari")>=0}o(le,"isSafari");function _e(){return de===null&&(de=ge()&&Boolean(K().sendBeacon)),de}o(_e,"isBeaconsSupported");function Te(Ce){var S=!1;try{S=!!ie("fetch");var ye=ie("Request");S&&Ce&&ye&&(S=Ae(ye,"keepalive"))}catch(Xe){}return S}o(Te,"isFetchSupported");function Ye(){return z===null&&(z=typeof XDomainRequest!==T.jA,z&&Se()&&(z=z&&!Ae(ie(M),"withCredentials"))),z}o(Ye,"useXDomainRequest");function Se(){var Ce=!1;try{var S=ie(M);Ce=!!S}catch(ye){}return Ce}o(Se,"isXhrSupported");function xe(Ce,S){if(Ce)for(var ye=0;ye<Ce[L.R5];ye++){var Xe=Ce[ye];if(Xe[L.I]&&Xe[L.I]===S)return Xe}return{}}o(xe,"_getNamedValue");function dt(Ce){var S=me();return S&&Ce?xe(S.querySelectorAll("meta"),Ce).content:null}o(dt,"findMetaTag");function nt(Ce){var S,ye=et();if(ye){var Xe=ye.getEntriesByType("navigation")||[];S=xe((Xe[L.R5]>0?Xe[0]:{}).serverTiming,Ce).description}return S}o(nt,"findNamedServerTiming")},4869:(ot,l,b)=>{"use strict";b.d(l,{um:()=>Ae,jU:()=>me,XO:()=>ge,QY:()=>K,pZ:()=>oe,pD:()=>Re,Ib:()=>$e,C1:()=>re,yw:()=>ut,nJ:()=>wt,c9:()=>k,JA:()=>U,TJ:()=>te,C9:()=>ue,nD:()=>Be,Yl:()=>Ie});var T=b(8096),v=b(5883),L=b(7630),y=b(6708),W=b(6041),O="on",m="attachEvent",w="addEventListener",B="detachEvent",H="removeEventListener",A="events",$="visibilitychange",N="pagehide",J="pageshow",q="unload",Ee="beforeunload",G=(0,v.J)("aiEvtPageHide"),X=(0,v.J)("aiEvtPageShow"),Z=/\.[\.]+/g,M=/[\.]+$/,Y=1,x=(0,v.K)("events"),se=/^([^.]*)(?:\.(.+)|)/;function z(le){return le&&le[T.i7]?le[T.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,W.qS):le}o(z,"_normalizeNamespace");function de(le,_e){var Te;if(_e){var Ye=W.qS;(0,y.kJ)(_e)?(Ye=W.qS,(0,y.tO)(_e,function(xe){xe=z(xe),xe&&(xe[0]!=="."&&(xe="."+xe),Ye+=xe)})):Ye=z(_e),Ye&&(Ye[0]!=="."&&(Ye="."+Ye),le=(le||W.qS)+Ye)}var Se=se.exec(le||W.qS)||[];return Te={},Te[T.P6]=Se[1],Te.ns=(Se[2]||W.qS).replace(Z,".").replace(M,W.qS)[T.w6](".").sort().join("."),Te}o(de,"_getEvtNamespace");function Ae(le,_e,Te){var Ye=[],Se=x.get(le,A,{},!1),xe=de(_e,Te);return(0,y.rW)(Se,function(dt,nt){(0,y.tO)(nt,function(Ce){var S;(!xe[T.P6]||xe[T.P6]===Ce.evtName[T.P6])&&(!xe.ns||xe.ns===xe.ns)&&Ye[T.MW]((S={},S[T.I]=Ce.evtName[T.P6]+(Ce.evtName.ns?"."+Ce.evtName.ns:W.qS),S.handler=Ce[T.Kn],S))})}),Ye}o(Ae,"__getRegisteredEvents");function Oe(le,_e,Te){Te===void 0&&(Te=!0);var Ye=x.get(le,A,{},Te),Se=Ye[_e];return Se||(Se=Ye[_e]=[]),Se}o(Oe,"_getRegisteredEvents");function ie(le,_e,Te,Ye){le&&_e&&_e[T.P6]&&(le[H]?le[H](_e[T.P6],Te,Ye):le[B]&&le[B](O+_e[T.P6],Te))}o(ie,"_doDetach");function we(le,_e,Te,Ye){var Se=!1;return le&&_e&&_e[T.P6]&&Te&&(le[w]?(le[w](_e[T.P6],Te,Ye),Se=!0):le[m]&&(le[m](O+_e[T.P6],Te),Se=!0)),Se}o(we,"_doAttach");function R(le,_e,Te,Ye){for(var Se=_e[T.R5];Se--;){var xe=_e[Se];xe&&(!Te.ns||Te.ns===xe.evtName.ns)&&(!Ye||Ye(xe))&&(ie(le,xe.evtName,xe[T.Kn],xe.capture),_e[T.cb](Se,1))}}o(R,"_doUnregister");function Ve(le,_e,Te){if(_e[T.P6])R(le,Oe(le,_e[T.P6]),_e,Te);else{var Ye=x.get(le,A,{});(0,y.rW)(Ye,function(Se,xe){R(le,xe,_e,Te)}),(0,y.FY)(Ye)[T.R5]===0&&x.kill(le,A)}}o(Ve,"_unregisterEvents");function me(le,_e){var Te;return _e?((0,y.kJ)(_e)?Te=[le].concat(_e):Te=[le,_e],Te=de("xx",Te).ns[T.w6](".")):Te=le,Te}o(me,"mergeEvtNamespace");function ge(le,_e,Te,Ye,Se){var xe;Se===void 0&&(Se=!1);var dt=!1;if(le)try{var nt=de(_e,Ye);if(dt=we(le,nt,Te,Se),dt&&x.accept(le)){var Ce=(xe={guid:Y++,evtName:nt},xe[T.Kn]=Te,xe.capture=Se,xe);Oe(le,nt.type)[T.MW](Ce)}}catch(S){}return dt}o(ge,"eventOn");function K(le,_e,Te,Ye,Se){if(Se===void 0&&(Se=!1),le)try{var xe=de(_e,Ye),dt=!1;Ve(le,xe,function(nt){return xe.ns&&!Te||nt[T.Kn]===Te?(dt=!0,!0):!1}),dt||ie(le,xe,Te,Se)}catch(nt){}}o(K,"eventOff");function oe(le,_e,Te,Ye){return Ye===void 0&&(Ye=!1),ge(le,_e,Te,null,Ye)}o(oe,"attachEvent");function Re(le,_e,Te,Ye){Ye===void 0&&(Ye=!1),K(le,_e,Te,null,Ye)}o(Re,"detachEvent");function $e(le,_e,Te){var Ye=!1,Se=(0,L.Jj)();Se&&(Ye=ge(Se,le,_e,Te),Ye=ge(Se.body,le,_e,Te)||Ye);var xe=(0,L.Me)();return xe&&(Ye=ge(xe,le,_e,Te)||Ye),Ye}o($e,"addEventHandler");function re(le,_e,Te){var Ye=(0,L.Jj)();Ye&&(K(Ye,le,_e,Te),K(Ye.body,le,_e,Te));var Se=(0,L.Me)();Se&&K(Se,le,_e,Te)}o(re,"removeEventHandler");function et(le,_e,Te,Ye){var Se=!1;return _e&&le&&le[T.R5]>0&&(0,y.tO)(le,function(xe){xe&&(!Te||(0,y.UA)(Te,xe)===-1)&&(Se=$e(xe,_e,Ye)||Se)}),Se}o(et,"_addEventListeners");function ut(le,_e,Te,Ye){var Se=!1;return _e&&le&&(0,y.kJ)(le)&&(Se=et(le,_e,Te,Ye),!Se&&Te&&Te[T.R5]>0&&(Se=et(le,_e,null,Ye))),Se}o(ut,"addEventListeners");function wt(le,_e,Te){le&&(0,y.kJ)(le)&&(0,y.tO)(le,function(Ye){Ye&&re(Ye,_e,Te)})}o(wt,"removeEventListeners");function k(le,_e,Te){return ut([Ee,q,N],le,_e,Te)}o(k,"addPageUnloadEventListener");function U(le,_e){wt([Ee,q,N],le,_e)}o(U,"removePageUnloadEventListener");function te(le,_e,Te){function Ye(dt){var nt=(0,L.Me)();le&&nt&&nt.visibilityState==="hidden"&&le(dt)}o(Ye,"_handlePageVisibility");var Se=me(G,Te),xe=et([N],le,_e,Se);return(!_e||(0,y.UA)(_e,$)===-1)&&(xe=et([$],Ye,_e,Se)||xe),!xe&&_e&&(xe=te(le,null,Te)),xe}o(te,"addPageHideEventListener");function ue(le,_e){var Te=me(G,_e);wt([N],le,Te),wt([$],null,Te)}o(ue,"removePageHideEventListener");function Be(le,_e,Te){function Ye(dt){var nt=(0,L.Me)();le&&nt&&nt.visibilityState==="visible"&&le(dt)}o(Ye,"_handlePageVisibility");var Se=me(X,Te),xe=et([J],le,_e,Se);return xe=et([$],Ye,_e,Se)||xe,!xe&&_e&&(xe=Be(le,null,Te)),xe}o(Be,"addPageShowEventListener");function Ie(le,_e){var Te=me(X,_e);wt([J],le,Te),wt([$],null,Te)}o(Ie,"removePageShowEventListener")},6708:(ot,l,b)=>{"use strict";b.d(l,{Ym:()=>oe,o8:()=>Re,le:()=>re,BX:()=>et,nr:()=>ut,Kn:()=>wt,mf:()=>k,Gf:()=>te,rW:()=>ue,Id:()=>Be,xe:()=>le,_Q:()=>Te,J_:()=>Ye,kJ:()=>Se,VZ:()=>dt,HD:()=>nt,hj:()=>Ce,jn:()=>S,Y6:()=>Kt,tO:()=>Rn,UA:()=>_n,Mr:()=>dr,Xz:()=>ir,nd:()=>pr,FY:()=>vt,l_:()=>zt,_A:()=>Yt,FL:()=>on,Xi:()=>Mn,m6:()=>Kn,jj:()=>Gn,sO:()=>hr,qK:()=>Pr,v4:()=>Wr,F:()=>Qn,fQ:()=>$r,_y:()=>Br,cf:()=>Zn,Oi:()=>Cr,Vb:()=>gr,hl:()=>oi,Ax:()=>gi,mm:()=>yr});var T=b(4392),v=b(2091),L=b(8096),y=b(6041),W="toISOString",O="endsWith",m="startsWith",w="indexOf",B="map",H="reduce",A="trim",$="toString",N="__proto__",J="constructor",q=T.RJ,Ee=T.Pw.freeze,G=T.Pw.seal,X=T.Pw.keys,Z=String[T.hB],M=Z[A],Y=Z[O],x=Z[m],se=Date[T.hB],z=se[W],de=Array.isArray,Ae=T.V4[$],Oe=T.CY[$],ie=Oe[L._S](T.Pw),we=/-([a-z])/g,R=/([^\w\d_$])/g,Ve=/^(\d+[\w\d_$])/,me=Object.getPrototypeOf;function ge(P){if(P){if(me)return me(P);var ce=P[N]||P[T.hB]||P[J];if(ce)return ce}return null}o(ge,"_getObjProto");function K(P){return Ae[_DYN_CALL](P)}o(K,"objToString");function oe(P,ce){return typeof P===ce}o(oe,"isTypeof");function Re(P){return P===void 0||typeof P===T.jA}o(Re,"isUndefined");function $e(P){return!Re(P)}o($e,"isNotUndefined");function re(P){return P===null||Re(P)}o(re,"isNullOrUndefined");function et(P){return!re(P)}o(et,"isNotNullOrUndefined");function ut(P,ce){return!!(P&&T.CY[L._S](P,ce))}o(ut,"hasOwnProperty");function wt(P){return!!(P&&typeof P===T.fK)}o(wt,"isObject");function k(P){return!!(P&&typeof P===T.cb)}o(k,"isFunction");function U(P){return P&&k(P.then)}o(U,"isPromiseLike");function te(P){var ce=P;return ce&&nt(ce)&&(ce=ce[L.i7](we,function(be,Fe){return Fe.toUpperCase()}),ce=ce[L.i7](R,"_"),ce=ce[L.i7](Ve,function(be,Fe){return"_"+Fe})),ce}o(te,"normalizeJsName");function ue(P,ce){if(P)for(var be in P)T.CY[L._S](P,be)&&ce[L._S](P,be,P[be])}o(ue,"objForEachKey");function Be(P,ce){var be=!1;return P&&ce&&!(be=P===ce)&&(be=Y?P[O](ce):Ie(P,ce)),be}o(Be,"strEndsWith");function Ie(P,ce){var be=!1,Fe=ce?ce[L.R5]:0,Ze=P?P[L.R5]:0;if(Fe&&Ze&&Ze>=Fe&&!(be=P===ce)){for(var Qe=Ze-1,ht=Fe-1;ht>=0;ht--){if(P[Qe]!=ce[ht])return!1;Qe--}be=!0}return be}o(Ie,"_strEndsWithPoly");function le(P,ce){var be=!1;return P&&ce&&!(be=P===ce)&&(be=x?P[m](ce):_e(P,ce)),be}o(le,"strStartsWith");function _e(P,ce){var be=!1,Fe=ce?ce[L.R5]:0;if(P&&Fe&&P[L.R5]>=Fe&&!(be=P===ce)){for(var Ze=0;Ze<Fe;Ze++)if(P[Ze]!==ce[Ze])return!1;be=!0}return be}o(_e,"_strStartsWithPoly");function Te(P,ce){return P&&ce?P[L.ou](ce)!==-1:!1}o(Te,"strContains");function Ye(P){return!!(P&&Ae[L._S](P)==="[object Date]")}o(Ye,"isDate");var Se=de||xe;function xe(P){return!!(P&&Ae[L._S](P)==="[object Array]")}o(xe,"_isArrayPoly");function dt(P){return!!(P&&Ae[L._S](P)==="[object Error]")}o(dt,"isError");function nt(P){return typeof P=="string"}o(nt,"isString");function Ce(P){return typeof P=="number"}o(Ce,"isNumber");function S(P){return typeof P=="boolean"}o(S,"isBoolean");function ye(P){return typeof P=="symbol"}o(ye,"isSymbol");function Xe(P){var ce=!1;if(P&&typeof P=="object"){var be=me?me(P):ge(P);be?(be[J]&&T.CY[L._S](be,J)&&(be=be[J]),ce=typeof be===T.cb&&Oe[L._S](be)===ie):ce=!0}return ce}o(Xe,"isPlainObject");function Kt(P){if(P)return z?P[W]():Nn(P)}o(Kt,"toISOString");function Nn(P){if(P&&P.getUTCFullYear){var ce=o(function(be){var Fe=String(be);return Fe[L.R5]===1&&(Fe="0"+Fe),Fe},"pad");return P.getUTCFullYear()+"-"+ce(P.getUTCMonth()+1)+"-"+ce(P.getUTCDate())+"T"+ce(P.getUTCHours())+":"+ce(P.getUTCMinutes())+":"+ce(P.getUTCSeconds())+"."+String((P.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(Nn,"_toISOStringPoly");function Rn(P,ce,be){var Fe=P[L.R5];try{for(var Ze=0;Ze<Fe&&!(Ze in P&&ce[L._S](be||P,P[Ze],Ze,P)===-1);Ze++);}catch(Qe){}}o(Rn,"arrForEach");function _n(P,ce,be){if(P){if(P[w])return P[w](ce,be);var Fe=P[L.R5],Ze=be||0;try{for(var Qe=Math.max(Ze>=0?Ze:Fe-Math.abs(Ze),0);Qe<Fe;Qe++)if(Qe in P&&P[Qe]===ce)return Qe}catch(ht){}}return-1}o(_n,"arrIndexOf");function dr(P,ce,be){var Fe;if(P){if(P[B])return P[B](ce,be);var Ze=P[L.R5],Qe=be||P;Fe=new Array(Ze);try{for(var ht=0;ht<Ze;ht++)ht in P&&(Fe[ht]=ce[L._S](Qe,P[ht],P))}catch(Dt){}}return Fe}o(dr,"arrMap");function ir(P,ce,be){var Fe;if(P){if(P[H])return P[H](ce,be);var Ze=P[L.R5],Qe=0;if(arguments[L.R5]>=3)Fe=arguments[2];else{for(;Qe<Ze&&!(Qe in P);)Qe++;Fe=P[Qe++]}for(;Qe<Ze;)Qe in P&&(Fe=ce(Fe,P[Qe],Qe,P)),Qe++}return Fe}o(ir,"arrReduce");function pr(P){return P&&(P=M&&P[A]?P[A]():P[L.i7]?P[L.i7](/^\s+|(?=\s)\s+$/g,y.qS):P),P}o(pr,"strTrim");var mr=!{toString:null}.propertyIsEnumerable("toString"),fr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function vt(P){var ce=typeof P;if(ce!==T.cb&&(ce!==T.fK||P===null)&&(0,v.ZU)("objKeys called on non-object"),!mr&&X)return X(P);var be=[];for(var Fe in P)P&&T.CY[L._S](P,Fe)&&be[L.MW](Fe);if(mr)for(var Ze=fr[L.R5],Qe=0;Qe<Ze;Qe++)P&&T.CY[L._S](P,fr[Qe])&&be[L.MW](fr[Qe]);return be}o(vt,"objKeys");function zt(P,ce,be,Fe){if(q)try{var Ze={enumerable:!0,configurable:!0};return be&&(Ze.get=be),Fe&&(Ze.set=Fe),q(P,ce,Ze),!0}catch(Qe){}return!1}o(zt,"objDefineAccessors");function tn(P){return P}o(tn,"_doNothing");function Yt(P){return Ee&&ue(P,function(ce,be){(Se(be)||wt(be))&&Ee(be)}),on(P)}o(Yt,"deepFreeze");var on=Ee||tn,Mn=G||tn;function Kn(){var P=Date;return P.now?P.now():new P().getTime()}o(Kn,"dateNow");function Gn(P){return dt(P)?P[L.I]:y.qS}o(Gn,"getExceptionName");function hr(P,ce,be,Fe,Ze){var Qe=be;return P&&(Qe=P[ce],Qe!==be&&(!Ze||Ze(Qe))&&(!Fe||Fe(be))&&(Qe=be,P[ce]=Qe)),Qe}o(hr,"setValue");function Pr(P,ce,be){var Fe;return P?(Fe=P[ce],!Fe&&re(Fe)&&(Fe=Re(be)?{}:be,P[ce]=Fe)):Fe=Re(be)?{}:be,Fe}o(Pr,"getSetValue");function Wr(P,ce){return re(P)?ce:P}o(Wr,"getCfgValue");function Qn(P){return!P}o(Qn,"isNotTruthy");function $r(P){return!!P}o($r,"isTruthy");function Br(P){throw new Error(P)}o(Br,"throwError");function vn(P,ce){var be=null,Fe=null;return k(P)?be=P:Fe=P,function(){var Ze=arguments;if(be&&(Fe=be()),Fe)return Fe[ce][L.ZV](Fe,Ze)}}o(vn,"_createProxyFunction");function Zn(P,ce,be){if(P&&ce&&wt(P)&&wt(ce)){var Fe=o(function(Qe){if(nt(Qe)){var ht=ce[Qe];k(ht)?(!be||be(Qe,!0,ce,P))&&(P[Qe]=vn(ce,Qe)):(!be||be(Qe,!1,ce,P))&&(ut(P,Qe)&&delete P[Qe],zt(P,Qe,function(){return ce[Qe]},function(Dt){ce[Qe]=Dt})||(P[Qe]=ht))}},"_loop_1");for(var Ze in ce)Fe(Ze)}return P}o(Zn,"proxyAssign");function Cr(P,ce,be,Fe,Ze){P&&ce&&be&&(Ze!==!1||Re(P[ce]))&&(P[ce]=vn(be,Fe))}o(Cr,"proxyFunctionAs");function gr(P,ce,be,Fe){return P&&ce&&wt(P)&&Se(be)&&Rn(be,function(Ze){nt(Ze)&&Cr(P,Ze,ce,Ze,Fe)}),P}o(gr,"proxyFunctions");function oi(P){return function(){function ce(){var be=this;P&&ue(P,function(Fe,Ze){be[Fe]=Ze})}return o(ce,"class_1"),ce}()}o(oi,"createClassFromInterface");function gi(P){return P&&T.rl&&(P=(0,T.Pw)((0,T.rl)({},P))),P}o(gi,"optimizeObject");function yr(P,ce,be,Fe,Ze,Qe){var ht=arguments,Dt=ht[0]||{},ct=ht[L.R5],qt=!1,bt=1;for(ct>0&&S(Dt)&&(qt=Dt,Dt=ht[bt]||{},bt++),wt(Dt)||(Dt={});bt<ct;bt++){var Ot=ht[bt],Ht=Se(Ot),kt=wt(Ot);for(var xt in Ot){var On=Ht&&xt in Ot||kt&&T.CY[L._S](Ot,xt);if(!!On){var En=Ot[xt],lr=void 0;if(qt&&En&&((lr=Se(En))||Xe(En))){var nr=Dt[xt];lr?Se(nr)||(nr=[]):Xe(nr)||(nr={}),En=yr(qt,nr,En)}En!==void 0&&(Dt[xt]=En)}}}return Dt}o(yr,"objExtend")},6041:(ot,l,b)=>{"use strict";b.d(l,{qS:()=>T,Z:()=>v,oV:()=>L,DN:()=>y,mE:()=>W,Zh:()=>O,js:()=>m,hL:()=>w,yi:()=>B,uC:()=>H,$F:()=>A,f_:()=>$,C$:()=>N,ys:()=>J,cL:()=>q,kl:()=>Ee});var T="",v="channels",L="core",y="createPerfMgr",W="disabled",O="extensionConfig",m="extensions",w="processTelemetry",B="priority",H="eventsSent",A="eventsDiscarded",$="eventsSendRequest",N="perfEvent",J="errorToConsole",q="warnToConsole",Ee="getPerfMgr"},1880:(ot,l,b)=>{"use strict";b.d(l,{f:()=>O});var T=b(1679),v=b(8096),L=b(6708),y=b(6041);function W(m,w,B,H){(0,L.tO)(m,function(A){if(A&&A[w])if(B)setTimeout(function(){return H(A)},0);else try{H(A)}catch($){}})}o(W,"_runListeners");var O=function(){function m(w){this.listeners=[];var B=!!(w||{}).perfEvtsSendAll;(0,T.Z)(m,this,function(H){H[v.g]=function(A){H.listeners[v.MW](A)},H[v.n7]=function(A){for(var $=(0,L.UA)(H[v.dE],A);$>-1;)H.listeners[v.cb]($,1),$=(0,L.UA)(H[v.dE],A)},H[y.uC]=function(A){W(H[v.dE],y.uC,!0,function($){$[y.uC](A)})},H[y.$F]=function(A,$){W(H[v.dE],y.$F,!0,function(N){N[y.$F](A,$)})},H[y.f_]=function(A,$){W(H[v.dE],y.f_,$,function(N){N[y.f_](A,$)})},H[y.C$]=function(A){A&&(B||!A[v.PL]())&&W(H[v.dE],y.C$,!1,function($){A[v.d]?setTimeout(function(){return $[y.C$](A)},0):$[y.C$](A)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(ot,l,b)=>{"use strict";b.d(l,{zn:()=>B,Jk:()=>H,Lm:()=>$,j5:()=>J});var T=b(1679),v=b(8096),L=b(6708),y=b(6041),W="ctx",O="ParentContextKey",m="ChildrenContextKey",w=null,B=function(){function q(Ee,G,X){var Z=this,M=!1;if(Z.start=(0,L.m6)(),Z[v.I]=Ee,Z[v.d]=X,Z[v.PL]=function(){return!1},(0,L.mf)(G)){var Y;M=(0,L.l_)(Z,"payload",function(){return!Y&&(0,L.mf)(G)&&(Y=G(),G=null),Y})}Z[v.T]=function(x){return x?x===q[O]||x===q[m]?Z[x]:(Z[W]||{})[x]:null},Z[v.wu]=function(x,se){if(x)if(x===q[O])Z[x]||(Z[v.PL]=function(){return!0}),Z[x]=se;else if(x===q[m])Z[x]=se;else{var z=Z[W]=Z[W]||{};z[x]=se}},Z[v.Km]=function(){var x=0,se=Z[v.T](q[m]);if((0,L.kJ)(se))for(var z=0;z<se[v.R5];z++){var de=se[z];de&&(x+=de[v.Z_])}Z[v.Z_]=(0,L.m6)()-Z.start,Z.exTime=Z[v.Z_]-x,Z[v.Km]=function(){},!M&&(0,L.mf)(G)&&(Z.payload=G())}}return o(q,"PerfEvent"),q.ParentContextKey="parent",q.ChildrenContextKey="childEvts",q}(),H=function(){function q(Ee){this.ctx={},(0,T.Z)(q,this,function(G){G.create=function(X,Z,M){return new B(X,Z,M)},G.fire=function(X){X&&(X[v.Km](),Ee&&(0,L.mf)(Ee[y.C$])&&Ee[y.C$](X))},G[v.wu]=function(X,Z){if(X){var M=G[W]=G[W]||{};M[X]=Z}},G[v.T]=function(X){return(G[W]||{})[X]}})}return o(q,"PerfManager"),q.__ieDyn=1,q}(),A="CoreUtils.doPerf";function $(q,Ee,G,X,Z){if(q){var M=q;if(M[y.kl]&&(M=M[y.kl]()),M){var Y=void 0,x=M[v.T](A);try{if(Y=M.create(Ee(),X,Z),Y){if(x&&Y[v.wu]&&(Y[v.wu](B[O],x),x[v.T]&&x[v.wu])){var se=x[v.T](B[m]);se||(se=[],x[v.wu](B[m],se)),se[v.MW](Y)}return M[v.wu](A,Y),G(Y)}}catch(z){Y&&Y[v.wu]&&Y[v.wu]("exception",z)}finally{Y&&M.fire(Y),M[v.wu](A,x)}}}return G()}o($,"doPerf");function N(q){w=q}o(N,"setGblPerfMgr");function J(){return w}o(J,"getGblPerfMgr")},1589:(ot,l,b)=>{"use strict";b.d(l,{CD:()=>J,Bt:()=>q,xy:()=>Ee,jV:()=>G,Vi:()=>Z});var T=b(8096),v=b(5018),L=b(7630),y=b(6708),W=b(6041),O=b(9288),m=b(3833),w="TelemetryPluginChain",B="_hasRun",H="_getTelCtx",A=0;function $(M,Y,x){for(;M;){if(M[T.TO]()===x)return M;M=M[T.W2]()}return G([x],Y[T.TC]||{},Y)}o($,"_getNextProxyStart");function N(M,Y,x,se){var z=null,de=[];se!==null&&(z=se?$(M,x,se):M);var Ae={_next:ie,ctx:{core:function(){return x},diagLog:function(){return(0,v.vH)(x,Y)},getCfg:function(){return Y},getExtCfg:we,getConfig:R,hasNext:function(){return!!z},getNext:function(){return z},setNext:function(me){z=me},iterate:Ve,onComplete:Oe}};function Oe(me,ge){for(var K=[],oe=2;oe<arguments.length;oe++)K[oe-2]=arguments[oe];me&&de[T.MW]({func:me,self:(0,y.o8)(ge)?Ae.ctx:ge,args:K})}o(Oe,"_addOnComplete");function ie(){var me=z;if(z=me?me[T.W2]():null,!me){var ge=de;ge&&ge[T.R5]>0&&((0,y.tO)(ge,function(K){try{K.func[T._S](K.self,K.args)}catch(oe){(0,v.kP)(x[T.eZ],2,73,"Unexpected Exception during onComplete - "+(0,L.eU)(oe))}}),de=[])}return me}o(ie,"_moveNext");function we(me,ge,K){ge===void 0&&(ge={}),K===void 0&&(K=0);var oe;if(Y){var Re=Y[W.Zh];Re&&me&&(oe=Re[me])}if(!oe)oe=ge;else if((0,y.Kn)(ge)&&K!==0){var $e=(0,y.mm)(!0,ge,oe);Y&&K===2&&(0,y.rW)(ge,function(re){if((0,y.le)($e[re])){var et=Y[re];(0,y.le)(et)||($e[re]=et)}}),oe=$e}return oe}o(we,"_getExtCfg");function R(me,ge,K){K===void 0&&(K=!1);var oe,Re=we(me,null);return Re&&!(0,y.le)(Re[ge])?oe=Re[ge]:Y&&!(0,y.le)(Y[ge])&&(oe=Y[ge]),(0,y.le)(oe)?K:oe}o(R,"_getConfig");function Ve(me){for(var ge;ge=Ae._next();){var K=ge[T.TO]();K&&me(K)}}return o(Ve,"_iterateChain"),Ae}o(N,"_createInternalContext");function J(M,Y,x,se){var z=N(M,Y,x,se),de=z.ctx;function Ae(ie){var we=z._next();return we&&we[W.hL](ie,de),!we}o(Ae,"_processNext");function Oe(ie,we){return ie===void 0&&(ie=null),(0,y.kJ)(ie)&&(ie=G(ie,Y,x,we)),J(ie||de[T.W2](),Y,x,we)}return o(Oe,"_createNew"),de[T.uL]=Ae,de[T.zV]=Oe,de}o(J,"createProcessTelemetryContext");function q(M,Y,x){var se=Y[T.TC]||{},z=N(M,se,Y,x),de=z.ctx;function Ae(ie){var we=z._next();return we&&we.unload(de,ie),!we}o(Ae,"_processNext");function Oe(ie,we){return ie===void 0&&(ie=null),(0,y.kJ)(ie)&&(ie=G(ie,se,Y,we)),q(ie||de[T.W2](),Y,we)}return o(Oe,"_createNew"),de[T.uL]=Ae,de[T.zV]=Oe,de}o(q,"createProcessTelemetryUnloadContext");function Ee(M,Y,x){var se=Y[T.TC]||{},z=N(M,se,Y,x),de=z.ctx;function Ae(ie){return de.iterate(function(we){(0,y.mf)(we[T.Tu])&&we[T.Tu](de,ie)})}o(Ae,"_processNext");function Oe(ie,we){return ie===void 0&&(ie=null),(0,y.kJ)(ie)&&(ie=G(ie,se,Y,we)),Ee(ie||de[T.W2](),Y,we)}return o(Oe,"_createNew"),de[T.uL]=Ae,de[T.zV]=Oe,de}o(Ee,"createProcessTelemetryUpdateContext");function G(M,Y,x,se){var z=null,de=!se;if((0,y.kJ)(M)&&M[T.R5]>0){var Ae=null;(0,y.tO)(M,function(Oe){if(!de&&se===Oe&&(de=!0),de&&Oe&&(0,y.mf)(Oe[W.hL])){var ie=X(Oe,Y,x);z||(z=ie),Ae&&Ae._setNext(ie),Ae=ie}})}return se&&!z?G([se],Y,x):z}o(G,"createTelemetryProxyChain");function X(M,Y,x){var se=null,z=(0,y.mf)(M[W.hL]),de=(0,y.mf)(M[T.Jd]),Ae;M?Ae=M[T.pZ]+"-"+M[W.yi]+"-"+A++:Ae="Unknown-0-"+A++;var Oe={getPlugin:function(){return M},getNext:function(){return se},processTelemetry:R,unload:Ve,update:me,_id:Ae,_setNext:function(ge){se=ge}};function ie(){var ge;return M&&(0,y.mf)(M[H])&&(ge=M[H]()),ge||(ge=J(Oe,Y,x)),ge}o(ie,"_getTelCtx");function we(ge,K,oe,Re,$e){var re=!1,et=M?M[T.pZ]:w,ut=ge[B];return ut||(ut=ge[B]={}),ge.setNext(se),M&&(0,O.Lm)(ge[W.oV](),function(){return et+":"+oe},function(){ut[Ae]=!0;try{var wt=se?se._id:W.qS;wt&&(ut[wt]=!1),re=K(ge)}catch(U){var k=se?ut[se._id]:!0;k&&(re=!0),(!se||!k)&&(0,v.kP)(ge[T.mc](),1,73,"Plugin ["+et+"] failed during "+oe+" - "+(0,L.eU)(U)+", run flags: "+(0,L.eU)(ut))}},Re,$e),re}o(we,"_processChain");function R(ge,K){K=K||ie();function oe(Re){if(!M||!z)return!1;var $e=(0,m.OY)(M);return $e[T.fi]||$e[W.mE]?!1:(de&&M[T.Jd](se),M[W.hL](ge,Re),!0)}o(oe,"_callProcessTelemetry"),we(K,oe,"processTelemetry",function(){return{item:ge}},!ge.sync)||K[T.uL](ge)}o(R,"_processTelemetry");function Ve(ge,K){function oe(){var Re=!1;if(M){var $e=(0,m.OY)(M),re=M[W.oV]||$e[W.oV];M&&(!re||re===ge.core())&&!$e[T.fi]&&($e[W.oV]=null,$e[T.fi]=!0,$e[T.yl]=!1,M[T.fi]&&M[T.fi](ge,K)===!0&&(Re=!0))}return Re}o(oe,"_callTeardown"),we(ge,oe,"unload",function(){},K[T.d])||ge[T.uL](K)}o(Ve,"_unloadPlugin");function me(ge,K){function oe(){var Re=!1;if(M){var $e=(0,m.OY)(M),re=M[W.oV]||$e[W.oV];M&&(!re||re===ge.core())&&!$e[T.fi]&&M[T.Tu]&&M[T.Tu](ge,K)===!0&&(Re=!0)}return Re}o(oe,"_callUpdate"),we(ge,oe,"update",function(){},!1)||ge[T.uL](K)}return o(me,"_updatePlugin"),(0,y.FL)(Oe)}o(X,"createTelemetryPluginProxy");var Z=function(){function M(Y,x,se,z){var de=this,Ae=J(Y,x,se,z);(0,y.Vb)(de,Ae,(0,y.FY)(Ae))}return o(M,"ProcessTelemetryContext"),M}()},4878:(ot,l,b)=>{"use strict";b.d(l,{az:()=>$,_l:()=>N,CN:()=>J,F6:()=>q,pZ:()=>Ee});var T=b(8096),v=b(7630),L=b(6708),y=b(6041),W=4294967296,O=4294967295,m=!1,w=123456789,B=987654321;function H(G){G<0&&(G>>>=0),w=123456789+G&O,B=987654321-G&O,m=!0}o(H,"_mwcSeed");function A(){try{var G=(0,L.m6)()&2147483647;H((Math.random()*W^G)+G)}catch(X){}}o(A,"_autoSeedMwc");function $(G){return G>0?Math.floor(N()/O*(G+1))>>>0:0}o($,"randomValue");function N(G){var X=0,Z=(0,v.MX)()||(0,v.gz)();return Z&&Z.getRandomValues&&(X=Z.getRandomValues(new Uint32Array(1))[0]&O),X===0&&(0,v.w1)()&&(m||A(),X=q()&O),X===0&&(X=Math.floor(W*Math.random()|0)),G||(X>>>=0),X}o(N,"random32");function J(G){G?H(G):A()}o(J,"mwcRandomSeed");function q(G){B=36969*(B&65535)+(B>>16)&O,w=18e3*(w&65535)+(w>>16)&O;var X=(B<<16)+(w&65535)>>>0&O|0;return G||(X>>>=0),X}o(q,"mwcRandom32");function Ee(G){G===void 0&&(G=22);for(var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=N()>>>0,M=0,Y=y.qS;Y[T.R5]<G;)M++,Y+=X.charAt(Z&63),Z>>>=6,M===5&&(Z=(N()<<2&4294967295|Z&3)>>>0,M=0);return Y}o(Ee,"newId")},3833:(ot,l,b)=>{"use strict";b.d(l,{OY:()=>m,bP:()=>w,AA:()=>B,Yn:()=>A});var T=b(8096),v=b(5883),L=b(6708),y=b(6041),W=b(4206),O=(0,v.K)("plugin");function m($){return O.get($,"state",{},!0)}o(m,"_getPluginState");function w($,N){for(var J=[],q=null,Ee=$[T.W2](),G;Ee;){var X=Ee[T.TO]();if(X){q&&(0,L.mf)(q[T.Jd])&&(0,L.mf)(X[y.hL])&&q[T.Jd](X);var Z=!1;(0,L.mf)(X[T.yl])?Z=X[T.yl]():(G=m(X),Z=G[T.yl]),Z||J[T.MW](X),q=X,Ee=Ee[T.W2]()}}(0,L.tO)(J,function(M){var Y=$[y.oV]();M[T.VL]($.getCfg(),Y,N,$[T.W2]()),G=m(M),!M[y.oV]&&!G[y.oV]&&(G[y.oV]=Y),G[T.yl]=!0,delete G[T.fi]})}o(w,"initializePlugins");function B($){return $.sort(function(N,J){var q=0;if(J){var Ee=(0,L.mf)(J[y.hL]);(0,L.mf)(N[y.hL])?q=Ee?N[y.yi]-J[y.yi]:1:Ee&&(q=-1)}else q=N?1:-1;return q})}o(B,"sortPlugins");function H($,N,J,q){var Ee=0;function G(){for(;Ee<$[_DYN_LENGTH];){var X=$[Ee++];if(X){var Z=X._doUnload||X[_DYN__DO_TEARDOWN];if(isFunction(Z)&&Z[_DYN_CALL](X,N,J,G)===!0)return!0}}}return o(G,"_doUnload"),G()}o(H,"unloadComponents");function A($){var N={};return{getName:function(){return N[T.I]},setName:function(J){$&&$.setName(J),N[T.I]=J},getTraceId:function(){return N[T.nY]},setTraceId:function(J){$&&$.setTraceId(J),(0,W.jN)(J)&&(N[T.nY]=J)},getSpanId:function(){return N[T._d]},setSpanId:function(J){$&&$.setSpanId(J),(0,W.Lc)(J)&&(N[T._d]=J)},getTraceFlags:function(){return N[T.T0]},setTraceFlags:function(J){$&&$.setTraceFlags(J),N[T.T0]=J}}}o(A,"createDistributedTraceContext")},310:(ot,l,b)=>{"use strict";b.d(l,{Y:()=>W});var T=b(8096),v=b(5018),L=b(7630),y=b(6708);function W(){var O=[];function m(B){B&&O[T.MW](B)}o(m,"_addHandler");function w(B,H){(0,y.tO)(O,function(A){try{A(B,H)}catch($){(0,v.kP)(B[T.mc](),2,73,"Unexpected error calling unload handler - "+(0,L.eU)($))}}),O=[]}return o(w,"_runHandlers"),{add:m,run:w}}o(W,"createUnloadHandlerContainer")},4206:(ot,l,b)=>{"use strict";b.d(l,{SU:()=>J,j_:()=>q,jN:()=>Ee,Lc:()=>G,J6:()=>X,Pn:()=>Z,aR:()=>M,lq:()=>Y});var T=b(8096),v=b(5843),L=b(7630),y=b(6708),W=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,O="00",m="ff",w="00000000000000000000000000000000",B="0000000000000000",H=1;function A(x,se,z){return x&&x[T.R5]===se&&x!==z?!!x.match(/^[\da-f]*$/):!1}o(A,"_isValid");function $(x,se,z){return A(x,se)?x:z}o($,"_formatValue");function N(x){(isNaN(x)||x<0||x>255)&&(x=1);for(var se=x.toString(16);se[T.R5]<2;)se="0"+se;return se}o(N,"_formatFlags");function J(x,se,z,de){var Ae;return Ae={},Ae[T.PA]=A(de,2,m)?de:O,Ae[T.nY]=Ee(x)?x:(0,v.DO)(),Ae.spanId=G(se)?se:(0,v.DO)()[T.Jn](0,16),Ae.traceFlags=z>=0&&z<=255?z:1,Ae}o(J,"createTraceParent");function q(x){var se;if(!x||((0,y.kJ)(x)&&(x=x[0]||""),!x||!(0,y.HD)(x)||x[T.R5]>8192))return null;var z=W.exec((0,y.nd)(x));return!z||z[1]===m||z[2]===w||z[3]===B?null:(se={},se[T.PA]=z[1],se[T.nY]=z[2],se[T._d]=z[3],se[T.T0]=parseInt(z[4],16),se)}o(q,"parseTraceParent");function Ee(x){return A(x,32,w)}o(Ee,"isValidTraceId");function G(x){return A(x,16,B)}o(G,"isValidSpanId");function X(x){return!(!x||!A(x[T.PA],2,m)||!A(x[T.nY],32,w)||!A(x[T._d],16,B)||!A(N(x[T.T0]),2))}o(X,"isValidTraceParent");function Z(x){return X(x)?(x[T.T0]&H)===H:!1}o(Z,"isSampledFlag");function M(x){if(x){var se=N(x[T.T0]);A(se,2)||(se="01");var z=x[T.PA]||O;return z!=="00"&&z!=="ff"&&(z=O),"".concat(z,"-").concat($(x.traceId,32,w),"-").concat($(x.spanId,16,B),"-").concat(se)}return""}o(M,"formatTraceParent");function Y(){var x="traceparent",se=q((0,L.ed)(x));return se||(se=q((0,L.pI)(x))),se}o(Y,"findW3cTraceParent")},8096:(ot,l,b)=>{"use strict";b.d(l,{VL:()=>T,I:()=>v,tb:()=>L,pZ:()=>y,MW:()=>W,yl:()=>O,TC:()=>m,p$:()=>w,eZ:()=>B,R5:()=>H,Z_:()=>A,uL:()=>$,SD:()=>N,g:()=>J,n7:()=>q,LS:()=>Ee,Fc:()=>G,TO:()=>X,kL:()=>Z,iC:()=>M,cb:()=>Y,fi:()=>x,Gc:()=>se,gU:()=>z,d:()=>de,F3:()=>Ae,Tu:()=>Oe,W2:()=>ie,mc:()=>we,Jd:()=>R,zV:()=>Ve,Lk:()=>me,ou:()=>ge,zc:()=>K,qV:()=>oe,w6:()=>Re,$h:()=>$e,Jn:()=>re,xv:()=>et,ZV:()=>ut,i7:()=>wt,Fr:()=>k,jk:()=>U,T1:()=>te,_S:()=>ue,P6:()=>Be,Kn:()=>Ie,dE:()=>le,PL:()=>_e,T:()=>Te,wu:()=>Ye,Km:()=>Se,nY:()=>xe,_d:()=>dt,T0:()=>nt,PA:()=>Ce});var T="initialize",v="name",L="getNotifyMgr",y="identifier",W="push",O="isInitialized",m="config",w="instrumentationKey",B="logger",H="length",A="time",$="processNext",N="getProcessTelContext",J="addNotificationListener",q="removeNotificationListener",Ee="stopPollingInternalLogs",G="onComplete",X="getPlugin",Z="flush",M="_extensions",Y="splice",x="teardown",se="messageId",z="message",de="isAsync",Ae="_doTeardown",Oe="update",ie="getNext",we="diagLog",R="setNextPlugin",Ve="createNew",me="cookieCfg",ge="indexOf",K="substring",oe="userAgent",Re="split",$e="setEnabled",re="substr",et="nodeType",ut="apply",wt="replace",k="enableDebugExceptions",U="logInternalMessage",te="toLowerCase",ue="call",Be="type",Ie="handler",le="listeners",_e="isChildEvt",Te="getCtx",Ye="setCtx",Se="complete",xe="traceId",dt="spanId",nt="traceFlags",Ce="version"},4392:(ot,l,b)=>{"use strict";b.d(l,{cb:()=>T,fK:()=>v,jA:()=>L,hB:()=>y,bO:()=>W,Pw:()=>m,V4:()=>w,rl:()=>B,yu:()=>H,RJ:()=>A,CY:()=>$});var T="function",v="object",L="undefined",y="prototype",W="hasOwnProperty",O="default",m=Object,w=m[y],B=m.assign,H=m.create,A=m.defineProperty,$=w[W]},2091:(ot,l,b)=>{"use strict";b.d(l,{Rd:()=>L,ZU:()=>y,pu:()=>W});var T=b(4392),v=null;function L(O){O===void 0&&(O=!0);var m=O===!1?null:v;return m||(typeof globalThis!==T.jA&&(m=globalThis),!m&&typeof self!==T.jA&&(m=self),!m&&typeof window!==T.jA&&(m=window),!m&&typeof b.g!==T.jA&&(m=b.g),v=m),m}o(L,"getGlobal");function y(O){throw new TypeError(O)}o(y,"throwTypeError");function W(O){var m=T.yu;if(m)return m(O);if(O==null)return{};var w=typeof O;w!==T.fK&&w!==T.cb&&y("Object prototype may only be an Object:"+O);function B(){}return o(B,"tmpFunc"),B[T.hB]=O,new B}o(W,"objCreateFn")},1088:(ot,l,b)=>{"use strict";b.d(l,{uc:()=>$,ne:()=>J,$h:()=>z});var T=b(4392),v=b(2091),L=((0,v.Rd)()||{}).Symbol,y=((0,v.Rd)()||{}).Reflect,W=!!L,O=!!y,m="decorate",w="metadata",B="getOwnPropertySymbols",H="iterator",A=o(function(ie){for(var we,R=1,Ve=arguments.length;R<Ve;R++){we=arguments[R];for(var me in we)T.V4[T.bO].call(we,me)&&(ie[me]=we[me])}return ie},"__objAssignFnImpl"),$=T.rl||A,N=o(function(ie,we){return N=T.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,Ve){R.__proto__=Ve}||function(R,Ve){for(var me in Ve)Ve[T.bO](me)&&(R[me]=Ve[me])},N(ie,we)},"extendStaticsFn");function J(ie,we){typeof we!==T.cb&&we!==null&&(0,v.ZU)("Class extends value "+String(we)+" is not a constructor or null"),N(ie,we);function R(){this.constructor=ie}o(R,"__"),ie[T.hB]=we===null?(0,v.pu)(we):(R[T.hB]=we[T.hB],new R)}o(J,"__extendsFn");function q(ie,we){var R={};for(var Ve in ie)ObjHasOwnProperty.call(ie,Ve)&&we.indexOf(Ve)<0&&(R[Ve]=ie[Ve]);if(ie!=null&&typeof ObjClass[B]===strShimFunction)for(var me=0,ge=ObjClass[B](ie);me<ge.length;me++)we.indexOf(ge[me])<0&&ObjProto.propertyIsEnumerable.call(ie,ge[me])&&(R[ge[me]]=ie[ge[me]]);return R}o(q,"__restFn");function Ee(ie,we,R,Ve){var me=arguments.length,ge=me<3?we:Ve===null?Ve=ObjClass.getOwnPropertyDescriptor(we,R):Ve,K;if(O&&typeof y[m]===strShimFunction)ge=y[m](ie,we,R,Ve);else for(var oe=ie.length-1;oe>=0;oe--)(K=ie[oe])&&(ge=(me<3?K(ge):me>3?K(we,R,ge):K(we,R))||ge);return me>3&&ge&&ObjDefineProperty(we,R,ge),ge}o(Ee,"__decorateFn");function G(ie,we){return function(R,Ve){we(R,Ve,ie)}}o(G,"__paramFn");function X(ie,we){if(O&&y[w]===strShimFunction)return y[w](ie,we)}o(X,"__metadataFn");function Z(ie,we){for(var R in ie)R!==strDefault&&!ObjHasOwnProperty.call(we,R)&&M(we,ie,R)}o(Z,"__exportStarFn");function M(ie,we,R,Ve){Ve===void 0&&(Ve=R),ObjCreate?ObjDefineProperty(ie,Ve,{enumerable:!0,get:function(){return we[R]}}):ie[Ve]=we[R]}o(M,"__createBindingFn");function Y(ie){var we=typeof L===strShimFunction&&L[H],R=we&&ie[we],Ve=0;if(R)return R.call(ie);if(ie&&typeof ie.length=="number")return{next:function(){return ie&&Ve>=ie.length&&(ie=void 0),{value:ie&&ie[Ve++],done:!ie}}};throwTypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}o(Y,"__valuesFn");function x(ie,we){var R=typeof L===strShimFunction&&ie[L[H]];if(!R)return ie;var Ve=R.call(ie),me,ge=[],K;try{for(;(we===void 0||we-- >0)&&!(me=Ve.next()).done;)ge.push(me.value)}catch(oe){K={error:oe}}finally{try{me&&!me.done&&(R=Ve.return)&&R.call(Ve)}finally{if(K)throw K.error}}return ge}o(x,"__readFn");function se(){for(var ie=arguments,we=0,R=0,Ve=ie.length;R<Ve;R++)we+=ie[R].length;for(var me=Array(we),ge=0,R=0;R<Ve;R++)for(var K=ie[R],oe=0,Re=K.length;oe<Re;oe++,ge++)me[ge]=K[oe];return me}o(se,"__spreadArraysFn");function z(ie,we){for(var R=0,Ve=we.length,me=ie.length;R<Ve;R++,me++)ie[me]=we[R];return ie}o(z,"__spreadArrayFn");function de(ie,we){return ObjDefineProperty?ObjDefineProperty(ie,"raw",{value:we}):ie.raw=we,ie}o(de,"__makeTemplateObjectFn");function Ae(ie){if(ie&&ie.__esModule)return ie;var we={};if(ie!=null)for(var R in ie)R!==strDefault&&Object.prototype.hasOwnProperty.call(ie,R)&&M(we,ie,R);return ObjCreate?ObjDefineProperty(we,strDefault,{enumerable:!0,value:ie}):we[strDefault]=ie,we}o(Ae,"__importStarFn");function Oe(ie){return ie&&ie.__esModule?ie:{strDefault:ie}}o(Oe,"__importDefaultFn")},3268:(ot,l,b)=>{"use strict";b.r(l),b.d(l,{AppInsightsCore:()=>so.F,ApplicationInsights:()=>Ca,CoreUtils:()=>En.Tr,Sender:()=>Na,SeverityLevel:()=>Ai,_InternalMessageId:()=>lo.v,arrForEach:()=>S.tO,isNullOrUndefined:()=>S.le,proxyFunctions:()=>S.Vb,throwError:()=>S._y});var T=b(1679),v=b(1088),L="AppInsightsPropertiesPlugin",y="AppInsightsChannelPlugin",W="ApplicationInsightsAnalytics",O="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="sampleRate",w="ProcessLegacy",B="http.method",H="https://dc.services.visualstudio.com",A="/v2/track",$="not_specified",N="iKey",J="split",q="length",Ee="toLowerCase",G="ingestionendpoint",X="toString",Z="removeItem",M="name",Y="message",x="count",se="preTriggerDate",z="disabled",de="interval",Ae="daysOfMonth",Oe="date",ie="getUTCDate",we="stringify",R="pathname",Ve="correlationHeaderExcludePatterns",me="indexOf",ge="extensionConfig",K="exceptions",oe="parsedStack",Re="properties",$e="measurements",re="sizeInBytes",et="typeName",ut="severityLevel",wt="problemGroup",k="isManual",U="CreateFromInterface",te="assembly",ue="hasFullStack",Be="level",Ie="method",le="fileName",_e="line",Te="duration",Ye="receivedResponse",Se="substring",xe="sanitizeKeyAndAddUniqueness",dt="sanitizeException",nt="sanitizeProperties",Ce="sanitizeMeasurements",S=b(6708),ye=b(5018),Xe=b(7630),Kt;function Nn(C,g,E){var F=g[q],ae=Rn(C,g);if(ae[q]!==F){for(var pe=0,De=ae;E[De]!==void 0;)pe++,De=ae[Se](0,150-3)+tn(pe);ae=De}return ae}o(Nn,"dataSanitizeKeyAndAddUniqueness");function Rn(C,g){var E;return g&&(g=(0,S.nd)(g[X]()),g[q]>150&&(E=g[Se](0,150),(0,ye.kP)(C,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),E||g}o(Rn,"dataSanitizeKey");function _n(C,g,E){E===void 0&&(E=1024);var F;return g&&(E=E||1024,g=(0,S.nd)(g),g.toString()[q]>E&&(F=g[X]()[Se](0,E),(0,ye.kP)(C,2,61,"string value is too long. It has been truncated to "+E+" characters.",{value:g},!0))),F||g}o(_n,"dataSanitizeString");function dr(C,g){return zt(C,g,2048,66)}o(dr,"dataSanitizeUrl");function ir(C,g){var E;return g&&g[q]>32768&&(E=g[Se](0,32768),(0,ye.kP)(C,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),E||g}o(ir,"dataSanitizeMessage");function pr(C,g){var E;if(g){var F=""+g;F[q]>32768&&(E=F[Se](0,32768),(0,ye.kP)(C,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return E||g}o(pr,"dataSanitizeException");function mr(C,g){if(g){var E={};(0,S.rW)(g,function(F,ae){if((0,S.Kn)(ae)&&(0,Xe.nS)())try{ae=(0,Xe.xA)()[we](ae)}catch(pe){(0,ye.kP)(C,2,49,"custom property is not valid",{exception:pe},!0)}ae=_n(C,ae,8192),F=Nn(C,F,E),E[F]=ae}),g=E}return g}o(mr,"dataSanitizeProperties");function fr(C,g){if(g){var E={};(0,S.rW)(g,function(F,ae){F=Nn(C,F,E),E[F]=ae}),g=E}return g}o(fr,"dataSanitizeMeasurements");function vt(C,g){return g&&zt(C,g,128,69)[X]()}o(vt,"dataSanitizeId");function zt(C,g,E,F){var ae;return g&&(g=(0,S.nd)(g),g[q]>E&&(ae=g[Se](0,E),(0,ye.kP)(C,2,F,"input is too long, it has been truncated to "+E+" characters.",{data:g},!0))),ae||g}o(zt,"dataSanitizeInput");function tn(C){var g="00"+C;return g.substr(g[q]-3)}o(tn,"dsPadNumber");var Yt=(Kt={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},Kt[xe]=Nn,Kt.sanitizeKey=Rn,Kt.sanitizeString=_n,Kt.sanitizeUrl=dr,Kt.sanitizeMessage=ir,Kt[dt]=pr,Kt[nt]=mr,Kt[Ce]=fr,Kt.sanitizeId=vt,Kt.sanitizeInput=zt,Kt.padNumber=tn,Kt.trim=S.nd,Kt),on=function(){function C(g,E,F,ae){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var pe=this;pe.ver=2,pe[M]=_n(g,E)||$,pe[Re]=mr(g,F),pe[$e]=fr(g,ae)}return o(C,"Event"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Event",C.dataType="EventData",C}(),Mn=function(){function C(g,E,F,ae,pe){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var De=this;De.ver=2,E=E||$,De[Y]=ir(g,E),De[Re]=mr(g,ae),De[$e]=fr(g,pe),F&&(De[ut]=F)}return o(C,"Trace"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Message",C.dataType="MessageData",C}(),Kn="";function Gn(C,g){return g===void 0&&(g=!1),C==null?g:C.toString()[Ee]()==="true"}o(Gn,"stringToBoolOrDefault");function hr(C){(isNaN(C)||C<0)&&(C=0),C=Math.round(C);var g=Kn+C%1e3,E=Kn+Math.floor(C/1e3)%60,F=Kn+Math.floor(C/(1e3*60))%60,ae=Kn+Math.floor(C/(1e3*60*60))%24,pe=Math.floor(C/(1e3*60*60*24));return g=g[q]===1?"00"+g:g[q]===2?"0"+g:g,E=E[q]<2?"0"+E:E,F=F[q]<2?"0"+F:F,ae=ae[q]<2?"0"+ae:ae,(pe>0?pe+".":Kn)+ae+":"+F+":"+E+"."+g}o(hr,"msToTimeSpan");function Pr(C,g){var E=null;return(0,S.tO)(C,function(F){if(F.identifier===g)return E=F,-1}),E}o(Pr,"getExtensionByName");function Wr(C,g,E,F,ae){return!ae&&(0,S.HD)(C)&&(C==="Script error."||C==="Script error")}o(Wr,"isCrossOriginError");var Qn=function(){function C(g,E,F,ae,pe,De,ze){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ft=this;ft.ver=2,ft.id=vt(g,ze),ft.url=dr(g,F),ft[M]=_n(g,E)||$,isNaN(ae)||(ft[Te]=hr(ae)),ft[Re]=mr(g,pe),ft[$e]=fr(g,De)}return o(C,"PageView"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",C.dataType="PageviewData",C}(),$r=function(){function C(g,E,F,ae,pe,De,ze){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ft=this;ft.ver=2,ft.url=dr(g,F),ft[M]=_n(g,E)||$,ft[Re]=mr(g,pe),ft[$e]=fr(g,De),ze&&(ft.domProcessing=ze.domProcessing,ft[Te]=ze[Te],ft.networkConnect=ze.networkConnect,ft.perfTotal=ze.perfTotal,ft[Ye]=ze[Ye],ft.sentRequest=ze.sentRequest)}return o(C,"PageViewPerformance"),C.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",C.dataType="PageviewPerformanceData",C}(),Br="<no_method>",vn="error",Zn="stack",Cr="stackDetails",gr="errorSrc",oi="message",gi="description";function yr(C,g){var E=C;return E&&!(0,S.HD)(E)&&(JSON&&JSON[we]?(E=JSON[we](C),g&&(!E||E==="{}")&&((0,S.mf)(C[X])?E=C[X]():E=""+C)):E=""+C+" - (Missing JSON.stringify)"),E||""}o(yr,"_stringify");function P(C,g){var E=C;return C&&(E&&!(0,S.HD)(E)&&(E=C[oi]||C[gi]||E),E&&!(0,S.HD)(E)&&(E=yr(E,!0)),C.filename&&(E=E+" @"+(C.filename||"")+":"+(C.lineno||"?")+":"+(C.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(E||"")[me](g)===-1&&(E=g+": "+E),E||""}o(P,"_formatMessage");function ce(C){try{if((0,S.Kn)(C))return"hasFullStack"in C&&"typeName"in C}catch(g){}return!1}o(ce,"_isExceptionDetailsInternal");function be(C){try{if((0,S.Kn)(C))return"ver"in C&&"exceptions"in C&&"properties"in C}catch(g){}return!1}o(be,"_isExceptionInternal");function Fe(C){return C&&C.src&&(0,S.HD)(C.src)&&C.obj&&(0,S.kJ)(C.obj)}o(Fe,"_isStackDetails");function Ze(C){var g=C||"";(0,S.HD)(g)||((0,S.HD)(g[Zn])?g=g[Zn]:g=""+g);var E=g[J](`
`);return{src:g,obj:E}}o(Ze,"_convertStackObj");function Qe(C){for(var g=[],E=C[J](`
`),F=0;F<E[q];F++){var ae=E[F];E[F+1]&&(ae+="@"+E[F+1],F++),g.push(ae)}return{src:C,obj:g}}o(Qe,"_getOperaStack");function ht(C){var g=null;if(C)try{if(C[Zn])g=Ze(C[Zn]);else if(C[vn]&&C[vn][Zn])g=Ze(C[vn][Zn]);else if(C.exception&&C.exception[Zn])g=Ze(C.exception[Zn]);else if(Fe(C))g=C;else if(Fe(C[Cr]))g=C[Cr];else if(window&&window.opera&&C[oi])g=Qe(C[Y]);else if(C.reason&&C.reason[Zn])g=Ze(C.reason[Zn]);else if((0,S.HD)(C))g=Ze(C);else{var E=C[oi]||C[gi]||"";(0,S.HD)(C[gr])&&(E&&(E+=`
`),E+=" from "+C[gr]),E&&(g=Ze(E))}}catch(F){g=Ze(F)}return g||{src:"",obj:null}}o(ht,"_getStackFromErrorObj");function Dt(C){var g="";return C&&(C.obj?(0,S.tO)(C.obj,function(E){g+=E+`
`}):g=C.src||""),g}o(Dt,"_formatStackTrace");function ct(C){var g,E=C.obj;if(E&&E[q]>0){g=[];var F=0,ae=0;(0,S.tO)(E,function(Sn){var vr=Sn[X]();if(kt.regex.test(vr)){var Le=new kt(vr,F++);ae+=Le[re],g.push(Le)}});var pe=32*1024;if(ae>pe)for(var De=0,ze=g[q]-1,ft=0,_t=De,Mt=ze;De<ze;){var cn=g[De][re],Hn=g[ze][re];if(ft+=cn+Hn,ft>pe){var un=Mt-_t+1;g.splice(_t,un);break}_t=De,Mt=ze,De++,ze--}}return g}o(ct,"_parseStack");function qt(C){var g="";if(C&&(g=C.typeName||C[M]||"",!g))try{var E=/function (.{1,200})\(/,F=E.exec(C.constructor[X]());g=F&&F[q]>1?F[1]:""}catch(ae){}return g}o(qt,"_getErrorType");function bt(C){if(C)try{if(!(0,S.HD)(C)){var g=qt(C),E=yr(C,!1);return(!E||E==="{}")&&(C[vn]&&(C=C[vn],g=qt(C)),E=yr(C,!0)),E[me](g)!==0&&g!=="String"?g+":"+E:E}}catch(F){}return""+(C||"")}o(bt,"_formatErrorCode");var Ot=function(){function C(g,E,F,ae,pe,De){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ze=this;ze.ver=2,be(E)?(ze[K]=E[K]||[],ze[Re]=E[Re],ze[$e]=E[$e],E[ut]&&(ze[ut]=E[ut]),E.id&&(ze.id=E.id),E[wt]&&(ze[wt]=E[wt]),(0,S.le)(E[k])||(ze[k]=E[k])):(F||(F={}),ze[K]=[new Ht(g,E,F)],ze[Re]=mr(g,F),ze[$e]=fr(g,ae),pe&&(ze[ut]=pe),De&&(ze.id=De))}return o(C,"Exception"),C.CreateAutoException=function(g,E,F,ae,pe,De,ze,ft){var _t,Mt=qt(pe||De||g);return _t={},_t[Y]=P(g,Mt),_t.url=E,_t.lineNumber=F,_t.columnNumber=ae,_t.error=bt(pe||De||g),_t.evt=bt(De||g),_t[et]=Mt,_t.stackDetails=ht(ze||pe||De),_t.errorSrc=ft,_t},C.CreateFromInterface=function(g,E,F,ae){var pe=E[K]&&(0,S.Mr)(E[K],function(ze){return Ht[U](g,ze)}),De=new C(g,(0,v.uc)((0,v.uc)({},E),{exceptions:pe}),F,ae);return De},C.prototype.toInterface=function(){var g,E=this,F=E.exceptions,ae=E.properties,pe=E.measurements,De=E.severityLevel,ze=E.problemGroup,ft=E.id,_t=E.isManual,Mt=F instanceof Array&&(0,S.Mr)(F,function(cn){return cn.toInterface()})||void 0;return g={ver:"4.0"},g[K]=Mt,g.severityLevel=De,g.properties=ae,g.measurements=pe,g.problemGroup=ze,g.id=ft,g.isManual=_t,g},C.CreateSimpleException=function(g,E,F,ae,pe,De){var ze;return{exceptions:[(ze={},ze[ue]=!0,ze.message=g,ze.stack=pe,ze.typeName=E,ze)]}},C.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",C.dataType="ExceptionData",C.formatError=bt,C}(),Ht=function(){function C(g,E,F){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var ae=this;if(ce(E))ae[et]=E[et],ae[Y]=E[Y],ae[Zn]=E[Zn],ae[oe]=E[oe]||[],ae[ue]=E[ue];else{var pe=E,De=pe&&pe.evt;(0,S.VZ)(pe)||(pe=pe[vn]||De||pe),ae[et]=_n(g,qt(pe))||$,ae[Y]=ir(g,P(E||pe,ae[et]))||$;var ze=E[Cr]||ht(E);ae[oe]=ct(ze),(0,S.kJ)(ae[oe])&&(0,S.Mr)(ae[oe],function(ft){return ft[te]=_n(g,ft[te])}),ae[Zn]=pr(g,Dt(ze)),ae.hasFullStack=(0,S.kJ)(ae.parsedStack)&&ae.parsedStack[q]>0,F&&(F[et]=F[et]||ae[et])}}return o(C,"_ExceptionDetails"),C.prototype.toInterface=function(){var g,E=this,F=E[oe]instanceof Array&&(0,S.Mr)(E[oe],function(pe){return pe.toInterface()}),ae=(g={id:E.id,outerId:E.outerId,typeName:E[et],message:E[Y],hasFullStack:E[ue],stack:E[Zn]},g[oe]=F||void 0,g);return ae},C.CreateFromInterface=function(g,E){var F=E[oe]instanceof Array&&(0,S.Mr)(E[oe],function(pe){return kt[U](pe)})||E[oe],ae=new C(g,(0,v.uc)((0,v.uc)({},E),{parsedStack:F}));return ae},C}(),kt=function(){function C(g,E){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var F=this;if(F[re]=0,typeof g=="string"){var ae=g;F[Be]=E,F[Ie]=Br,F[te]=(0,S.nd)(ae),F[le]="",F[_e]=0;var pe=ae.match(C.regex);pe&&pe[q]>=5&&(F[Ie]=(0,S.nd)(pe[2])||F[Ie],F[le]=(0,S.nd)(pe[4]),F[_e]=parseInt(pe[5])||0)}else F[Be]=g[Be],F[Ie]=g[Ie],F[te]=g[te],F[le]=g[le],F[_e]=g[_e],F[re]=0;F.sizeInBytes+=F.method[q],F.sizeInBytes+=F.fileName[q],F.sizeInBytes+=F.assembly[q],F[re]+=C.baseSize,F.sizeInBytes+=F.level.toString()[q],F.sizeInBytes+=F.line.toString()[q]}return o(C,"_StackFrame"),C.CreateFromInterface=function(g){return new C(g,null)},C.prototype.toInterface=function(){var g=this;return{level:g[Be],method:g[Ie],assembly:g[te],fileName:g[le],line:g[_e]}},C.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,C.baseSize=58,C}(),xt=function(){function C(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(C,"DataPoint"),C}(),On=function(){function C(g,E,F,ae,pe,De,ze,ft,_t){this.aiDataContract={ver:1,metrics:1,properties:0};var Mt=this;Mt.ver=2;var cn=new xt;cn[x]=ae>0?ae:void 0,cn.max=isNaN(De)||De===null?void 0:De,cn.min=isNaN(pe)||pe===null?void 0:pe,cn[M]=_n(g,E)||$,cn.value=F,cn.stdDev=isNaN(ze)||ze===null?void 0:ze,Mt.metrics=[cn],Mt[Re]=mr(g,ft),Mt[$e]=fr(g,_t)}return o(C,"Metric"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",C.dataType="MetricData",C}(),En=b(5843),lr=b(3242),nr=b(4878),ar=b(4869);function Kr(C){var g=null;if((0,S.mf)(Event))g=new Event(C);else{var E=(0,Xe.Me)();E&&E.createEvent&&(g=E.createEvent("Event"),g.initEvent(C,!0,!0))}return g}o(Kr,"createDomEvent");var Ir=b(4873),jn=(0,Ir.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),vi=b(2091),Jt=(0,Ir.By)({LocalStorage:0,SessionStorage:1}),zn=(0,Ir.By)({AI:0,AI_AND_W3C:1,W3C:2}),Ln=void 0,nn=void 0;function Bn(){return mi()?kn(Jt.LocalStorage):null}o(Bn,"_getLocalStorageObject");function kn(C){try{if((0,S.le)((0,vi.Rd)()))return null;var g=new Date()[X](),E=(0,Xe.a8)(C===Jt.LocalStorage?"localStorage":"sessionStorage");E.setItem(g,g);var F=E.getItem(g)!==g;if(E[Z](g),!F)return E}catch(ae){}return null}o(kn,"_getVerifiedStorageObject");function wr(){return Ti()?kn(Jt.SessionStorage):null}o(wr,"_getSessionStorageObject");function Gr(){Ln=!1,nn=!1}o(Gr,"utlDisableStorage");function pi(){Ln=mi(!0),nn=Ti(!0)}o(pi,"utlEnableStorage");function mi(C){return(C||Ln===void 0)&&(Ln=!!kn(Jt.LocalStorage)),Ln}o(mi,"utlCanUseLocalStorage");function si(C,g){var E=Bn();if(E!==null)try{return E.getItem(g)}catch(F){Ln=!1,(0,ye.kP)(C,2,1,"Browser failed read of local storage. "+(0,S.jj)(F),{exception:(0,Xe.eU)(F)})}return null}o(si,"utlGetLocalStorage");function zr(C,g,E){var F=Bn();if(F!==null)try{return F.setItem(g,E),!0}catch(ae){Ln=!1,(0,ye.kP)(C,2,3,"Browser failed write to local storage. "+(0,S.jj)(ae),{exception:(0,Xe.eU)(ae)})}return!1}o(zr,"utlSetLocalStorage");function ta(C,g){var E=Bn();if(E!==null)try{return E[Z](g),!0}catch(F){Ln=!1,(0,ye.kP)(C,2,5,"Browser failed removal of local storage item. "+(0,S.jj)(F),{exception:(0,Xe.eU)(F)})}return!1}o(ta,"utlRemoveStorage");function Ti(C){return(C||nn===void 0)&&(nn=!!kn(Jt.SessionStorage)),nn}o(Ti,"utlCanUseSessionStorage");function na(){var C=[];return Ti()&&(0,S.rW)((0,Xe.a8)("sessionStorage"),function(g){C.push(g)}),C}o(na,"utlGetSessionStorageKeys");function Mi(C,g){var E=wr();if(E!==null)try{return E.getItem(g)}catch(F){nn=!1,(0,ye.kP)(C,2,2,"Browser failed read of session storage. "+(0,S.jj)(F),{exception:(0,Xe.eU)(F)})}return null}o(Mi,"utlGetSessionStorage");function ra(C,g,E){var F=wr();if(F!==null)try{return F.setItem(g,E),!0}catch(ae){nn=!1,(0,ye.kP)(C,2,4,"Browser failed write to session storage. "+(0,S.jj)(ae),{exception:(0,Xe.eU)(ae)})}return!1}o(ra,"utlSetSessionStorage");function Xr(C,g){var E=wr();if(E!==null)try{return E[Z](g),!0}catch(F){nn=!1,(0,ye.kP)(C,2,6,"Browser failed removal of session storage item. "+(0,S.jj)(F),{exception:(0,Xe.eU)(F)})}return!1}o(Xr,"utlRemoveSessionStorage");var Zr=(0,Xe.Me)()||{},ei=0,ca=[null,null,null,null,null];function Hi(C){var g=ei,E=ca,F=E[g];return Zr.createElement?E[g]||(F=E[g]=Zr.createElement("a")):F={host:rt(C,!0)},F.href=C,g++,g>=E[q]&&(g=0),ei=g,F}o(Hi,"urlParseUrl");function ti(C){var g,E=Hi(C);return E&&(g=E.href),g}o(ti,"urlGetAbsoluteUrl");function Ji(C){var g,E=Hi(C);return E&&(g=E[R]),g}o(Ji,"urlGetPathName");function Ne(C,g){return C?C.toUpperCase()+" "+g:g}o(Ne,"urlGetCompleteUrl");function rt(C,g){var E=pt(C,g)||"";if(E){var F=E.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[q]>3&&(0,S.HD)(F[2])&&F[2][q]>0)return F[2]+(F[3]||"")}return E}o(rt,"urlParseHost");function pt(C,g){var E=null;if(C){var F=C.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[q]>2&&(0,S.HD)(F[2])&&F[2][q]>0&&(E=F[2]||"",g&&F[q]>2)){var ae=(F[1]||"")[Ee](),pe=F[3]||"";(ae==="http"&&pe===":80"||ae==="https"&&pe===":443")&&(pe=""),E+=pe}}return E}o(pt,"urlParseFullHost");var at=[H+A,"https://breeze.aimon.applicationinsights.io"+A,"https://dc-int.services.visualstudio.com"+A];function Lt(C){return(0,S.UA)(at,C[Ee]())!==-1}o(Lt,"isInternalApplicationInsightsEndpoint");var Gt={NotSpecified:$,createDomEvent:Kr,disableStorage:Gr,isInternalApplicationInsightsEndpoint:Lt,canUseLocalStorage:mi,getStorage:si,setStorage:zr,removeStorage:ta,canUseSessionStorage:Ti,getSessionStorageKeys:na,getSessionStorage:Mi,setSessionStorage:ra,removeSessionStorage:Xr,disableCookies:En.oF,canUseCookies:En.vn,disallowsSameSiteNone:lr.UY,setCookie:En.d8,stringToBoolOrDefault:Gn,getCookie:En.ej,deleteCookie:En.kT,trim:S.nd,newId:nr.pZ,random32:function(){return(0,nr._l)(!0)},generateW3CId:En.DO,isArray:S.kJ,isError:S.VZ,isDate:S.J_,toISOStringForIE8:S.Y6,getIEVersion:Xe.sA,msToTimeSpan:hr,isCrossOriginError:Wr,dump:Xe.eU,getExceptionName:S.jj,addEventHandler:ar.pZ,IsBeaconApiSupported:Xe.MF,getExtension:Pr},Ct={parseUrl:Hi,getAbsoluteUrl:ti,getPathName:Ji,getCompleteUrl:Ne,parseHost:rt,parseFullHost:pt},en={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(C,g,E){if(!g||C&&C.disableCorrelationHeaders)return!1;if(C&&C[Ve]){for(var F=0;F<C.correlationHeaderExcludePatterns[q];F++)if(C[Ve][F].test(g))return!1}var ae=Hi(g).host[Ee]();if(ae&&(ae[me](":443")!==-1||ae[me](":80")!==-1)&&(ae=(pt(g,!0)||"")[Ee]()),(!C||!C.enableCorsCorrelation)&&ae&&ae!==E)return!1;var pe=C&&C.correlationHeaderDomains;if(pe){var De;if((0,S.tO)(pe,function(_t){var Mt=new RegExp(_t.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));De=De||Mt.test(ae)}),!De)return!1}var ze=C&&C.correlationHeaderExcludedDomains;if(!ze||ze[q]===0)return!0;for(var F=0;F<ze[q];F++){var ft=new RegExp(ze[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ft.test(ae))return!1}return ae&&ae[q]>0},getCorrelationContext:function(C){if(C){var g=en.getCorrelationContextValue(C,jn[1]);if(g&&g!==en.correlationIdPrefix)return g}},getCorrelationContextValue:function(C,g){if(C)for(var E=C[J](","),F=0;F<E[q];++F){var ae=E[F][J]("=");if(ae[q]===2&&ae[0]===g)return ae[1]}}};function Ut(C,g,E,F){var ae,pe=F,De=F;if(g&&g[q]>0){var ze=Hi(g);if(ae=ze.host,!pe)if(ze[R]!=null){var ft=ze.pathname[q]===0?"/":ze[R];ft.charAt(0)!=="/"&&(ft="/"+ft),De=ze[R],pe=_n(C,E?E+" "+ft:ft)}else pe=_n(C,g)}else ae=F,pe=F;return{target:ae,name:pe,data:De}}o(Ut,"AjaxHelperParseDependencyPath");function hn(){var C=(0,Xe.r)();if(C&&C.now&&C.timing){var g=C.now()+C.timing.navigationStart;if(g>0)return g}return(0,S.m6)()}o(hn,"dateTimeUtilsNow");function Pn(C,g){var E=null;return C!==0&&g!==0&&!(0,S.le)(C)&&!(0,S.le)(g)&&(E=g-C),E}o(Pn,"dateTimeUtilsDuration");var Un={Now:hn,GetDuration:Pn};function Yn(C,g){var E=C||{};return{getName:function(){return E[_DYN_NAME]},setName:function(F){g&&g.setName(F),E[_DYN_NAME]=F},getTraceId:function(){return E.traceID},setTraceId:function(F){g&&g.setTraceId(F),isValidTraceId(F)&&(E.traceID=F)},getSpanId:function(){return E.parentID},setSpanId:function(F){g&&g.setSpanId(F),isValidSpanId(F)&&(E.parentID=F)},getTraceFlags:function(){return E.traceFlags},setTraceFlags:function(F){g&&g.setTraceFlags(F),E.traceFlags=F}}}o(Yn,"createDistributedTraceContextFromTrace");var er=function(){function C(g,E,F,ae,pe,De,ze,ft,_t,Mt,cn,Hn){_t===void 0&&(_t="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var un=this;un.ver=2,un.id=E,un[Te]=hr(pe),un.success=De,un.resultCode=ze+"",un.type=_n(g,_t);var Sn=Ut(g,F,ft,ae);un.data=dr(g,ae)||Sn.data,un.target=_n(g,Sn.target),Mt&&(un.target="".concat(un.target," | ").concat(Mt)),un[M]=_n(g,Sn[M]),un[Re]=mr(g,cn),un[$e]=fr(g,Hn)}return o(C,"RemoteDependencyData"),C.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",C.dataType="RemoteDependencyData",C}(),Fn=b(5883),Qt=b(4063);function sn(C){var g="ai."+C+".";return function(E){return g+E}}o(sn,"_aiNameFunc");var rn=sn("application"),yn=sn("device"),I=sn("location"),j=sn("operation"),Ue=sn("session"),tt=sn("user"),Rt=sn("cloud"),Ft=sn("internal"),pn=function(C){(0,v.ne)(g,C);function g(){return C.call(this)||this}return o(g,"ContextTagKeys"),g}((0,S.hl)({applicationVersion:rn("ver"),applicationBuild:rn("build"),applicationTypeId:rn("typeId"),applicationId:rn("applicationId"),applicationLayer:rn("layer"),deviceId:yn("id"),deviceIp:yn("ip"),deviceLanguage:yn("language"),deviceLocale:yn("locale"),deviceModel:yn("model"),deviceFriendlyName:yn("friendlyName"),deviceNetwork:yn("network"),deviceNetworkName:yn("networkName"),deviceOEMName:yn("oemName"),deviceOS:yn("os"),deviceOSVersion:yn("osVersion"),deviceRoleInstance:yn("roleInstance"),deviceRoleName:yn("roleName"),deviceScreenResolution:yn("screenResolution"),deviceType:yn("type"),deviceMachineName:yn("machineName"),deviceVMName:yn("vmName"),deviceBrowser:yn("browser"),deviceBrowserVersion:yn("browserVersion"),locationIp:I("ip"),locationCountry:I("country"),locationProvince:I("province"),locationCity:I("city"),operationId:j("id"),operationName:j("name"),operationParentId:j("parentId"),operationRootId:j("rootId"),operationSyntheticSource:j("syntheticSource"),operationCorrelationVector:j("correlationVector"),sessionId:Ue("id"),sessionIsFirst:Ue("isFirst"),sessionIsNew:Ue("isNew"),userAccountAcquisitionDate:tt("accountAcquisitionDate"),userAccountId:tt("accountId"),userAgent:tt("userAgent"),userId:tt("id"),userStoreRegion:tt("storeRegion"),userAuthUserId:tt("authUserId"),userAnonymousUserAcquisitionDate:tt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:tt("authUserAcquisitionDate"),cloudName:Rt("name"),cloudRole:Rt("role"),cloudRoleVer:Rt("roleVer"),cloudRoleInstance:Rt("roleInstance"),cloudEnvironment:Rt("environment"),cloudLocation:Rt("location"),cloudDeploymentUnit:Rt("deploymentUnit"),internalNodeName:Ft("nodeName"),internalSdkVersion:Ft("sdkVersion"),internalAgentVersion:Ft("agentVersion"),internalSnippet:Ft("snippet"),internalSdkSrc:Ft("sdkSrc")})),mn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Wt=new pn,gn=function(){function C(g,E,F){var ae=this,pe=this;pe.ver=1,pe.sampleRate=100,pe.tags={},pe[M]=_n(g,F)||$,pe.data=E,pe.time=(0,S.Y6)(new Date),pe.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return ae.sampleRate===100?4:1},tags:1,data:1}}return o(C,"Envelope"),C}(),wn=function(){function C(g,E){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=E}return o(C,"Data"),C}(),Bt="duration",mt="tags",xn="deviceType",Tn="data",Cn="name",or="traceID",jt="length",Hr="stringify",_r="measurements",fn="dataType",Xn="envelopeType",Lr="toString",Ur="onLine",li="isOnline",Qr="enqueue",Vr="count",Yr="push",br="emitLineDelimitedJson",ci="clear",yi="batchPayloads",Er="markAsSent",ui="clearSent",wi="bufferOverride",Pi="BUFFER_KEY",qr="SENT_BUFFER_KEY",kr="MAX_BUFFER_SIZE",tr="namePrefix",Si="maxBatchSizeInBytes",he="triggerSend",qe="diagLog",st="onunloadDisableBeacon",St="isBeaconApiDisabled",Tt="_sender",Nt="_senderConfig",ln="enableSessionStorageBuffer",fe="_buffer",Ge="samplingPercentage",He="instrumentationKey",lt="endpointUrl",Et="customHeaders",Vt="disableXhr",An="onunloadDisableFetch",In="disableTelemetry",Vn="baseType",di="sampleRate",fi="convertUndefined",Ui="_xhrReadyStateChange",sr="_onError",ni="_onPartialSuccess",Ii="_onSuccess",ia="itemsAccepted",wa="itemsReceived",Li="isRetryDisabled",Ci="setRequestHeader",ji="maxBatchInterval",xr="eventsSendRequest",ki="disableInstrumentationKeyValidation",aa="getSamplingScore",oa="getHashCodeScore",Wi="baseType",Jn="baseData",Ar="properties",ua="true";function Sr(C,g,E){return(0,S.sO)(C,g,E,S.fQ)}o(Sr,"_setValueIf");function rs(C,g,E){var F=E[mt]=E[mt]||{},ae=g.ext=g.ext||{},pe=g[mt]=g[mt]||[],De=ae.user;De&&(Sr(F,Wt.userAuthUserId,De.authId),Sr(F,Wt.userId,De.id||De.localId));var ze=ae.app;ze&&Sr(F,Wt.sessionId,ze.sesId);var ft=ae.device;ft&&(Sr(F,Wt.deviceId,ft.id||ft.localId),Sr(F,Wt[xn],ft.deviceClass),Sr(F,Wt.deviceIp,ft.ip),Sr(F,Wt.deviceModel,ft.model),Sr(F,Wt[xn],ft[xn]));var _t=g.ext.web;if(_t){Sr(F,Wt.deviceLanguage,_t.browserLang),Sr(F,Wt.deviceBrowserVersion,_t.browserVer),Sr(F,Wt.deviceBrowser,_t.browser);var Mt=E[Tn]=E[Tn]||{},cn=Mt[Jn]=Mt[Jn]||{},Hn=cn[Ar]=cn[Ar]||{};Sr(Hn,"domain",_t.domain),Sr(Hn,"isManual",_t.isManual?ua:null),Sr(Hn,"screenRes",_t.screenRes),Sr(Hn,"userConsent",_t.userConsent?ua:null)}var un=ae.os;un&&Sr(F,Wt.deviceOS,un[Cn]);var Sn=ae.trace;Sn&&(Sr(F,Wt.operationParentId,Sn.parentID),Sr(F,Wt.operationName,_n(C,Sn[Cn])),Sr(F,Wt.operationId,Sn[or]));for(var vr={},Le=pe[jt]-1;Le>=0;Le--){var rr=pe[Le];(0,S.rW)(rr,function(cr,Rr){vr[cr]=Rr}),pe.splice(Le,1)}(0,S.rW)(pe,function(cr,Rr){vr[cr]=Rr});var qn=(0,v.uc)((0,v.uc)({},F),vr);qn[Wt.internalSdkVersion]||(qn[Wt.internalSdkVersion]="javascript:".concat(Fi.Version)),E[mt]=(0,S.Ax)(qn)}o(rs,"_extractPartAExtensions");function xi(C,g,E){(0,S.le)(C)||(0,S.rW)(C,function(F,ae){(0,S.hj)(ae)?E[F]=ae:(0,S.HD)(ae)?g[F]=ae:(0,Xe.nS)()&&(g[F]=(0,Xe.xA)()[Hr](ae))})}o(xi,"_extractPropsAndMeasurements");function $i(C,g){(0,S.le)(C)||(0,S.rW)(C,function(E,F){C[E]=F||g})}o($i,"_convertPropsUndefinedToCustomDefinedValue");function _i(C,g,E,F){var ae=new gn(C,F,g);Sr(ae,"sampleRate",E[m]),(E[Jn]||{}).startTime&&(ae.time=(0,S.Y6)(E[Jn].startTime)),ae.iKey=E.iKey;var pe=E.iKey.replace(/-/g,"");return ae[Cn]=ae[Cn].replace("{0}",pe),rs(C,E,ae),E[mt]=E[mt]||[],(0,S.Ax)(ae)}o(_i,"_createEnvelope");function Ki(C,g){(0,S.le)(g[Jn])&&(0,ye.kP)(C,1,46,"telemetryItem.baseData cannot be null.")}o(Ki,"EnvelopeCreatorInit");var Fi={Version:"2.8.12"};function Ma(C,g,E){Ki(C,g);var F=g[Jn][_r]||{},ae=g[Jn][Ar]||{};xi(g[Tn],ae,F),(0,S.le)(E)||$i(ae,E);var pe=g[Jn];if((0,S.le)(pe))return(0,ye.jV)(C,"Invalid input for dependency data"),null;var De=pe[Ar]&&pe[Ar][B]?pe[Ar][B]:"GET",ze=new er(C,pe.id,pe.target,pe[Cn],pe[Bt],pe.success,pe.responseCode,De,pe.type,pe.correlationContext,ae,F),ft=new wn(er[fn],ze);return _i(C,er[Xn],g,ft)}o(Ma,"DependencyEnvelopeCreator");function Pa(C,g,E){Ki(C,g);var F={},ae={};g[Wi]!==on[fn]&&(F.baseTypeSource=g[Wi]),g[Wi]===on[fn]?(F=g[Jn][Ar]||{},ae=g[Jn][_r]||{}):g[Jn]&&xi(g[Jn],F,ae),xi(g[Tn],F,ae),(0,S.le)(E)||$i(F,E);var pe=g[Jn][Cn],De=new on(C,pe,F,ae),ze=new wn(on[fn],De);return _i(C,on[Xn],g,ze)}o(Pa,"EventEnvelopeCreator");function Ya(C,g,E){Ki(C,g);var F=g[Jn][_r]||{},ae=g[Jn][Ar]||{};xi(g[Tn],ae,F),(0,S.le)(E)||$i(ae,E);var pe=g[Jn],De=Ot.CreateFromInterface(C,pe,ae,F),ze=new wn(Ot[fn],De);return _i(C,Ot[Xn],g,ze)}o(Ya,"ExceptionEnvelopeCreator");function qa(C,g,E){Ki(C,g);var F=g[Jn],ae=F[Ar]||{},pe=F[_r]||{};xi(g[Tn],ae,pe),(0,S.le)(E)||$i(ae,E);var De=new On(C,F[Cn],F.average,F.sampleCount,F.min,F.max,F.stdDev,ae,pe),ze=new wn(On[fn],De);return _i(C,On[Xn],g,ze)}o(qa,"MetricEnvelopeCreator");function Qa(C,g,E){Ki(C,g);var F,ae=g[Jn];!(0,S.le)(ae)&&!(0,S.le)(ae[Ar])&&!(0,S.le)(ae[Ar][Bt])?(F=ae[Ar][Bt],delete ae[Ar][Bt]):!(0,S.le)(g[Tn])&&!(0,S.le)(g[Tn][Bt])&&(F=g[Tn][Bt],delete g[Tn][Bt]);var pe=g[Jn],De;((g.ext||{}).trace||{})[or]&&(De=g.ext.trace[or]);var ze=pe.id||De,ft=pe[Cn],_t=pe.uri,Mt=pe[Ar]||{},cn=pe[_r]||{};if((0,S.le)(pe.refUri)||(Mt.refUri=pe.refUri),(0,S.le)(pe.pageType)||(Mt.pageType=pe.pageType),(0,S.le)(pe.isLoggedIn)||(Mt.isLoggedIn=pe.isLoggedIn[Lr]()),!(0,S.le)(pe[Ar])){var Hn=pe[Ar];(0,S.rW)(Hn,function(vr,Le){Mt[vr]=Le})}xi(g[Tn],Mt,cn),(0,S.le)(E)||$i(Mt,E);var un=new Qn(C,ft,_t,F,Mt,cn,ze),Sn=new wn(Qn[fn],un);return _i(C,Qn[Xn],g,Sn)}o(Qa,"PageViewEnvelopeCreator");function Xa(C,g,E){Ki(C,g);var F=g[Jn],ae=F[Cn],pe=F.uri||F.url,De=F[Ar]||{},ze=F[_r]||{};xi(g[Tn],De,ze),(0,S.le)(E)||$i(De,E);var ft=new $r(C,ae,pe,void 0,De,ze,F),_t=new wn($r[fn],ft);return _i(C,$r[Xn],g,_t)}o(Xa,"PageViewPerformanceEnvelopeCreator");function Za(C,g,E){Ki(C,g);var F=g[Jn].message,ae=g[Jn].severityLevel,pe=g[Jn][Ar]||{},De=g[Jn][_r]||{};xi(g[Tn],pe,De),(0,S.le)(E)||$i(pe,E);var ze=new Mn(C,F,ae,pe,De),ft=new wn(Mn[fn],ze);return _i(C,Mn[Xn],g,ft)}o(Za,"TraceEnvelopeCreator");function Ia(C,g){(0,ar.QY)(C,null,null,g)}o(Ia,"_disableEvents");function Sa(C){var g,E=(0,Xe.Me)(),F=(0,Xe.jW)(),ae=!1,pe=!0,De=(0,ar.jU)((0,Fn.J)("OfflineListener"),C);try{if(ft((0,Xe.Jj)())&&(ae=!0),E){var ze=E.body||E;ze.ononline&&ft(ze)&&(ae=!0)}ae&&F&&!(0,S.le)(F[Ur])&&(pe=F[Ur])}catch(un){ae=!1}function ft(un){var Sn=!1;return un&&(Sn=(0,ar.XO)(un,"online",_t,De),Sn&&(0,ar.XO)(un,"offline",Mt,De)),Sn}o(ft,"_enableEvents");function _t(){pe=!0}o(_t,"_setOnline");function Mt(){pe=!1}o(Mt,"_setOffline");function cn(){var un=!0;return ae?un=pe:F&&!(0,S.le)(F[Ur])&&(un=F[Ur]),un}o(cn,"_isOnline");function Hn(){var un=(0,Xe.Jj)();if(un&&ae){if(Ia(un,De),E){var Sn=E.body||E;(0,S.o8)(Sn.ononline)||Ia(Sn,De)}ae=!1}}return o(Hn,"_unload"),g={},g[li]=cn,g.isListening=function(){return ae},g.unload=Hn,g}o(Sa,"createOfflineListener");var La=function(){function C(g,E){var F=[],ae=!1;this._get=function(){return F},this._set=function(pe){return F=pe,F},(0,T.Z)(C,this,function(pe){pe[Qr]=function(De){if(pe[Vr]()>=E.eventsLimitInMem()){ae||((0,ye.kP)(g,2,105,"Maximum in-memory buffer size reached: "+pe[Vr](),!0),ae=!0);return}F[Yr](De)},pe[Vr]=function(){return F[jt]},pe.size=function(){for(var De=F[jt],ze=0;ze<F[jt];ze++)De+=F[ze][jt];return E[br]()||(De+=2),De},pe[ci]=function(){F=[],ae=!1},pe.getItems=function(){return F.slice(0)},pe[yi]=function(De){if(De&&De[jt]>0){var ze=E[br]()?De.join(`
`):"["+De.join(",")+"]";return ze}return null}})}return o(C,"BaseSendBuffer"),C.__ieDyn=1,C}(),eo=function(C){(0,v.ne)(g,C);function g(E,F){var ae=C.call(this,E,F)||this;return(0,T.Z)(g,ae,function(pe,De){pe[Er]=function(ze){De[ci]()},pe[ui]=function(ze){}}),ae}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(La),to=function(C){(0,v.ne)(g,C);function g(E,F){var ae=C.call(this,E,F)||this,pe=!1,De=F[wi]()||{getItem:Mi,setItem:ra},ze=De.getItem,ft=De.setItem;return(0,T.Z)(g,ae,function(_t,Mt){var cn=vr(g[Pi]),Hn=vr(g[qr]),un=_t._set(cn.concat(Hn));un[jt]>g[kr]&&(un[jt]=g[kr]),Le(g[qr],[]),Le(g[Pi],un),_t[Qr]=function(rr){if(_t[Vr]()>=g[kr]){pe||((0,ye.kP)(E,2,67,"Maximum buffer size reached: "+_t[Vr](),!0),pe=!0);return}Mt[Qr](rr),Le(g[Pi],_t._get())},_t[ci]=function(){Mt[ci](),Le(g[Pi],_t._get()),Le(g[qr],[]),pe=!1},_t[Er]=function(rr){Le(g[Pi],_t._set(Sn(rr,_t._get())));var qn=vr(g[qr]);qn instanceof Array&&rr instanceof Array&&(qn=qn.concat(rr),qn[jt]>g[kr]&&((0,ye.kP)(E,1,67,"Sent buffer reached its maximum size: "+qn[jt],!0),qn[jt]=g[kr]),Le(g[qr],qn))},_t[ui]=function(rr){var qn=vr(g[qr]);qn=Sn(rr,qn),Le(g[qr],qn)};function Sn(rr,qn){var cr=[];return(0,S.tO)(qn,function(Rr){!(0,S.mf)(Rr)&&(0,S.UA)(rr,Rr)===-1&&cr[Yr](Rr)}),cr}o(Sn,"_removePayloadsFromBuffer");function vr(rr){var qn=rr;try{qn=F[tr]&&F[tr]()?F[tr]()+"_"+qn:qn;var cr=ze(E,qn);if(cr){var Rr=(0,Xe.xA)().parse(cr);if((0,S.HD)(Rr)&&(Rr=(0,Xe.xA)().parse(Rr)),Rr&&(0,S.kJ)(Rr))return Rr}}catch(qi){(0,ye.kP)(E,1,42," storage key: "+qn+", "+(0,S.jj)(qi),{exception:(0,Xe.eU)(qi)})}return[]}o(vr,"_getBuffer");function Le(rr,qn){var cr=rr;try{cr=F[tr]&&F[tr]()?F[tr]()+"_"+cr:cr;var Rr=JSON[Hr](qn);ft(E,cr,Rr)}catch(qi){ft(E,cr,JSON[Hr]([])),(0,ye.kP)(E,2,41," storage key: "+cr+", "+(0,S.jj)(qi)+". Buffer cleared",{exception:(0,Xe.eU)(qi)})}}o(Le,"_setBuffer")}),ae}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(La),da=function(){function C(g){(0,T.Z)(C,this,function(E){E.serialize=function(De){var ze=F(De,"root");try{return(0,Xe.xA)()[Hr](ze)}catch(ft){(0,ye.kP)(g,1,48,ft&&(0,S.mf)(ft[Lr])?ft[Lr]():"Error serializing object",null,!0)}};function F(De,ze){var ft="__aiCircularRefCheck",_t={};if(!De)return(0,ye.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:ze},!0),_t;if(De[ft])return(0,ye.kP)(g,2,50,"Circular reference detected while serializing object",{name:ze},!0),_t;if(!De.aiDataContract){if(ze==="measurements")_t=pe(De,"number",ze);else if(ze==="properties")_t=pe(De,"string",ze);else if(ze==="tags")_t=pe(De,"string",ze);else if((0,S.kJ)(De))_t=ae(De,ze);else{(0,ye.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ze},!0);try{(0,Xe.xA)()[Hr](De),_t=De}catch(Mt){(0,ye.kP)(g,1,48,Mt&&(0,S.mf)(Mt[Lr])?Mt[Lr]():"Error serializing object",null,!0)}}return _t}return De[ft]=!0,(0,S.rW)(De.aiDataContract,function(Mt,cn){var Hn=(0,S.mf)(cn)?cn()&1:cn&1,un=(0,S.mf)(cn)?cn()&4:cn&4,Sn=cn&2,vr=De[Mt]!==void 0,Le=(0,S.Kn)(De[Mt])&&De[Mt]!==null;if(Hn&&!vr&&!Sn)(0,ye.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:Mt,name:ze});else if(!un){var rr=void 0;Le?Sn?rr=ae(De[Mt],Mt):rr=F(De[Mt],Mt):rr=De[Mt],rr!==void 0&&(_t[Mt]=rr)}}),delete De[ft],_t}o(F,"_serializeObject");function ae(De,ze){var ft;if(De)if(!(0,S.kJ)(De))(0,ye.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ze},!0);else{ft=[];for(var _t=0;_t<De[jt];_t++){var Mt=De[_t],cn=F(Mt,ze+"["+_t+"]");ft[Yr](cn)}}return ft}o(ae,"_serializeArray");function pe(De,ze,ft){var _t;return De&&(_t={},(0,S.rW)(De,function(Mt,cn){if(ze==="string")cn===void 0?_t[Mt]="undefined":cn===null?_t[Mt]="null":cn[Lr]?_t[Mt]=cn[Lr]():_t[Mt]="invalid field: toString() is not defined.";else if(ze==="number")if(cn===void 0)_t[Mt]="undefined";else if(cn===null)_t[Mt]="null";else{var Hn=parseFloat(cn);isNaN(Hn)?_t[Mt]="NaN":_t[Mt]=Hn}else _t[Mt]="invalid field: "+ft+" is of unknown type.",(0,ye.kP)(g,1,_t[Mt],null,!0)})),_t}o(pe,"_serializeStringMap")})}return o(C,"Serializer"),C.__ieDyn=1,C}(),no=8,ka=function(){function C(){}return o(C,"HashCodeScoreGenerator"),C.prototype.getHashCodeScore=function(g){var E=this.getHashCode(g)/C.INT_MAX_VALUE;return E*100},C.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[jt]<no;)g=g.concat(g);for(var E=5381,F=0;F<g[jt];++F)E=(E<<5)+E+g.charCodeAt(F),E=E&E;return Math.abs(E)},C.INT_MAX_VALUE=2147483647,C}(),xa=function(){function C(){var g=this,E=new ka,F=new pn;g[aa]=function(ae){var pe=0;return ae[mt]&&ae[mt][F.userId]?pe=E.getHashCodeScore(ae[mt][F.userId]):ae.ext&&ae.ext.user&&ae.ext.user.id?pe=E[oa](ae.ext.user.id):ae[mt]&&ae[mt][F.operationId]?pe=E.getHashCodeScore(ae[mt][F.operationId]):ae.ext&&ae.ext.telemetryTrace&&ae.ext.telemetryTrace[or]?pe=E.getHashCodeScore(ae.ext.telemetryTrace[or]):pe=Math.random()*100,pe}}return o(C,"SamplingScoreGenerator"),C}(),ro=function(){function C(g,E){this.INT_MAX_VALUE=2147483647;var F=E||(0,ye.vH)(null);(g>100||g<0)&&(F.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[di]=g,this.samplingScoreGenerator=new xa}return o(C,"Sample"),C.prototype.isSampledIn=function(g){var E=this[di],F=!1;return E==null||E>=100||g.baseType===On[fn]?!0:(F=this.samplingScoreGenerator[aa](g)<E,F)},C}(),bi,Ei=65e3;function fa(C){try{return C.responseText}catch(g){}return null}o(fa,"_getResponseText");function Fa(){var C,g,E;return C={endpointUrl:function(){return H+A}},C[br]=function(){return!1},C[ji]=function(){return 15e3},C[Si]=function(){return 102400},C[In]=function(){return!1},C[ln]=function(){return!0},C[wi]=function(){return!1},C[Li]=function(){return!1},C[St]=function(){return!0},C[Vt]=function(){return!1},C[An]=function(){return!1},C[st]=function(){return!1},C[He]=function(){return g},C[tr]=function(){return g},C[Ge]=function(){return 100},C[Et]=function(){return E},C[fi]=function(){return g},C.eventsLimitInMem=function(){return 1e4},C}o(Fa,"_getDefaultAppInsightsChannelConfig");var io=(bi={},bi[on.dataType]=Pa,bi[Mn.dataType]=Za,bi[Qn.dataType]=Qa,bi[$r.dataType]=Xa,bi[Ot.dataType]=Ya,bi[On.dataType]=qa,bi[er.dataType]=Ma,bi),Na=function(C){(0,v.ne)(g,C);function g(){var E=C.call(this)||this;E.priority=1001,E.identifier=y,E._senderConfig=Fa();var F,ae,pe,De,ze,ft,_t,Mt,cn=0,Hn,un,Sn,vr;return(0,T.Z)(g,E,function(Le,rr){uo(),Le.pause=function(){va(),De=!0},Le.resume=function(){De&&(De=!1,ae=null,Le._buffer.size()>Le._senderConfig[Si]()&&Le[he](!0,null,10),Oa())},Le.flush=function(Me,At,Pt){if(Me===void 0&&(Me=!0),!De){va();try{Le[he](Me,null,Pt||1)}catch(Zt){(0,ye.kP)(Le[qe](),1,22,"flush failed, telemetry will not be collected: "+(0,S.jj)(Zt),{exception:(0,Xe.eU)(Zt)})}}},Le.onunloadFlush=function(){if(!De)if((Le._senderConfig[st]()===!1||Le[Nt][St]()===!1)&&(0,Xe.MF)())try{Le[he](!0,qi,2)}catch(Me){(0,ye.kP)(Le[qe](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,S.jj)(Me),{exception:(0,Xe.eU)(Me)})}else Le.flush()},Le.addHeader=function(Me,At){Mt[Me]=At},Le.initialize=function(Me,At,Pt,Zt){Le.isInitialized()&&(0,ye.kP)(Le[qe](),1,28,"Sender is already initialized"),rr.initialize(Me,At,Pt,Zt);var Dn=Le._getTelCtx(),Wn=Le.identifier;ft=new da(At.logger),F=0,ae=null,pe=0,Le[Tt]=null,_t=0;var $n=Le[qe]();vr=(0,ar.jU)((0,Fn.J)("Sender"),At.evtNamespace&&At.evtNamespace()),Sn=Sa(vr);var Dr=Fa();(0,S.rW)(Dr,function(hi,Mr){Le[Nt][hi]=function(){var Ea=Dn.getConfig(Wn,hi,Mr());return!Ea&&hi==="endpointUrl"&&(Ea=Mr()),Ea}});var ii=Le[Nt][ln]()&&!!(Le._senderConfig[wi]()||Ti());Le[fe]=ii?new to($n,Le[Nt]):new eo($n,Le[Nt]),Le._sample=new ro(Le[Nt][Ge](),$n),Lo(Me)||(0,ye.kP)($n,1,100,"Invalid Instrumentation key "+Me[He]),!Lt(Le._senderConfig.endpointUrl())&&Le._senderConfig.customHeaders()&&Le._senderConfig.customHeaders()[jt]>0&&(0,S.tO)(Le[Nt][Et](),function(hi){E.addHeader(hi.header,hi.value)});var Jr=Le[Nt],Nr=null;!Jr[Vt]()&&(0,Xe.cp)()?Nr=Ba:!Jr[Vt]()&&(0,Xe.Z3)()&&(Nr=ga),!Nr&&(0,Xe.JO)()&&(Nr=Mo),Hn=Nr||ga,!Jr[St]()&&(0,Xe.MF)()&&(Nr=ha),Le[Tt]=Nr||ga,!Jr[An]()&&(0,Xe.JO)(!0)?un=ri:(0,Xe.MF)()?un=ha:!Jr[Vt]()&&(0,Xe.cp)()?un=Ba:!Jr[Vt]()&&(0,Xe.Z3)()?un=ga:un=Hn},Le.processTelemetry=function(Me,At){At=Le._getTelCtx(At);var Pt=At[qe]();try{if(Le[Nt][In]())return;if(!Me){(0,ye.kP)(Pt,1,7,"Cannot send empty telemetry");return}if(Me.baseData&&!Me[Vn]){(0,ye.kP)(Pt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Me[Vn]||(Me[Vn]="EventData"),!Le[Tt]){(0,ye.kP)(Pt,1,28,"Sender was not initialized");return}if(qn(Me))Me[m]=Le._sample[di];else{(0,ye.kP)(Pt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Le._sample[di]});return}var Zt=Le[Nt][fi]()||void 0,Dn=Me.iKey||Le[Nt][He](),Wn=g.constructEnvelope(Me,Dn,Pt,Zt);if(!Wn){(0,ye.kP)(Pt,1,47,"Unable to create an AppInsights envelope");return}var $n=!1;if(Me[mt]&&Me[mt][w]&&((0,S.tO)(Me[mt][w],function(Nr){try{Nr&&Nr(Wn)===!1&&($n=!0,(0,ye.jV)(Pt,"Telemetry processor check returns false"))}catch(hi){(0,ye.kP)(Pt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,S.jj)(hi),{exception:(0,Xe.eU)(hi)},!0)}}),delete Me[mt][w]),$n)return;var Dr=ft.serialize(Wn),ii=Le[fe],Jr=ii.size();Jr+Dr[jt]>Le[Nt][Si]()&&(!Sn||Sn[li]())&&Le[he](!0,null,10),ii[Qr](Dr),Oa()}catch(Nr){(0,ye.kP)(Pt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,S.jj)(Nr),{exception:(0,Xe.eU)(Nr)})}Le.processNext(Me,At)},Le[Ui]=function(Me,At,Pt){Me.readyState===4&&cr(Me.status,At,Me.responseURL,Pt,Qi(Me),fa(Me)||Me.response)},Le[he]=function(Me,At,Pt){if(Me===void 0&&(Me=!0),!De)try{var Zt=Le[fe];if(Le[Nt][In]())Zt[ci]();else{if(Zt[Vr]()>0){var Dn=Zt.getItems();Io(Pt||0,Me),At?At.call(E,Dn,Me):Le[Tt](Dn,Me)}pe=+new Date}va()}catch($n){var Wn=(0,Xe.sA)();(!Wn||Wn>9)&&(0,ye.kP)(Le[qe](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,S.jj)($n),{exception:(0,Xe.eU)($n)})}},Le._doTeardown=function(Me,At){Le.onunloadFlush(),Sn.unload(),uo()},Le[sr]=function(Me,At,Pt){(0,ye.kP)(Le[qe](),2,26,"Failed to send telemetry.",{message:At}),Le._buffer[ui](Me)},Le[ni]=function(Me,At){for(var Pt=[],Zt=[],Dn=At.errors.reverse(),Wn=0,$n=Dn;Wn<$n.length;Wn++){var Dr=$n[Wn],ii=Me.splice(Dr.index,1)[0];ba(Dr.statusCode)?Zt[Yr](ii):Pt[Yr](ii)}Me[jt]>0&&Le[Ii](Me,At[ia]),Pt[jt]>0&&Le[sr](Pt,Qi(null,["partial success",At[ia],"of",At.itemsReceived].join(" "))),Zt[jt]>0&&(_a(Zt),(0,ye.kP)(Le[qe](),2,40,"Partial success. Delivered: "+Me[jt]+", Failed: "+Pt[jt]+". Will retry to send "+Zt[jt]+" our of "+At[wa]+" items"))},Le[Ii]=function(Me,At){Le._buffer[ui](Me)},Le._xdrOnLoad=function(Me,At){var Pt=fa(Me);if(Me&&(Pt+""=="200"||Pt===""))F=0,Le[Ii](At,0);else{var Zt=Fr(Pt);Zt&&Zt.itemsReceived&&Zt.itemsReceived>Zt[ia]&&!Le[Nt][Li]()?Le[ni](At,Zt):Le[sr](At,Ha(Me))}};function qn(Me){return Le._sample.isSampledIn(Me)}o(qn,"_isSampledIn");function cr(Me,At,Pt,Zt,Dn,Wn){var $n=null;if(Le._appId||($n=Fr(Wn),$n&&$n.appId&&(Le._appId=$n.appId)),(Me<200||Me>=300)&&Me!==0){if((Me===301||Me===307||Me===308)&&!Rr(Pt)){Le[sr](At,Dn);return}!Le[Nt][Li]()&&ba(Me)?(_a(At),(0,ye.kP)(Le[qe](),2,40,". Response code "+Me+". Will retry to send "+At[jt]+" items.")):Le[sr](At,Dn)}else if(Sn&&!Sn[li]()){if(!Le[Nt][Li]()){var Dr=10;_a(At,Dr),(0,ye.kP)(Le[qe](),2,40,". Offline - Response Code: ".concat(Me,". Offline status: ").concat(!Sn.isOnline(),". Will retry to send ").concat(At.length," items."))}}else Rr(Pt),Me===206?($n||($n=Fr(Wn)),$n&&!Le[Nt][Li]()?Le[ni](At,$n):Le[sr](At,Dn)):(F=0,Le[Ii](At,Zt))}o(cr,"_checkResponsStatus");function Rr(Me){return _t>=10?!1:!(0,S.le)(Me)&&Me!==""&&Me!==Le[Nt][lt]()?(Le[Nt][lt]=function(){return Me},++_t,!0):!1}o(Rr,"_checkAndUpdateEndPointUrl");function qi(Me,At){un?un(Me,!1):ha(Me,At)}o(qi,"_doUnloadSend");function Ni(Me){var At=(0,Xe.jW)(),Pt=Le[fe],Zt=Le[Nt][lt](),Dn=Le._buffer[yi](Me),Wn=new Blob([Dn],{type:"text/plain;charset=UTF-8"}),$n=At.sendBeacon(Zt,Wn);return $n&&(Pt[Er](Me),Le._onSuccess(Me,Me[jt])),$n}o(Ni,"_doBeaconSend");function ha(Me,At){if((0,S.kJ)(Me)&&Me[jt]>0&&!Ni(Me)){for(var Pt=[],Zt=0;Zt<Me[jt];Zt++){var Dn=Me[Zt];Ni([Dn])||Pt[Yr](Dn)}Pt[jt]>0&&(Hn&&Hn(Pt,!0),(0,ye.kP)(Le[qe](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(ha,"_beaconSender");function ga(Me,At){var Pt=new XMLHttpRequest,Zt=Le[Nt][lt]();try{Pt[O]=!0}catch(Wn){}Pt.open("POST",Zt,At),Pt[Ci]("Content-type","application/json"),Lt(Zt)&&Pt[Ci](jn[6],jn[7]),(0,S.tO)((0,S.FY)(Mt),function(Wn){Pt[Ci](Wn,Mt[Wn])}),Pt.onreadystatechange=function(){return Le._xhrReadyStateChange(Pt,Me,Me[jt])},Pt.onerror=function(Wn){return Le[sr](Me,Qi(Pt),Wn)};var Dn=Le._buffer[yi](Me);Pt.send(Dn),Le._buffer[Er](Me)}o(ga,"_xhrSender");function ri(Me,At){if((0,S.kJ)(Me)){for(var Pt=Me[jt],Zt=0;Zt<Me[jt];Zt++)Pt+=Me[Zt][jt];cn+Pt<=Ei?co(Me,!1):(0,Xe.MF)()?ha(Me,At):(Hn&&Hn(Me,!0),(0,ye.kP)(Le[qe](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(ri,"_fetchKeepAliveSender");function Mo(Me,At){co(Me,!0)}o(Mo,"_fetchSender");function co(Me,At){var Pt,Zt=Le[Nt][lt](),Dn=Le._buffer[yi](Me),Wn=new Blob([Dn],{type:"application/json"}),$n=new Headers,Dr=Dn[jt],ii=!1,Jr=!1;Lt(Zt)&&$n.append(jn[6],jn[7]),(0,S.tO)((0,S.FY)(Mt),function(Mr){$n.append(Mr,Mt[Mr])});var Nr=(Pt={method:"POST",headers:$n,body:Wn},Pt[O]=!0,Pt);At||(Nr.keepalive=!0,ii=!0,cn+=Dr);var hi=new Request(Zt,Nr);try{hi[O]=!0}catch(Mr){}Le._buffer[Er](Me);try{fetch(hi).then(function(Mr){At||(cn-=Dr,Dr=0),Jr||(Jr=!0,Mr.ok?Mr.text().then(function(Ea){cr(Mr.status,Me,Mr.url,Me[jt],Mr.statusText,Ea)}):Le[sr](Me,Mr.statusText))}).catch(function(Mr){At||(cn-=Dr,Dr=0),Jr||(Jr=!0,Le[sr](Me,Mr.message))})}catch(Mr){Jr||Le[sr](Me,(0,Xe.eU)(Mr))}ii&&!Jr&&(Jr=!0,Le._onSuccess(Me,Me[jt]))}o(co,"_doFetchSender");function Fr(Me){try{if(Me&&Me!==""){var At=(0,Xe.xA)().parse(Me);if(At&&At.itemsReceived&&At.itemsReceived>=At[ia]&&At.itemsReceived-At.itemsAccepted===At.errors[jt])return At}}catch(Pt){(0,ye.kP)(Le[qe](),1,43,"Cannot parse the response. "+(0,S.jj)(Pt),{response:Me})}return null}o(Fr,"_parseResponse");function _a(Me,At){if(At===void 0&&(At=1),!(!Me||Me[jt]===0)){var Pt=Le[fe];Pt[ui](Me),F++;for(var Zt=0,Dn=Me;Zt<Dn.length;Zt++){var Wn=Dn[Zt];Pt[Qr](Wn)}Po(At),Oa()}}o(_a,"_resendPayload");function Po(Me){var At=10,Pt;if(F<=1)Pt=At;else{var Zt=(Math.pow(2,F)-1)/2,Dn=Math.floor(Math.random()*Zt*At)+1;Dn=Me*Dn,Pt=Math.max(Math.min(Dn,3600),At)}var Wn=(0,S.m6)()+Pt*1e3;ae=Wn}o(Po,"_setRetryTime");function Oa(){if(!ze&&!De){var Me=ae?Math.max(0,ae-(0,S.m6)()):0,At=Math.max(Le[Nt][ji](),Me);ze=setTimeout(function(){ze=null,Le[he](!0,null,1)},At)}}o(Oa,"_setupTimer");function va(){clearTimeout(ze),ze=null,ae=null}o(va,"_clearScheduledTimer");function ba(Me){return Me===401||Me===403||Me===408||Me===429||Me===500||Me===502||Me===503||Me===504}o(ba,"_isRetriable");function Qi(Me,At){return Me?"XMLHttpRequest,Status:"+Me.status+",Response:"+fa(Me)||0||0:At}o(Qi,"_formatErrorMessageXhr");function Ba(Me,At){var Pt=Le[fe],Zt=(0,Xe.Jj)(),Dn=new XDomainRequest;Dn.onload=function(){return Le._xdrOnLoad(Dn,Me)},Dn.onerror=function(ii){return Le[sr](Me,Ha(Dn),ii)};var Wn=Zt&&Zt.location&&Zt.location.protocol||"";if(Le[Nt][lt]().lastIndexOf(Wn,0)!==0){(0,ye.kP)(Le[qe](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Pt[ci]();return}var $n=Le[Nt][lt]().replace(/^(https?:)/,"");Dn.open("POST",$n);var Dr=Pt[yi](Me);Dn.send(Dr),Pt[Er](Me)}o(Ba,"_xdrSender");function Ha(Me,At){return Me?"XDomainRequest,Response:"+fa(Me)||0:At}o(Ha,"_formatErrorMessageXdr");function Oi(){var Me="getNotifyMgr";return Le.core[Me]?Le.core[Me]():Le.core._notificationManager}o(Oi,"_getNotifyMgr");function Io(Me,At){var Pt=Oi();if(Pt&&Pt[xr])try{Pt[xr](Me,At)}catch(Zt){(0,ye.kP)(Le[qe](),1,74,"send request notification failed: "+(0,S.jj)(Zt),{exception:(0,Xe.eU)(Zt)})}}o(Io,"_notifySendRequest");function Lo(Me){var At=(0,S.le)(Me[ki])?!1:Me[ki];if(At)return!0;var Pt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Zt=new RegExp(Pt);return Zt.test(Me[He])}o(Lo,"_validateInstrumentationKey");function uo(){Le[Tt]=null,Le[fe]=null,Le._appId=null,Le._sample=null,Mt={},Sn=null,F=0,ae=null,pe=null,De=!1,ze=null,ft=null,_t=0,cn=0,Hn=null,un=null,vr=null}o(uo,"_initDefaults")}),E}return o(g,"Sender"),g.constructEnvelope=function(E,F,ae,pe){var De;F!==E.iKey&&!(0,S.le)(F)?De=(0,v.uc)((0,v.uc)({},E),{iKey:F}):De=E;var ze=io[De.baseType]||Pa;return ze(ae,De,pe)},g}(Qt.i),ao=";",oo="=";function Ro(C){if(!C)return{};var g=C[J](ao),E=(0,S.Xz)(g,function(ae,pe){var De=pe[J](oo);if(De[q]===2){var ze=De[0][Ee](),ft=De[1];ae[ze]=ft}return ae},{});if((0,S.FY)(E)[q]>0){if(E.endpointsuffix){var F=E.location?E.location+".":"";E[G]=E[G]||"https://"+F+"dc."+E.endpointsuffix}E[G]=E[G]||H}return E}o(Ro,"parseConnectionString");var To={parse:Ro},so=b(5121),Ke="instrumentationKey",Yi="connectionString",sa="diagnosticLogInterval",lo=b(7310),Ai=(0,Ir.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Ca=function(){function C(g){var E=new so.F;((0,S.le)(g)||(0,S.le)(g[Ke])&&(0,S.le)(g[Yi]))&&(0,S._y)("Invalid input configuration"),(0,T.Z)(C,this,function(F){if(g[Yi]){var ae=Ro(g[Yi]),pe=ae.ingestionendpoint;g.endpointUrl=pe?pe+A:g.endpointUrl,g[Ke]=ae.instrumentationkey||g[Ke]}F.config=g,De(),F.initialize=De,F.getSKUDefaults=function(){F.config[sa]=F.config[sa]&&F.config[sa]>0?F.config[sa]:1e4},F.getSKUDefaults(),(0,S.Vb)(F,E,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function De(){E.initialize(F.config,[new Na]),E.pollInternalLogs()}o(De,"_initialize")})}return o(C,"ApplicationInsights"),C.__ieDyn=1,C}()},1679:(ot,l,b)=>{"use strict";b.d(l,{Z:()=>wt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var T,v="undefined",L="constructor",y="prototype",W="function",O="_dynInstFuncs",m="_isDynProxy",w="_dynClass",B="_dynCls$",H="_dynInstChk",A=H,$="_dfOpts",N="_unknown_",J="__proto__",q="_dyn"+J,Ee="__dynProto$Gbl",G="_dynInstProto",X="useBaseInst",Z="setInstFuncs",M=Object,Y=M.getPrototypeOf,x=M.getOwnPropertyNames;function se(){var k;return typeof globalThis!==v&&(k=globalThis),!k&&typeof self!==v&&(k=self),!k&&typeof window!==v&&(k=window),!k&&typeof b.g!==v&&(k=b.g),k||{}}o(se,"_getGlobal");var z=se(),de=z[Ee]||(z[Ee]={o:(T={},T[Z]=!0,T[X]=!0,T),n:1e3});function Ae(k,U){return k&&M[y].hasOwnProperty.call(k,U)}o(Ae,"_hasOwnProperty");function Oe(k){return k&&(k===M[y]||k===Array[y])}o(Oe,"_isObjectOrArrayPrototype");function ie(k){return Oe(k)||k===Function[y]}o(ie,"_isObjectArrayOrFunctionPrototype");function we(k){var U;if(k){if(Y)return Y(k);var te=k[J]||k[y]||(k[L]?k[L][y]:null);U=k[q]||te,Ae(k,q)||(delete k[G],U=k[q]=k[G]||k[q],k[G]=te)}return U}o(we,"_getObjProto");function R(k,U){var te=[];if(x)te=x(k);else for(var ue in k)typeof ue=="string"&&Ae(k,ue)&&te.push(ue);if(te&&te.length>0)for(var Be=0;Be<te.length;Be++)U(te[Be])}o(R,"_forEachProp");function Ve(k,U,te){return U!==L&&typeof k[U]===W&&(te||Ae(k,U))}o(Ve,"_isDynamicCandidate");function me(k){throw new TypeError("DynamicProto: "+k)}o(me,"_throwTypeError");function ge(k){var U={};return R(k,function(te){!U[te]&&Ve(k,te,!1)&&(U[te]=k[te])}),U}o(ge,"_getInstanceFuncs");function K(k,U){for(var te=k.length-1;te>=0;te--)if(k[te]===U)return!0;return!1}o(K,"_hasVisited");function oe(k,U,te,ue){function Be(Te,Ye,Se){var xe=Ye[Se];if(xe[m]&&ue){var dt=Te[O]||{};dt[A]!==!1&&(xe=(dt[Ye[w]]||{})[Se]||xe)}return function(){return xe.apply(Te,arguments)}}o(Be,"_instFuncProxy");var Ie={};R(te,function(Te){Ie[Te]=Be(U,te,Te)});for(var le=we(k),_e=[];le&&!ie(le)&&!K(_e,le);)R(le,function(Te){!Ie[Te]&&Ve(le,Te,!Y)&&(Ie[Te]=Be(U,le,Te))}),_e.push(le),le=we(le);return Ie}o(oe,"_getBaseFuncs");function Re(k,U,te,ue){var Be=null;if(k&&Ae(te,w)){var Ie=k[O]||{};if(Be=(Ie[te[w]]||{})[U],Be||me("Missing ["+U+"] "+W),!Be[H]&&Ie[A]!==!1){for(var le=!Ae(k,U),_e=we(k),Te=[];le&&_e&&!ie(_e)&&!K(Te,_e);){var Ye=_e[U];if(Ye){le=Ye===ue;break}Te.push(_e),_e=we(_e)}try{le&&(k[U]=Be),Be[H]=1}catch(Se){Ie[A]=!1}}}return Be}o(Re,"_getInstFunc");function $e(k,U,te){var ue=U[k];return ue===te&&(ue=we(U)[k]),typeof ue!==W&&me("["+k+"] is not a "+W),ue}o($e,"_getProtoFunc");function re(k,U,te,ue,Be){function Ie(Te,Ye){var Se=o(function(){var xe=Re(this,Ye,Te,Se)||$e(Ye,Te,Se);return xe.apply(this,arguments)},"dynProtoProxy");return Se[m]=1,Se}if(o(Ie,"_createDynamicPrototype"),!Oe(k)){var le=te[O]=te[O]||{},_e=le[U]=le[U]||{};le[A]!==!1&&(le[A]=!!Be),R(te,function(Te){Ve(te,Te,!1)&&te[Te]!==ue[Te]&&(_e[Te]=te[Te],delete te[Te],(!Ae(k,Te)||k[Te]&&!k[Te][m])&&(k[Te]=Ie(k,Te)))})}}o(re,"_populatePrototype");function et(k,U){if(Y){for(var te=[],ue=we(U);ue&&!ie(ue)&&!K(te,ue);){if(ue===k)return!0;te.push(ue),ue=we(ue)}return!1}return!0}o(et,"_checkPrototype");function ut(k,U){return Ae(k,y)?k.name||U||N:((k||{})[L]||{}).name||U||N}o(ut,"_getObjName");function wt(k,U,te,ue){Ae(k,y)||me("theClass is an invalid class definition.");var Be=k[y];et(Be,U)||me("["+ut(k)+"] not in hierarchy of ["+ut(U)+"]");var Ie=null;Ae(Be,w)?Ie=Be[w]:(Ie=B+ut(k,"_")+"$"+de.n,de.n++,Be[w]=Ie);var le=wt[$],_e=!!le[X];_e&&ue&&ue[X]!==void 0&&(_e=!!ue[X]);var Te=ge(U),Ye=oe(Be,U,Te,_e);te(U,Ye);var Se=!!Y&&!!le[Z];Se&&ue&&(Se=!!ue[Z]),re(Be,Ie,U,Te,Se!==!1)}o(wt,"dynamicProto"),wt[$]=de.o},6232:(ot,l,b)=>{"use strict";const T=b(8641),v=b(8692),L=b(1474),y=b(5870),W=o((O,m={})=>{let w=[];if(Array.isArray(O))for(let B of O){let H=W.create(B,m);Array.isArray(H)?w.push(...H):w.push(H)}else w=[].concat(W.create(O,m));return m&&m.expand===!0&&m.nodupes===!0&&(w=[...new Set(w)]),w},"braces");W.parse=(O,m={})=>y(O,m),W.stringify=(O,m={})=>T(typeof O=="string"?W.parse(O,m):O,m),W.compile=(O,m={})=>(typeof O=="string"&&(O=W.parse(O,m)),v(O,m)),W.expand=(O,m={})=>{typeof O=="string"&&(O=W.parse(O,m));let w=L(O,m);return m.noempty===!0&&(w=w.filter(Boolean)),m.nodupes===!0&&(w=[...new Set(w)]),w},W.create=(O,m={})=>O===""||O.length<3?[O]:m.expand!==!0?W.compile(O,m):W.expand(O,m),ot.exports=W},8692:(ot,l,b)=>{"use strict";const T=b(1516),v=b(3596),L=o((y,W={})=>{let O=o((m,w={})=>{let B=v.isInvalidBrace(w),H=m.invalid===!0&&W.escapeInvalid===!0,A=B===!0||H===!0,$=W.escapeInvalid===!0?"\\":"",N="";if(m.isOpen===!0||m.isClose===!0)return $+m.value;if(m.type==="open")return A?$+m.value:"(";if(m.type==="close")return A?$+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":A?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){let J=v.reduce(m.nodes),q=T(...J,{...W,wrap:!1,toRegex:!0});if(q.length!==0)return J.length>1&&q.length>1?`(${q})`:q}if(m.nodes)for(let J of m.nodes)N+=O(J,m);return N},"walk");return O(y)},"compile");ot.exports=L},7007:ot=>{"use strict";ot.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(ot,l,b)=>{"use strict";const T=b(1516),v=b(8641),L=b(3596),y=o((O="",m="",w=!1)=>{let B=[];if(O=[].concat(O),m=[].concat(m),!m.length)return O;if(!O.length)return w?L.flatten(m).map(H=>`{${H}}`):m;for(let H of O)if(Array.isArray(H))for(let A of H)B.push(y(A,m,w));else for(let A of m)w===!0&&typeof A=="string"&&(A=`{${A}}`),B.push(Array.isArray(A)?y(H,A,w):H+A);return L.flatten(B)},"append"),W=o((O,m={})=>{let w=m.rangeLimit===void 0?1e3:m.rangeLimit,B=o((H,A={})=>{H.queue=[];let $=A,N=A.queue;for(;$.type!=="brace"&&$.type!=="root"&&$.parent;)$=$.parent,N=$.queue;if(H.invalid||H.dollar){N.push(y(N.pop(),v(H,m)));return}if(H.type==="brace"&&H.invalid!==!0&&H.nodes.length===2){N.push(y(N.pop(),["{}"]));return}if(H.nodes&&H.ranges>0){let G=L.reduce(H.nodes);if(L.exceedsLimit(...G,m.step,w))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let X=T(...G,m);X.length===0&&(X=v(H,m)),N.push(y(N.pop(),X)),H.nodes=[];return}let J=L.encloseBrace(H),q=H.queue,Ee=H;for(;Ee.type!=="brace"&&Ee.type!=="root"&&Ee.parent;)Ee=Ee.parent,q=Ee.queue;for(let G=0;G<H.nodes.length;G++){let X=H.nodes[G];if(X.type==="comma"&&H.type==="brace"){G===1&&q.push(""),q.push("");continue}if(X.type==="close"){N.push(y(N.pop(),q,J));continue}if(X.value&&X.type!=="open"){q.push(y(q.pop(),X.value));continue}X.nodes&&B(X,H)}return q},"walk");return L.flatten(B(O))},"expand");ot.exports=W},5870:(ot,l,b)=>{"use strict";const T=b(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:L,CHAR_BACKTICK:y,CHAR_COMMA:W,CHAR_DOT:O,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:w,CHAR_LEFT_CURLY_BRACE:B,CHAR_RIGHT_CURLY_BRACE:H,CHAR_LEFT_SQUARE_BRACKET:A,CHAR_RIGHT_SQUARE_BRACKET:$,CHAR_DOUBLE_QUOTE:N,CHAR_SINGLE_QUOTE:J,CHAR_NO_BREAK_SPACE:q,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ee}=b(7007),G=o((X,Z={})=>{if(typeof X!="string")throw new TypeError("Expected a string");let M=Z||{},Y=typeof M.maxLength=="number"?Math.min(v,M.maxLength):v;if(X.length>Y)throw new SyntaxError(`Input length (${X.length}), exceeds max characters (${Y})`);let x={type:"root",input:X,nodes:[]},se=[x],z=x,de=x,Ae=0,Oe=X.length,ie=0,we=0,R,Ve={};const me=o(()=>X[ie++],"advance"),ge=o(K=>{if(K.type==="text"&&de.type==="dot"&&(de.type="text"),de&&de.type==="text"&&K.type==="text"){de.value+=K.value;return}return z.nodes.push(K),K.parent=z,K.prev=de,de=K,K},"push");for(ge({type:"bos"});ie<Oe;)if(z=se[se.length-1],R=me(),!(R===Ee||R===q)){if(R===L){ge({type:"text",value:(Z.keepEscaping?R:"")+me()});continue}if(R===$){ge({type:"text",value:"\\"+R});continue}if(R===A){Ae++;let K=!0,oe;for(;ie<Oe&&(oe=me());){if(R+=oe,oe===A){Ae++;continue}if(oe===L){R+=me();continue}if(oe===$&&(Ae--,Ae===0))break}ge({type:"text",value:R});continue}if(R===m){z=ge({type:"paren",nodes:[]}),se.push(z),ge({type:"text",value:R});continue}if(R===w){if(z.type!=="paren"){ge({type:"text",value:R});continue}z=se.pop(),ge({type:"text",value:R}),z=se[se.length-1];continue}if(R===N||R===J||R===y){let K=R,oe;for(Z.keepQuotes!==!0&&(R="");ie<Oe&&(oe=me());){if(oe===L){R+=oe+me();continue}if(oe===K){Z.keepQuotes===!0&&(R+=oe);break}R+=oe}ge({type:"text",value:R});continue}if(R===B){we++;let K=de.value&&de.value.slice(-1)==="$"||z.dollar===!0;z=ge({type:"brace",open:!0,close:!1,dollar:K,depth:we,commas:0,ranges:0,nodes:[]}),se.push(z),ge({type:"open",value:R});continue}if(R===H){if(z.type!=="brace"){ge({type:"text",value:R});continue}let K="close";z=se.pop(),z.close=!0,ge({type:K,value:R}),we--,z=se[se.length-1];continue}if(R===W&&we>0){if(z.ranges>0){z.ranges=0;let K=z.nodes.shift();z.nodes=[K,{type:"text",value:T(z)}]}ge({type:"comma",value:R}),z.commas++;continue}if(R===O&&we>0&&z.commas===0){let K=z.nodes;if(we===0||K.length===0){ge({type:"text",value:R});continue}if(de.type==="dot"){if(z.range=[],de.value+=R,de.type="range",z.nodes.length!==3&&z.nodes.length!==5){z.invalid=!0,z.ranges=0,de.type="text";continue}z.ranges++,z.args=[];continue}if(de.type==="range"){K.pop();let oe=K[K.length-1];oe.value+=de.value+R,de=oe,z.ranges--;continue}ge({type:"dot",value:R});continue}ge({type:"text",value:R})}do if(z=se.pop(),z.type!=="root"){z.nodes.forEach(Re=>{Re.nodes||(Re.type==="open"&&(Re.isOpen=!0),Re.type==="close"&&(Re.isClose=!0),Re.nodes||(Re.type="text"),Re.invalid=!0)});let K=se[se.length-1],oe=K.nodes.indexOf(z);K.nodes.splice(oe,1,...z.nodes)}while(se.length>0);return ge({type:"eos"}),x},"parse");ot.exports=G},8641:(ot,l,b)=>{"use strict";const T=b(3596);ot.exports=(v,L={})=>{let y=o((W,O={})=>{let m=L.escapeInvalid&&T.isInvalidBrace(O),w=W.invalid===!0&&L.escapeInvalid===!0,B="";if(W.value)return(m||w)&&T.isOpenOrClose(W)?"\\"+W.value:W.value;if(W.value)return W.value;if(W.nodes)for(let H of W.nodes)B+=y(H);return B},"stringify");return y(v)}},3596:(ot,l)=>{"use strict";l.isInteger=b=>typeof b=="number"?Number.isInteger(b):typeof b=="string"&&b.trim()!==""?Number.isInteger(Number(b)):!1,l.find=(b,T)=>b.nodes.find(v=>v.type===T),l.exceedsLimit=(b,T,v=1,L)=>L===!1||!l.isInteger(b)||!l.isInteger(T)?!1:(Number(T)-Number(b))/Number(v)>=L,l.escapeNode=(b,T=0,v)=>{let L=b.nodes[T];!L||(v&&L.type===v||L.type==="open"||L.type==="close")&&L.escaped!==!0&&(L.value="\\"+L.value,L.escaped=!0)},l.encloseBrace=b=>b.type!=="brace"?!1:b.commas>>0+b.ranges>>0==0?(b.invalid=!0,!0):!1,l.isInvalidBrace=b=>b.type!=="brace"?!1:b.invalid===!0||b.dollar?!0:b.commas>>0+b.ranges>>0==0||b.open!==!0||b.close!==!0?(b.invalid=!0,!0):!1,l.isOpenOrClose=b=>b.type==="open"||b.type==="close"?!0:b.open===!0||b.close===!0,l.reduce=b=>b.reduce((T,v)=>(v.type==="text"&&T.push(v.value),v.type==="range"&&(v.type="text"),T),[]),l.flatten=(...b)=>{const T=[],v=o(L=>{for(let y=0;y<L.length;y++){let W=L[y];Array.isArray(W)?v(W,T):W!==void 0&&T.push(W)}return T},"flat");return v(b),T}},1516:(ot,l,b)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const T=b(6529),v=b(2999),L=o(M=>M!==null&&typeof M=="object"&&!Array.isArray(M),"isObject"),y=o(M=>Y=>M===!0?Number(Y):String(Y),"transform"),W=o(M=>typeof M=="number"||typeof M=="string"&&M!=="","isValidValue"),O=o(M=>Number.isInteger(+M),"isNumber"),m=o(M=>{let Y=`${M}`,x=-1;if(Y[0]==="-"&&(Y=Y.slice(1)),Y==="0")return!1;for(;Y[++x]==="0";);return x>0},"zeros"),w=o((M,Y,x)=>typeof M=="string"||typeof Y=="string"?!0:x.stringify===!0,"stringify"),B=o((M,Y,x)=>{if(Y>0){let se=M[0]==="-"?"-":"";se&&(M=M.slice(1)),M=se+M.padStart(se?Y-1:Y,"0")}return x===!1?String(M):M},"pad"),H=o((M,Y)=>{let x=M[0]==="-"?"-":"";for(x&&(M=M.slice(1),Y--);M.length<Y;)M="0"+M;return x?"-"+M:M},"toMaxLen"),A=o((M,Y)=>{M.negatives.sort((Ae,Oe)=>Ae<Oe?-1:Ae>Oe?1:0),M.positives.sort((Ae,Oe)=>Ae<Oe?-1:Ae>Oe?1:0);let x=Y.capture?"":"?:",se="",z="",de;return M.positives.length&&(se=M.positives.join("|")),M.negatives.length&&(z=`-(${x}${M.negatives.join("|")})`),se&&z?de=`${se}|${z}`:de=se||z,Y.wrap?`(${x}${de})`:de},"toSequence"),$=o((M,Y,x,se)=>{if(x)return v(M,Y,{wrap:!1,...se});let z=String.fromCharCode(M);if(M===Y)return z;let de=String.fromCharCode(Y);return`[${z}-${de}]`},"toRange"),N=o((M,Y,x)=>{if(Array.isArray(M)){let se=x.wrap===!0,z=x.capture?"":"?:";return se?`(${z}${M.join("|")})`:M.join("|")}return v(M,Y,x)},"toRegex"),J=o((...M)=>new RangeError("Invalid range arguments: "+T.inspect(...M)),"rangeError"),q=o((M,Y,x)=>{if(x.strictRanges===!0)throw J([M,Y]);return[]},"invalidRange"),Ee=o((M,Y)=>{if(Y.strictRanges===!0)throw new TypeError(`Expected step "${M}" to be a number`);return[]},"invalidStep"),G=o((M,Y,x=1,se={})=>{let z=Number(M),de=Number(Y);if(!Number.isInteger(z)||!Number.isInteger(de)){if(se.strictRanges===!0)throw J([M,Y]);return[]}z===0&&(z=0),de===0&&(de=0);let Ae=z>de,Oe=String(M),ie=String(Y),we=String(x);x=Math.max(Math.abs(x),1);let R=m(Oe)||m(ie)||m(we),Ve=R?Math.max(Oe.length,ie.length,we.length):0,me=R===!1&&w(M,Y,se)===!1,ge=se.transform||y(me);if(se.toRegex&&x===1)return $(H(M,Ve),H(Y,Ve),!0,se);let K={negatives:[],positives:[]},oe=o(re=>K[re<0?"negatives":"positives"].push(Math.abs(re)),"push"),Re=[],$e=0;for(;Ae?z>=de:z<=de;)se.toRegex===!0&&x>1?oe(z):Re.push(B(ge(z,$e),Ve,me)),z=Ae?z-x:z+x,$e++;return se.toRegex===!0?x>1?A(K,se):N(Re,null,{wrap:!1,...se}):Re},"fillNumbers"),X=o((M,Y,x=1,se={})=>{if(!O(M)&&M.length>1||!O(Y)&&Y.length>1)return q(M,Y,se);let z=se.transform||(me=>String.fromCharCode(me)),de=`${M}`.charCodeAt(0),Ae=`${Y}`.charCodeAt(0),Oe=de>Ae,ie=Math.min(de,Ae),we=Math.max(de,Ae);if(se.toRegex&&x===1)return $(ie,we,!1,se);let R=[],Ve=0;for(;Oe?de>=Ae:de<=Ae;)R.push(z(de,Ve)),de=Oe?de-x:de+x,Ve++;return se.toRegex===!0?N(R,null,{wrap:!1,options:se}):R},"fillLetters"),Z=o((M,Y,x,se={})=>{if(Y==null&&W(M))return[M];if(!W(M)||!W(Y))return q(M,Y,se);if(typeof x=="function")return Z(M,Y,1,{transform:x});if(L(x))return Z(M,Y,0,x);let z={...se};return z.capture===!0&&(z.wrap=!0),x=x||z.step||1,O(x)?O(M)&&O(Y)?G(M,Y,x,z):X(M,Y,Math.max(Math.abs(x),1),z):x!=null&&!L(x)?Ee(x,z):Z(M,Y,1,x)},"fill");ot.exports=Z},3338:ot=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */ot.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(ot,l,b)=>{ot=b.nmd(ot);var T=200,v="__lodash_hash_undefined__",L=1,y=2,W=9007199254740991,O="[object Arguments]",m="[object Array]",w="[object AsyncFunction]",B="[object Boolean]",H="[object Date]",A="[object Error]",$="[object Function]",N="[object GeneratorFunction]",J="[object Map]",q="[object Number]",Ee="[object Null]",G="[object Object]",X="[object Promise]",Z="[object Proxy]",M="[object RegExp]",Y="[object Set]",x="[object String]",se="[object Symbol]",z="[object Undefined]",de="[object WeakMap]",Ae="[object ArrayBuffer]",Oe="[object DataView]",ie="[object Float32Array]",we="[object Float64Array]",R="[object Int8Array]",Ve="[object Int16Array]",me="[object Int32Array]",ge="[object Uint8Array]",K="[object Uint8ClampedArray]",oe="[object Uint16Array]",Re="[object Uint32Array]",$e=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,et=/^(?:0|[1-9]\d*)$/,ut={};ut[ie]=ut[we]=ut[R]=ut[Ve]=ut[me]=ut[ge]=ut[K]=ut[oe]=ut[Re]=!0,ut[O]=ut[m]=ut[Ae]=ut[B]=ut[Oe]=ut[H]=ut[A]=ut[$]=ut[J]=ut[q]=ut[G]=ut[M]=ut[Y]=ut[x]=ut[de]=!1;var wt=typeof b.g=="object"&&b.g&&b.g.Object===Object&&b.g,k=typeof self=="object"&&self&&self.Object===Object&&self,U=wt||k||Function("return this")(),te=l&&!l.nodeType&&l,ue=te&&!0&&ot&&!ot.nodeType&&ot,Be=ue&&ue.exports===te,Ie=Be&&wt.process,le=function(){try{return Ie&&Ie.binding&&Ie.binding("util")}catch(I){}}(),_e=le&&le.isTypedArray;function Te(I,j){for(var Ue=-1,tt=I==null?0:I.length,Rt=0,Ft=[];++Ue<tt;){var pn=I[Ue];j(pn,Ue,I)&&(Ft[Rt++]=pn)}return Ft}o(Te,"arrayFilter");function Ye(I,j){for(var Ue=-1,tt=j.length,Rt=I.length;++Ue<tt;)I[Rt+Ue]=j[Ue];return I}o(Ye,"arrayPush");function Se(I,j){for(var Ue=-1,tt=I==null?0:I.length;++Ue<tt;)if(j(I[Ue],Ue,I))return!0;return!1}o(Se,"arraySome");function xe(I,j){for(var Ue=-1,tt=Array(I);++Ue<I;)tt[Ue]=j(Ue);return tt}o(xe,"baseTimes");function dt(I){return function(j){return I(j)}}o(dt,"baseUnary");function nt(I,j){return I.has(j)}o(nt,"cacheHas");function Ce(I,j){return I==null?void 0:I[j]}o(Ce,"getValue");function S(I){var j=-1,Ue=Array(I.size);return I.forEach(function(tt,Rt){Ue[++j]=[Rt,tt]}),Ue}o(S,"mapToArray");function ye(I,j){return function(Ue){return I(j(Ue))}}o(ye,"overArg");function Xe(I){var j=-1,Ue=Array(I.size);return I.forEach(function(tt){Ue[++j]=tt}),Ue}o(Xe,"setToArray");var Kt=Array.prototype,Nn=Function.prototype,Rn=Object.prototype,_n=U["__core-js_shared__"],dr=Nn.toString,ir=Rn.hasOwnProperty,pr=function(){var I=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),mr=Rn.toString,fr=RegExp("^"+dr.call(ir).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Be?U.Buffer:void 0,zt=U.Symbol,tn=U.Uint8Array,Yt=Rn.propertyIsEnumerable,on=Kt.splice,Mn=zt?zt.toStringTag:void 0,Kn=Object.getOwnPropertySymbols,Gn=vt?vt.isBuffer:void 0,hr=ye(Object.keys,Object),Pr=ei(U,"DataView"),Wr=ei(U,"Map"),Qn=ei(U,"Promise"),$r=ei(U,"Set"),Br=ei(U,"WeakMap"),vn=ei(Object,"create"),Zn=Lt(Pr),Cr=Lt(Wr),gr=Lt(Qn),oi=Lt($r),gi=Lt(Br),yr=zt?zt.prototype:void 0,P=yr?yr.valueOf:void 0;function ce(I){var j=-1,Ue=I==null?0:I.length;for(this.clear();++j<Ue;){var tt=I[j];this.set(tt[0],tt[1])}}o(ce,"Hash");function be(){this.__data__=vn?vn(null):{},this.size=0}o(be,"hashClear");function Fe(I){var j=this.has(I)&&delete this.__data__[I];return this.size-=j?1:0,j}o(Fe,"hashDelete");function Ze(I){var j=this.__data__;if(vn){var Ue=j[I];return Ue===v?void 0:Ue}return ir.call(j,I)?j[I]:void 0}o(Ze,"hashGet");function Qe(I){var j=this.__data__;return vn?j[I]!==void 0:ir.call(j,I)}o(Qe,"hashHas");function ht(I,j){var Ue=this.__data__;return this.size+=this.has(I)?0:1,Ue[I]=vn&&j===void 0?v:j,this}o(ht,"hashSet"),ce.prototype.clear=be,ce.prototype.delete=Fe,ce.prototype.get=Ze,ce.prototype.has=Qe,ce.prototype.set=ht;function Dt(I){var j=-1,Ue=I==null?0:I.length;for(this.clear();++j<Ue;){var tt=I[j];this.set(tt[0],tt[1])}}o(Dt,"ListCache");function ct(){this.__data__=[],this.size=0}o(ct,"listCacheClear");function qt(I){var j=this.__data__,Ue=kn(j,I);if(Ue<0)return!1;var tt=j.length-1;return Ue==tt?j.pop():on.call(j,Ue,1),--this.size,!0}o(qt,"listCacheDelete");function bt(I){var j=this.__data__,Ue=kn(j,I);return Ue<0?void 0:j[Ue][1]}o(bt,"listCacheGet");function Ot(I){return kn(this.__data__,I)>-1}o(Ot,"listCacheHas");function Ht(I,j){var Ue=this.__data__,tt=kn(Ue,I);return tt<0?(++this.size,Ue.push([I,j])):Ue[tt][1]=j,this}o(Ht,"listCacheSet"),Dt.prototype.clear=ct,Dt.prototype.delete=qt,Dt.prototype.get=bt,Dt.prototype.has=Ot,Dt.prototype.set=Ht;function kt(I){var j=-1,Ue=I==null?0:I.length;for(this.clear();++j<Ue;){var tt=I[j];this.set(tt[0],tt[1])}}o(kt,"MapCache");function xt(){this.size=0,this.__data__={hash:new ce,map:new(Wr||Dt),string:new ce}}o(xt,"mapCacheClear");function On(I){var j=Zr(this,I).delete(I);return this.size-=j?1:0,j}o(On,"mapCacheDelete");function En(I){return Zr(this,I).get(I)}o(En,"mapCacheGet");function lr(I){return Zr(this,I).has(I)}o(lr,"mapCacheHas");function nr(I,j){var Ue=Zr(this,I),tt=Ue.size;return Ue.set(I,j),this.size+=Ue.size==tt?0:1,this}o(nr,"mapCacheSet"),kt.prototype.clear=xt,kt.prototype.delete=On,kt.prototype.get=En,kt.prototype.has=lr,kt.prototype.set=nr;function ar(I){var j=-1,Ue=I==null?0:I.length;for(this.__data__=new kt;++j<Ue;)this.add(I[j])}o(ar,"SetCache");function Kr(I){return this.__data__.set(I,v),this}o(Kr,"setCacheAdd");function Ir(I){return this.__data__.has(I)}o(Ir,"setCacheHas"),ar.prototype.add=ar.prototype.push=Kr,ar.prototype.has=Ir;function jn(I){var j=this.__data__=new Dt(I);this.size=j.size}o(jn,"Stack");function vi(){this.__data__=new Dt,this.size=0}o(vi,"stackClear");function Jt(I){var j=this.__data__,Ue=j.delete(I);return this.size=j.size,Ue}o(Jt,"stackDelete");function zn(I){return this.__data__.get(I)}o(zn,"stackGet");function Ln(I){return this.__data__.has(I)}o(Ln,"stackHas");function nn(I,j){var Ue=this.__data__;if(Ue instanceof Dt){var tt=Ue.__data__;if(!Wr||tt.length<T-1)return tt.push([I,j]),this.size=++Ue.size,this;Ue=this.__data__=new kt(tt)}return Ue.set(I,j),this.size=Ue.size,this}o(nn,"stackSet"),jn.prototype.clear=vi,jn.prototype.delete=Jt,jn.prototype.get=zn,jn.prototype.has=Ln,jn.prototype.set=nn;function Bn(I,j){var Ue=en(I),tt=!Ue&&Ct(I),Rt=!Ue&&!tt&&hn(I),Ft=!Ue&&!tt&&!Rt&&Qt(I),pn=Ue||tt||Rt||Ft,mn=pn?xe(I.length,String):[],Wt=mn.length;for(var gn in I)(j||ir.call(I,gn))&&!(pn&&(gn=="length"||Rt&&(gn=="offset"||gn=="parent")||Ft&&(gn=="buffer"||gn=="byteLength"||gn=="byteOffset")||Ji(gn,Wt)))&&mn.push(gn);return mn}o(Bn,"arrayLikeKeys");function kn(I,j){for(var Ue=I.length;Ue--;)if(Gt(I[Ue][0],j))return Ue;return-1}o(kn,"assocIndexOf");function wr(I,j,Ue){var tt=j(I);return en(I)?tt:Ye(tt,Ue(I))}o(wr,"baseGetAllKeys");function Gr(I){return I==null?I===void 0?z:Ee:Mn&&Mn in Object(I)?ca(I):at(I)}o(Gr,"baseGetTag");function pi(I){return Fn(I)&&Gr(I)==O}o(pi,"baseIsArguments");function mi(I,j,Ue,tt,Rt){return I===j?!0:I==null||j==null||!Fn(I)&&!Fn(j)?I!==I&&j!==j:si(I,j,Ue,tt,mi,Rt)}o(mi,"baseIsEqual");function si(I,j,Ue,tt,Rt,Ft){var pn=en(I),mn=en(j),Wt=pn?m:ti(I),gn=mn?m:ti(j);Wt=Wt==O?G:Wt,gn=gn==O?G:gn;var wn=Wt==G,Bt=gn==G,mt=Wt==gn;if(mt&&hn(I)){if(!hn(j))return!1;pn=!0,wn=!1}if(mt&&!wn)return Ft||(Ft=new jn),pn||Qt(I)?na(I,j,Ue,tt,Rt,Ft):Mi(I,j,Wt,Ue,tt,Rt,Ft);if(!(Ue&L)){var xn=wn&&ir.call(I,"__wrapped__"),Tn=Bt&&ir.call(j,"__wrapped__");if(xn||Tn){var Cn=xn?I.value():I,or=Tn?j.value():j;return Ft||(Ft=new jn),Rt(Cn,or,Ue,tt,Ft)}}return mt?(Ft||(Ft=new jn),ra(I,j,Ue,tt,Rt,Ft)):!1}o(si,"baseIsEqualDeep");function zr(I){if(!er(I)||rt(I))return!1;var j=Un(I)?fr:re;return j.test(Lt(I))}o(zr,"baseIsNative");function ta(I){return Fn(I)&&Yn(I.length)&&!!ut[Gr(I)]}o(ta,"baseIsTypedArray");function Ti(I){if(!pt(I))return hr(I);var j=[];for(var Ue in Object(I))ir.call(I,Ue)&&Ue!="constructor"&&j.push(Ue);return j}o(Ti,"baseKeys");function na(I,j,Ue,tt,Rt,Ft){var pn=Ue&L,mn=I.length,Wt=j.length;if(mn!=Wt&&!(pn&&Wt>mn))return!1;var gn=Ft.get(I);if(gn&&Ft.get(j))return gn==j;var wn=-1,Bt=!0,mt=Ue&y?new ar:void 0;for(Ft.set(I,j),Ft.set(j,I);++wn<mn;){var xn=I[wn],Tn=j[wn];if(tt)var Cn=pn?tt(Tn,xn,wn,j,I,Ft):tt(xn,Tn,wn,I,j,Ft);if(Cn!==void 0){if(Cn)continue;Bt=!1;break}if(mt){if(!Se(j,function(or,jt){if(!nt(mt,jt)&&(xn===or||Rt(xn,or,Ue,tt,Ft)))return mt.push(jt)})){Bt=!1;break}}else if(!(xn===Tn||Rt(xn,Tn,Ue,tt,Ft))){Bt=!1;break}}return Ft.delete(I),Ft.delete(j),Bt}o(na,"equalArrays");function Mi(I,j,Ue,tt,Rt,Ft,pn){switch(Ue){case Oe:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case Ae:return!(I.byteLength!=j.byteLength||!Ft(new tn(I),new tn(j)));case B:case H:case q:return Gt(+I,+j);case A:return I.name==j.name&&I.message==j.message;case M:case x:return I==j+"";case J:var mn=S;case Y:var Wt=tt&L;if(mn||(mn=Xe),I.size!=j.size&&!Wt)return!1;var gn=pn.get(I);if(gn)return gn==j;tt|=y,pn.set(I,j);var wn=na(mn(I),mn(j),tt,Rt,Ft,pn);return pn.delete(I),wn;case se:if(P)return P.call(I)==P.call(j)}return!1}o(Mi,"equalByTag");function ra(I,j,Ue,tt,Rt,Ft){var pn=Ue&L,mn=Xr(I),Wt=mn.length,gn=Xr(j),wn=gn.length;if(Wt!=wn&&!pn)return!1;for(var Bt=Wt;Bt--;){var mt=mn[Bt];if(!(pn?mt in j:ir.call(j,mt)))return!1}var xn=Ft.get(I);if(xn&&Ft.get(j))return xn==j;var Tn=!0;Ft.set(I,j),Ft.set(j,I);for(var Cn=pn;++Bt<Wt;){mt=mn[Bt];var or=I[mt],jt=j[mt];if(tt)var Hr=pn?tt(jt,or,mt,j,I,Ft):tt(or,jt,mt,I,j,Ft);if(!(Hr===void 0?or===jt||Rt(or,jt,Ue,tt,Ft):Hr)){Tn=!1;break}Cn||(Cn=mt=="constructor")}if(Tn&&!Cn){var _r=I.constructor,fn=j.constructor;_r!=fn&&"constructor"in I&&"constructor"in j&&!(typeof _r=="function"&&_r instanceof _r&&typeof fn=="function"&&fn instanceof fn)&&(Tn=!1)}return Ft.delete(I),Ft.delete(j),Tn}o(ra,"equalObjects");function Xr(I){return wr(I,sn,Hi)}o(Xr,"getAllKeys");function Zr(I,j){var Ue=I.__data__;return Ne(j)?Ue[typeof j=="string"?"string":"hash"]:Ue.map}o(Zr,"getMapData");function ei(I,j){var Ue=Ce(I,j);return zr(Ue)?Ue:void 0}o(ei,"getNative");function ca(I){var j=ir.call(I,Mn),Ue=I[Mn];try{I[Mn]=void 0;var tt=!0}catch(Ft){}var Rt=mr.call(I);return tt&&(j?I[Mn]=Ue:delete I[Mn]),Rt}o(ca,"getRawTag");var Hi=Kn?function(I){return I==null?[]:(I=Object(I),Te(Kn(I),function(j){return Yt.call(I,j)}))}:rn,ti=Gr;(Pr&&ti(new Pr(new ArrayBuffer(1)))!=Oe||Wr&&ti(new Wr)!=J||Qn&&ti(Qn.resolve())!=X||$r&&ti(new $r)!=Y||Br&&ti(new Br)!=de)&&(ti=o(function(I){var j=Gr(I),Ue=j==G?I.constructor:void 0,tt=Ue?Lt(Ue):"";if(tt)switch(tt){case Zn:return Oe;case Cr:return J;case gr:return X;case oi:return Y;case gi:return de}return j},"getTag"));function Ji(I,j){return j=j==null?W:j,!!j&&(typeof I=="number"||et.test(I))&&I>-1&&I%1==0&&I<j}o(Ji,"isIndex");function Ne(I){var j=typeof I;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?I!=="__proto__":I===null}o(Ne,"isKeyable");function rt(I){return!!pr&&pr in I}o(rt,"isMasked");function pt(I){var j=I&&I.constructor,Ue=typeof j=="function"&&j.prototype||Rn;return I===Ue}o(pt,"isPrototype");function at(I){return mr.call(I)}o(at,"objectToString");function Lt(I){if(I!=null){try{return dr.call(I)}catch(j){}try{return I+""}catch(j){}}return""}o(Lt,"toSource");function Gt(I,j){return I===j||I!==I&&j!==j}o(Gt,"eq");var Ct=pi(function(){return arguments}())?pi:function(I){return Fn(I)&&ir.call(I,"callee")&&!Yt.call(I,"callee")},en=Array.isArray;function Ut(I){return I!=null&&Yn(I.length)&&!Un(I)}o(Ut,"isArrayLike");var hn=Gn||yn;function Pn(I,j){return mi(I,j)}o(Pn,"isEqual");function Un(I){if(!er(I))return!1;var j=Gr(I);return j==$||j==N||j==w||j==Z}o(Un,"isFunction");function Yn(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=W}o(Yn,"isLength");function er(I){var j=typeof I;return I!=null&&(j=="object"||j=="function")}o(er,"isObject");function Fn(I){return I!=null&&typeof I=="object"}o(Fn,"isObjectLike");var Qt=_e?dt(_e):ta;function sn(I){return Ut(I)?Bn(I):Ti(I)}o(sn,"keys");function rn(){return[]}o(rn,"stubArray");function yn(){return!1}o(yn,"stubFalse"),ot.exports=Pn},919:(ot,l,b)=>{"use strict";const T=b(6391),v=b(6232),L=b(6796),y=b(292),W=o(m=>m===""||m==="./","isEmptyString"),O=o((m,w,B)=>{w=[].concat(w),m=[].concat(m);let H=new Set,A=new Set,$=new Set,N=0,J=o(G=>{$.add(G.output),B&&B.onResult&&B.onResult(G)},"onResult");for(let G=0;G<w.length;G++){let X=L(String(w[G]),{...B,onResult:J},!0),Z=X.state.negated||X.state.negatedExtglob;Z&&N++;for(let M of m){let Y=X(M,!0);!(Z?!Y.isMatch:Y.isMatch)||(Z?H.add(Y.output):(H.delete(Y.output),A.add(Y.output)))}}let Ee=(N===w.length?[...$]:[...A]).filter(G=>!H.has(G));if(B&&Ee.length===0){if(B.failglob===!0)throw new Error(`No matches found for "${w.join(", ")}"`);if(B.nonull===!0||B.nullglob===!0)return B.unescape?w.map(G=>G.replace(/\\/g,"")):w}return Ee},"micromatch");O.match=O,O.matcher=(m,w)=>L(m,w),O.isMatch=(m,w,B)=>L(w,B)(m),O.any=O.isMatch,O.not=(m,w,B={})=>{w=[].concat(w).map(String);let H=new Set,A=[],$=o(J=>{B.onResult&&B.onResult(J),A.push(J.output)},"onResult"),N=new Set(O(m,w,{...B,onResult:$}));for(let J of A)N.has(J)||H.add(J);return[...H]},O.contains=(m,w,B)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${T.inspect(m)}"`);if(Array.isArray(w))return w.some(H=>O.contains(m,H,B));if(typeof w=="string"){if(W(m)||W(w))return!1;if(m.includes(w)||m.startsWith("./")&&m.slice(2).includes(w))return!0}return O.isMatch(m,w,{...B,contains:!0})},O.matchKeys=(m,w,B)=>{if(!y.isObject(m))throw new TypeError("Expected the first argument to be an object");let H=O(Object.keys(m),w,B),A={};for(let $ of H)A[$]=m[$];return A},O.some=(m,w,B)=>{let H=[].concat(m);for(let A of[].concat(w)){let $=L(String(A),B);if(H.some(N=>$(N)))return!0}return!1},O.every=(m,w,B)=>{let H=[].concat(m);for(let A of[].concat(w)){let $=L(String(A),B);if(!H.every(N=>$(N)))return!1}return!0},O.all=(m,w,B)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${T.inspect(m)}"`);return[].concat(w).every(H=>L(H,B)(m))},O.capture=(m,w,B)=>{let H=y.isWindows(B),$=L.makeRe(String(m),{...B,capture:!0}).exec(H?y.toPosixSlashes(w):w);if($)return $.slice(1).map(N=>N===void 0?"":N)},O.makeRe=(...m)=>L.makeRe(...m),O.scan=(...m)=>L.scan(...m),O.parse=(m,w)=>{let B=[];for(let H of[].concat(m||[]))for(let A of v(String(H),w))B.push(L.parse(A,w));return B},O.braces=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return w&&w.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,w)},O.braceExpand=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return O.braces(m,{...w,expand:!0})},ot.exports=O},6796:(ot,l,b)=>{"use strict";ot.exports=b(5761)},3889:(ot,l,b)=>{"use strict";const T=b(6470),v="\\\\/",L=`[^${v}]`,y="\\.",W="\\+",O="\\?",m="\\/",w="(?=.)",B="[^/]",H=`(?:${m}|$)`,A=`(?:^|${m})`,$=`${y}{1,2}${H}`,N=`(?!${y})`,J=`(?!${A}${$})`,q=`(?!${y}{0,1}${H})`,Ee=`(?!${$})`,G=`[^.${m}]`,X=`${B}*?`,Z={DOT_LITERAL:y,PLUS_LITERAL:W,QMARK_LITERAL:O,SLASH_LITERAL:m,ONE_CHAR:w,QMARK:B,END_ANCHOR:H,DOTS_SLASH:$,NO_DOT:N,NO_DOTS:J,NO_DOT_SLASH:q,NO_DOTS_SLASH:Ee,QMARK_NO_DOT:G,STAR:X,START_ANCHOR:A},M={...Z,SLASH_LITERAL:`[${v}]`,QMARK:L,STAR:`${L}*?`,DOTS_SLASH:`${y}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${y})`,NO_DOTS:`(?!(?:^|[${v}])${y}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${y}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${y}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},Y={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ot.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Y,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:T.sep,extglobChars(x){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${x.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(x){return x===!0?M:Z}}},3969:(ot,l,b)=>{"use strict";const T=b(3889),v=b(292),{MAX_LENGTH:L,POSIX_REGEX_SOURCE:y,REGEX_NON_SPECIAL_CHARS:W,REGEX_SPECIAL_CHARS_BACKREF:O,REPLACEMENTS:m}=T,w=o((A,$)=>{if(typeof $.expandRange=="function")return $.expandRange(...A,$);A.sort();const N=`[${A.join("-")}]`;try{new RegExp(N)}catch(J){return A.map(q=>v.escapeRegex(q)).join("..")}return N},"expandRange"),B=o((A,$)=>`Missing ${A}: "${$}" - use "\\\\${$}" to match literal characters`,"syntaxError"),H=o((A,$)=>{if(typeof A!="string")throw new TypeError("Expected a string");A=m[A]||A;const N={...$},J=typeof N.maxLength=="number"?Math.min(L,N.maxLength):L;let q=A.length;if(q>J)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${J}`);const Ee={type:"bos",value:"",output:N.prepend||""},G=[Ee],X=N.capture?"":"?:",Z=v.isWindows($),M=T.globChars(Z),Y=T.extglobChars(M),{DOT_LITERAL:x,PLUS_LITERAL:se,SLASH_LITERAL:z,ONE_CHAR:de,DOTS_SLASH:Ae,NO_DOT:Oe,NO_DOT_SLASH:ie,NO_DOTS_SLASH:we,QMARK:R,QMARK_NO_DOT:Ve,STAR:me,START_ANCHOR:ge}=M,K=o(Ce=>`(${X}(?:(?!${ge}${Ce.dot?Ae:x}).)*?)`,"globstar"),oe=N.dot?"":Oe,Re=N.dot?R:Ve;let $e=N.bash===!0?K(N):me;N.capture&&($e=`(${$e})`),typeof N.noext=="boolean"&&(N.noextglob=N.noext);const re={input:A,index:-1,start:0,dot:N.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:G};A=v.removePrefix(A,re),q=A.length;const et=[],ut=[],wt=[];let k=Ee,U;const te=o(()=>re.index===q-1,"eos"),ue=re.peek=(Ce=1)=>A[re.index+Ce],Be=re.advance=()=>A[++re.index]||"",Ie=o(()=>A.slice(re.index+1),"remaining"),le=o((Ce="",S=0)=>{re.consumed+=Ce,re.index+=S},"consume"),_e=o(Ce=>{re.output+=Ce.output!=null?Ce.output:Ce.value,le(Ce.value)},"append"),Te=o(()=>{let Ce=1;for(;ue()==="!"&&(ue(2)!=="("||ue(3)==="?");)Be(),re.start++,Ce++;return Ce%2==0?!1:(re.negated=!0,re.start++,!0)},"negate"),Ye=o(Ce=>{re[Ce]++,wt.push(Ce)},"increment"),Se=o(Ce=>{re[Ce]--,wt.pop()},"decrement"),xe=o(Ce=>{if(k.type==="globstar"){const S=re.braces>0&&(Ce.type==="comma"||Ce.type==="brace"),ye=Ce.extglob===!0||et.length&&(Ce.type==="pipe"||Ce.type==="paren");Ce.type!=="slash"&&Ce.type!=="paren"&&!S&&!ye&&(re.output=re.output.slice(0,-k.output.length),k.type="star",k.value="*",k.output=$e,re.output+=k.output)}if(et.length&&Ce.type!=="paren"&&(et[et.length-1].inner+=Ce.value),(Ce.value||Ce.output)&&_e(Ce),k&&k.type==="text"&&Ce.type==="text"){k.value+=Ce.value,k.output=(k.output||"")+Ce.value;return}Ce.prev=k,G.push(Ce),k=Ce},"push"),dt=o((Ce,S)=>{const ye={...Y[S],conditions:1,inner:""};ye.prev=k,ye.parens=re.parens,ye.output=re.output;const Xe=(N.capture?"(":"")+ye.open;Ye("parens"),xe({type:Ce,value:S,output:re.output?"":de}),xe({type:"paren",extglob:!0,value:Be(),output:Xe}),et.push(ye)},"extglobOpen"),nt=o(Ce=>{let S=Ce.close+(N.capture?")":""),ye;if(Ce.type==="negate"){let Xe=$e;if(Ce.inner&&Ce.inner.length>1&&Ce.inner.includes("/")&&(Xe=K(N)),(Xe!==$e||te()||/^\)+$/.test(Ie()))&&(S=Ce.close=`)$))${Xe}`),Ce.inner.includes("*")&&(ye=Ie())&&/^\.[^\\/.]+$/.test(ye)){const Kt=H(ye,{...$,fastpaths:!1}).output;S=Ce.close=`)${Kt})${Xe})`}Ce.prev.type==="bos"&&(re.negatedExtglob=!0)}xe({type:"paren",extglob:!0,value:U,output:S}),Se("parens")},"extglobClose");if(N.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(A)){let Ce=!1,S=A.replace(O,(ye,Xe,Kt,Nn,Rn,_n)=>Nn==="\\"?(Ce=!0,ye):Nn==="?"?Xe?Xe+Nn+(Rn?R.repeat(Rn.length):""):_n===0?Re+(Rn?R.repeat(Rn.length):""):R.repeat(Kt.length):Nn==="."?x.repeat(Kt.length):Nn==="*"?Xe?Xe+Nn+(Rn?$e:""):$e:Xe?ye:`\\${ye}`);return Ce===!0&&(N.unescape===!0?S=S.replace(/\\/g,""):S=S.replace(/\\+/g,ye=>ye.length%2==0?"\\\\":ye?"\\":"")),S===A&&N.contains===!0?(re.output=A,re):(re.output=v.wrapOutput(S,re,$),re)}for(;!te();){if(U=Be(),U==="\0")continue;if(U==="\\"){const ye=ue();if(ye==="/"&&N.bash!==!0||ye==="."||ye===";")continue;if(!ye){U+="\\",xe({type:"text",value:U});continue}const Xe=/^\\+/.exec(Ie());let Kt=0;if(Xe&&Xe[0].length>2&&(Kt=Xe[0].length,re.index+=Kt,Kt%2!=0&&(U+="\\")),N.unescape===!0?U=Be():U+=Be(),re.brackets===0){xe({type:"text",value:U});continue}}if(re.brackets>0&&(U!=="]"||k.value==="["||k.value==="[^")){if(N.posix!==!1&&U===":"){const ye=k.value.slice(1);if(ye.includes("[")&&(k.posix=!0,ye.includes(":"))){const Xe=k.value.lastIndexOf("["),Kt=k.value.slice(0,Xe),Nn=k.value.slice(Xe+2),Rn=y[Nn];if(Rn){k.value=Kt+Rn,re.backtrack=!0,Be(),!Ee.output&&G.indexOf(k)===1&&(Ee.output=de);continue}}}(U==="["&&ue()!==":"||U==="-"&&ue()==="]")&&(U=`\\${U}`),U==="]"&&(k.value==="["||k.value==="[^")&&(U=`\\${U}`),N.posix===!0&&U==="!"&&k.value==="["&&(U="^"),k.value+=U,_e({value:U});continue}if(re.quotes===1&&U!=='"'){U=v.escapeRegex(U),k.value+=U,_e({value:U});continue}if(U==='"'){re.quotes=re.quotes===1?0:1,N.keepQuotes===!0&&xe({type:"text",value:U});continue}if(U==="("){Ye("parens"),xe({type:"paren",value:U});continue}if(U===")"){if(re.parens===0&&N.strictBrackets===!0)throw new SyntaxError(B("opening","("));const ye=et[et.length-1];if(ye&&re.parens===ye.parens+1){nt(et.pop());continue}xe({type:"paren",value:U,output:re.parens?")":"\\)"}),Se("parens");continue}if(U==="["){if(N.nobracket===!0||!Ie().includes("]")){if(N.nobracket!==!0&&N.strictBrackets===!0)throw new SyntaxError(B("closing","]"));U=`\\${U}`}else Ye("brackets");xe({type:"bracket",value:U});continue}if(U==="]"){if(N.nobracket===!0||k&&k.type==="bracket"&&k.value.length===1){xe({type:"text",value:U,output:`\\${U}`});continue}if(re.brackets===0){if(N.strictBrackets===!0)throw new SyntaxError(B("opening","["));xe({type:"text",value:U,output:`\\${U}`});continue}Se("brackets");const ye=k.value.slice(1);if(k.posix!==!0&&ye[0]==="^"&&!ye.includes("/")&&(U=`/${U}`),k.value+=U,_e({value:U}),N.literalBrackets===!1||v.hasRegexChars(ye))continue;const Xe=v.escapeRegex(k.value);if(re.output=re.output.slice(0,-k.value.length),N.literalBrackets===!0){re.output+=Xe,k.value=Xe;continue}k.value=`(${X}${Xe}|${k.value})`,re.output+=k.value;continue}if(U==="{"&&N.nobrace!==!0){Ye("braces");const ye={type:"brace",value:U,output:"(",outputIndex:re.output.length,tokensIndex:re.tokens.length};ut.push(ye),xe(ye);continue}if(U==="}"){const ye=ut[ut.length-1];if(N.nobrace===!0||!ye){xe({type:"text",value:U,output:U});continue}let Xe=")";if(ye.dots===!0){const Kt=G.slice(),Nn=[];for(let Rn=Kt.length-1;Rn>=0&&(G.pop(),Kt[Rn].type!=="brace");Rn--)Kt[Rn].type!=="dots"&&Nn.unshift(Kt[Rn].value);Xe=w(Nn,N),re.backtrack=!0}if(ye.comma!==!0&&ye.dots!==!0){const Kt=re.output.slice(0,ye.outputIndex),Nn=re.tokens.slice(ye.tokensIndex);ye.value=ye.output="\\{",U=Xe="\\}",re.output=Kt;for(const Rn of Nn)re.output+=Rn.output||Rn.value}xe({type:"brace",value:U,output:Xe}),Se("braces"),ut.pop();continue}if(U==="|"){et.length>0&&et[et.length-1].conditions++,xe({type:"text",value:U});continue}if(U===","){let ye=U;const Xe=ut[ut.length-1];Xe&&wt[wt.length-1]==="braces"&&(Xe.comma=!0,ye="|"),xe({type:"comma",value:U,output:ye});continue}if(U==="/"){if(k.type==="dot"&&re.index===re.start+1){re.start=re.index+1,re.consumed="",re.output="",G.pop(),k=Ee;continue}xe({type:"slash",value:U,output:z});continue}if(U==="."){if(re.braces>0&&k.type==="dot"){k.value==="."&&(k.output=x);const ye=ut[ut.length-1];k.type="dots",k.output+=U,k.value+=U,ye.dots=!0;continue}if(re.braces+re.parens===0&&k.type!=="bos"&&k.type!=="slash"){xe({type:"text",value:U,output:x});continue}xe({type:"dot",value:U,output:x});continue}if(U==="?"){if(!(k&&k.value==="(")&&N.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){dt("qmark",U);continue}if(k&&k.type==="paren"){const Xe=ue();let Kt=U;if(Xe==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(k.value==="("&&!/[!=<:]/.test(Xe)||Xe==="<"&&!/<([!=]|\w+>)/.test(Ie()))&&(Kt=`\\${U}`),xe({type:"text",value:U,output:Kt});continue}if(N.dot!==!0&&(k.type==="slash"||k.type==="bos")){xe({type:"qmark",value:U,output:Ve});continue}xe({type:"qmark",value:U,output:R});continue}if(U==="!"){if(N.noextglob!==!0&&ue()==="("&&(ue(2)!=="?"||!/[!=<:]/.test(ue(3)))){dt("negate",U);continue}if(N.nonegate!==!0&&re.index===0){Te();continue}}if(U==="+"){if(N.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){dt("plus",U);continue}if(k&&k.value==="("||N.regex===!1){xe({type:"plus",value:U,output:se});continue}if(k&&(k.type==="bracket"||k.type==="paren"||k.type==="brace")||re.parens>0){xe({type:"plus",value:U});continue}xe({type:"plus",value:se});continue}if(U==="@"){if(N.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){xe({type:"at",extglob:!0,value:U,output:""});continue}xe({type:"text",value:U});continue}if(U!=="*"){(U==="$"||U==="^")&&(U=`\\${U}`);const ye=W.exec(Ie());ye&&(U+=ye[0],re.index+=ye[0].length),xe({type:"text",value:U});continue}if(k&&(k.type==="globstar"||k.star===!0)){k.type="star",k.star=!0,k.value+=U,k.output=$e,re.backtrack=!0,re.globstar=!0,le(U);continue}let Ce=Ie();if(N.noextglob!==!0&&/^\([^?]/.test(Ce)){dt("star",U);continue}if(k.type==="star"){if(N.noglobstar===!0){le(U);continue}const ye=k.prev,Xe=ye.prev,Kt=ye.type==="slash"||ye.type==="bos",Nn=Xe&&(Xe.type==="star"||Xe.type==="globstar");if(N.bash===!0&&(!Kt||Ce[0]&&Ce[0]!=="/")){xe({type:"star",value:U,output:""});continue}const Rn=re.braces>0&&(ye.type==="comma"||ye.type==="brace"),_n=et.length&&(ye.type==="pipe"||ye.type==="paren");if(!Kt&&ye.type!=="paren"&&!Rn&&!_n){xe({type:"star",value:U,output:""});continue}for(;Ce.slice(0,3)==="/**";){const dr=A[re.index+4];if(dr&&dr!=="/")break;Ce=Ce.slice(3),le("/**",3)}if(ye.type==="bos"&&te()){k.type="globstar",k.value+=U,k.output=K(N),re.output=k.output,re.globstar=!0,le(U);continue}if(ye.type==="slash"&&ye.prev.type!=="bos"&&!Nn&&te()){re.output=re.output.slice(0,-(ye.output+k.output).length),ye.output=`(?:${ye.output}`,k.type="globstar",k.output=K(N)+(N.strictSlashes?")":"|$)"),k.value+=U,re.globstar=!0,re.output+=ye.output+k.output,le(U);continue}if(ye.type==="slash"&&ye.prev.type!=="bos"&&Ce[0]==="/"){const dr=Ce[1]!==void 0?"|$":"";re.output=re.output.slice(0,-(ye.output+k.output).length),ye.output=`(?:${ye.output}`,k.type="globstar",k.output=`${K(N)}${z}|${z}${dr})`,k.value+=U,re.output+=ye.output+k.output,re.globstar=!0,le(U+Be()),xe({type:"slash",value:"/",output:""});continue}if(ye.type==="bos"&&Ce[0]==="/"){k.type="globstar",k.value+=U,k.output=`(?:^|${z}|${K(N)}${z})`,re.output=k.output,re.globstar=!0,le(U+Be()),xe({type:"slash",value:"/",output:""});continue}re.output=re.output.slice(0,-k.output.length),k.type="globstar",k.output=K(N),k.value+=U,re.output+=k.output,re.globstar=!0,le(U);continue}const S={type:"star",value:U,output:$e};if(N.bash===!0){S.output=".*?",(k.type==="bos"||k.type==="slash")&&(S.output=oe+S.output),xe(S);continue}if(k&&(k.type==="bracket"||k.type==="paren")&&N.regex===!0){S.output=U,xe(S);continue}(re.index===re.start||k.type==="slash"||k.type==="dot")&&(k.type==="dot"?(re.output+=ie,k.output+=ie):N.dot===!0?(re.output+=we,k.output+=we):(re.output+=oe,k.output+=oe),ue()!=="*"&&(re.output+=de,k.output+=de)),xe(S)}for(;re.brackets>0;){if(N.strictBrackets===!0)throw new SyntaxError(B("closing","]"));re.output=v.escapeLast(re.output,"["),Se("brackets")}for(;re.parens>0;){if(N.strictBrackets===!0)throw new SyntaxError(B("closing",")"));re.output=v.escapeLast(re.output,"("),Se("parens")}for(;re.braces>0;){if(N.strictBrackets===!0)throw new SyntaxError(B("closing","}"));re.output=v.escapeLast(re.output,"{"),Se("braces")}if(N.strictSlashes!==!0&&(k.type==="star"||k.type==="bracket")&&xe({type:"maybe_slash",value:"",output:`${z}?`}),re.backtrack===!0){re.output="";for(const Ce of re.tokens)re.output+=Ce.output!=null?Ce.output:Ce.value,Ce.suffix&&(re.output+=Ce.suffix)}return re},"parse");H.fastpaths=(A,$)=>{const N={...$},J=typeof N.maxLength=="number"?Math.min(L,N.maxLength):L,q=A.length;if(q>J)throw new SyntaxError(`Input length: ${q}, exceeds maximum allowed length: ${J}`);A=m[A]||A;const Ee=v.isWindows($),{DOT_LITERAL:G,SLASH_LITERAL:X,ONE_CHAR:Z,DOTS_SLASH:M,NO_DOT:Y,NO_DOTS:x,NO_DOTS_SLASH:se,STAR:z,START_ANCHOR:de}=T.globChars(Ee),Ae=N.dot?x:Y,Oe=N.dot?se:Y,ie=N.capture?"":"?:",we={negated:!1,prefix:""};let R=N.bash===!0?".*?":z;N.capture&&(R=`(${R})`);const Ve=o(oe=>oe.noglobstar===!0?R:`(${ie}(?:(?!${de}${oe.dot?M:G}).)*?)`,"globstar"),me=o(oe=>{switch(oe){case"*":return`${Ae}${Z}${R}`;case".*":return`${G}${Z}${R}`;case"*.*":return`${Ae}${R}${G}${Z}${R}`;case"*/*":return`${Ae}${R}${X}${Z}${Oe}${R}`;case"**":return Ae+Ve(N);case"**/*":return`(?:${Ae}${Ve(N)}${X})?${Oe}${Z}${R}`;case"**/*.*":return`(?:${Ae}${Ve(N)}${X})?${Oe}${R}${G}${Z}${R}`;case"**/.*":return`(?:${Ae}${Ve(N)}${X})?${G}${Z}${R}`;default:{const Re=/^(.*?)\.(\w+)$/.exec(oe);if(!Re)return;const $e=me(Re[1]);return $e?$e+G+Re[2]:void 0}}},"create"),ge=v.removePrefix(A,we);let K=me(ge);return K&&N.strictSlashes!==!0&&(K+=`${X}?`),K},ot.exports=H},5761:(ot,l,b)=>{"use strict";const T=b(6470),v=b(9826),L=b(3969),y=b(292),W=b(3889),O=o(w=>w&&typeof w=="object"&&!Array.isArray(w),"isObject"),m=o((w,B,H=!1)=>{if(Array.isArray(w)){const X=w.map(M=>m(M,B,H));return o(M=>{for(const Y of X){const x=Y(M);if(x)return x}return!1},"arrayMatcher")}const A=O(w)&&w.tokens&&w.input;if(w===""||typeof w!="string"&&!A)throw new TypeError("Expected pattern to be a non-empty string");const $=B||{},N=y.isWindows(B),J=A?m.compileRe(w,B):m.makeRe(w,B,!1,!0),q=J.state;delete J.state;let Ee=o(()=>!1,"isIgnored");if($.ignore){const X={...B,ignore:null,onMatch:null,onResult:null};Ee=m($.ignore,X,H)}const G=o((X,Z=!1)=>{const{isMatch:M,match:Y,output:x}=m.test(X,J,B,{glob:w,posix:N}),se={glob:w,state:q,regex:J,posix:N,input:X,output:x,match:Y,isMatch:M};return typeof $.onResult=="function"&&$.onResult(se),M===!1?(se.isMatch=!1,Z?se:!1):Ee(X)?(typeof $.onIgnore=="function"&&$.onIgnore(se),se.isMatch=!1,Z?se:!1):(typeof $.onMatch=="function"&&$.onMatch(se),Z?se:!0)},"matcher");return H&&(G.state=q),G},"picomatch");m.test=(w,B,H,{glob:A,posix:$}={})=>{if(typeof w!="string")throw new TypeError("Expected input to be a string");if(w==="")return{isMatch:!1,output:""};const N=H||{},J=N.format||($?y.toPosixSlashes:null);let q=w===A,Ee=q&&J?J(w):w;return q===!1&&(Ee=J?J(w):w,q=Ee===A),(q===!1||N.capture===!0)&&(N.matchBase===!0||N.basename===!0?q=m.matchBase(w,B,H,$):q=B.exec(Ee)),{isMatch:Boolean(q),match:q,output:Ee}},m.matchBase=(w,B,H,A=y.isWindows(H))=>(B instanceof RegExp?B:m.makeRe(B,H)).test(T.basename(w)),m.isMatch=(w,B,H)=>m(B,H)(w),m.parse=(w,B)=>Array.isArray(w)?w.map(H=>m.parse(H,B)):L(w,{...B,fastpaths:!1}),m.scan=(w,B)=>v(w,B),m.compileRe=(w,B,H=!1,A=!1)=>{if(H===!0)return w.output;const $=B||{},N=$.contains?"":"^",J=$.contains?"":"$";let q=`${N}(?:${w.output})${J}`;w&&w.negated===!0&&(q=`^(?!${q}).*$`);const Ee=m.toRegex(q,B);return A===!0&&(Ee.state=w),Ee},m.makeRe=(w,B={},H=!1,A=!1)=>{if(!w||typeof w!="string")throw new TypeError("Expected a non-empty string");let $={negated:!1,fastpaths:!0};return B.fastpaths!==!1&&(w[0]==="."||w[0]==="*")&&($.output=L.fastpaths(w,B)),$.output||($=L(w,B)),m.compileRe($,B,H,A)},m.toRegex=(w,B)=>{try{const H=B||{};return new RegExp(w,H.flags||(H.nocase?"i":""))}catch(H){if(B&&B.debug===!0)throw H;return/$^/}},m.constants=W,ot.exports=m},9826:(ot,l,b)=>{"use strict";const T=b(292),{CHAR_ASTERISK:v,CHAR_AT:L,CHAR_BACKWARD_SLASH:y,CHAR_COMMA:W,CHAR_DOT:O,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:w,CHAR_LEFT_CURLY_BRACE:B,CHAR_LEFT_PARENTHESES:H,CHAR_LEFT_SQUARE_BRACKET:A,CHAR_PLUS:$,CHAR_QUESTION_MARK:N,CHAR_RIGHT_CURLY_BRACE:J,CHAR_RIGHT_PARENTHESES:q,CHAR_RIGHT_SQUARE_BRACKET:Ee}=b(3889),G=o(M=>M===w||M===y,"isPathSeparator"),X=o(M=>{M.isPrefix!==!0&&(M.depth=M.isGlobstar?1/0:1)},"depth"),Z=o((M,Y)=>{const x=Y||{},se=M.length-1,z=x.parts===!0||x.scanToEnd===!0,de=[],Ae=[],Oe=[];let ie=M,we=-1,R=0,Ve=0,me=!1,ge=!1,K=!1,oe=!1,Re=!1,$e=!1,re=!1,et=!1,ut=!1,wt=!1,k=0,U,te,ue={value:"",depth:0,isGlob:!1};const Be=o(()=>we>=se,"eos"),Ie=o(()=>ie.charCodeAt(we+1),"peek"),le=o(()=>(U=te,ie.charCodeAt(++we)),"advance");for(;we<se;){te=le();let xe;if(te===y){re=ue.backslashes=!0,te=le(),te===B&&($e=!0);continue}if($e===!0||te===B){for(k++;Be()!==!0&&(te=le());){if(te===y){re=ue.backslashes=!0,le();continue}if(te===B){k++;continue}if($e!==!0&&te===O&&(te=le())===O){if(me=ue.isBrace=!0,K=ue.isGlob=!0,wt=!0,z===!0)continue;break}if($e!==!0&&te===W){if(me=ue.isBrace=!0,K=ue.isGlob=!0,wt=!0,z===!0)continue;break}if(te===J&&(k--,k===0)){$e=!1,me=ue.isBrace=!0,wt=!0;break}}if(z===!0)continue;break}if(te===w){if(de.push(we),Ae.push(ue),ue={value:"",depth:0,isGlob:!1},wt===!0)continue;if(U===O&&we===R+1){R+=2;continue}Ve=we+1;continue}if(x.noext!==!0&&(te===$||te===L||te===v||te===N||te===m)===!0&&Ie()===H){if(K=ue.isGlob=!0,oe=ue.isExtglob=!0,wt=!0,te===m&&we===R&&(ut=!0),z===!0){for(;Be()!==!0&&(te=le());){if(te===y){re=ue.backslashes=!0,te=le();continue}if(te===q){K=ue.isGlob=!0,wt=!0;break}}continue}break}if(te===v){if(U===v&&(Re=ue.isGlobstar=!0),K=ue.isGlob=!0,wt=!0,z===!0)continue;break}if(te===N){if(K=ue.isGlob=!0,wt=!0,z===!0)continue;break}if(te===A){for(;Be()!==!0&&(xe=le());){if(xe===y){re=ue.backslashes=!0,le();continue}if(xe===Ee){ge=ue.isBracket=!0,K=ue.isGlob=!0,wt=!0;break}}if(z===!0)continue;break}if(x.nonegate!==!0&&te===m&&we===R){et=ue.negated=!0,R++;continue}if(x.noparen!==!0&&te===H){if(K=ue.isGlob=!0,z===!0){for(;Be()!==!0&&(te=le());){if(te===H){re=ue.backslashes=!0,te=le();continue}if(te===q){wt=!0;break}}continue}break}if(K===!0){if(wt=!0,z===!0)continue;break}}x.noext===!0&&(oe=!1,K=!1);let _e=ie,Te="",Ye="";R>0&&(Te=ie.slice(0,R),ie=ie.slice(R),Ve-=R),_e&&K===!0&&Ve>0?(_e=ie.slice(0,Ve),Ye=ie.slice(Ve)):K===!0?(_e="",Ye=ie):_e=ie,_e&&_e!==""&&_e!=="/"&&_e!==ie&&G(_e.charCodeAt(_e.length-1))&&(_e=_e.slice(0,-1)),x.unescape===!0&&(Ye&&(Ye=T.removeBackslashes(Ye)),_e&&re===!0&&(_e=T.removeBackslashes(_e)));const Se={prefix:Te,input:M,start:R,base:_e,glob:Ye,isBrace:me,isBracket:ge,isGlob:K,isExtglob:oe,isGlobstar:Re,negated:et,negatedExtglob:ut};if(x.tokens===!0&&(Se.maxDepth=0,G(te)||Ae.push(ue),Se.tokens=Ae),x.parts===!0||x.tokens===!0){let xe;for(let dt=0;dt<de.length;dt++){const nt=xe?xe+1:R,Ce=de[dt],S=M.slice(nt,Ce);x.tokens&&(dt===0&&R!==0?(Ae[dt].isPrefix=!0,Ae[dt].value=Te):Ae[dt].value=S,X(Ae[dt]),Se.maxDepth+=Ae[dt].depth),(dt!==0||S!=="")&&Oe.push(S),xe=Ce}if(xe&&xe+1<M.length){const dt=M.slice(xe+1);Oe.push(dt),x.tokens&&(Ae[Ae.length-1].value=dt,X(Ae[Ae.length-1]),Se.maxDepth+=Ae[Ae.length-1].depth)}Se.slashes=de,Se.parts=Oe}return Se},"scan");ot.exports=Z},292:(ot,l,b)=>{"use strict";var T=b(6038);const v=b(6470),L=T.platform==="win32",{REGEX_BACKSLASH:y,REGEX_REMOVE_BACKSLASH:W,REGEX_SPECIAL_CHARS:O,REGEX_SPECIAL_CHARS_GLOBAL:m}=b(3889);l.isObject=w=>w!==null&&typeof w=="object"&&!Array.isArray(w),l.hasRegexChars=w=>O.test(w),l.isRegexChar=w=>w.length===1&&l.hasRegexChars(w),l.escapeRegex=w=>w.replace(m,"\\$1"),l.toPosixSlashes=w=>w.replace(y,"/"),l.removeBackslashes=w=>w.replace(W,B=>B==="\\"?"":B),l.supportsLookbehinds=()=>{const w=T.version.slice(1).split(".").map(Number);return w.length===3&&w[0]>=9||w[0]===8&&w[1]>=10},l.isWindows=w=>w&&typeof w.windows=="boolean"?w.windows:L===!0||v.sep==="\\",l.escapeLast=(w,B,H)=>{const A=w.lastIndexOf(B,H);return A===-1?w:w[A-1]==="\\"?l.escapeLast(w,B,A-1):`${w.slice(0,A)}\\${w.slice(A)}`},l.removePrefix=(w,B={})=>{let H=w;return H.startsWith("./")&&(H=H.slice(2),B.prefix="./"),H},l.wrapOutput=(w,B={},H={})=>{const A=H.contains?"":"^",$=H.contains?"":"$";let N=`${A}(?:${w})${$}`;return B.negated===!0&&(N=`(?:^(?!${N}).*$)`),N}},6038:ot=>{var l=ot.exports={},b,T;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function L(){throw new Error("clearTimeout has not been defined")}o(L,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=v}catch(J){b=v}try{typeof clearTimeout=="function"?T=clearTimeout:T=L}catch(J){T=L}}();function y(J){if(b===setTimeout)return setTimeout(J,0);if((b===v||!b)&&setTimeout)return b=setTimeout,setTimeout(J,0);try{return b(J,0)}catch(q){try{return b.call(null,J,0)}catch(Ee){return b.call(this,J,0)}}}o(y,"runTimeout");function W(J){if(T===clearTimeout)return clearTimeout(J);if((T===L||!T)&&clearTimeout)return T=clearTimeout,clearTimeout(J);try{return T(J)}catch(q){try{return T.call(null,J)}catch(Ee){return T.call(this,J)}}}o(W,"runClearTimeout");var O=[],m=!1,w,B=-1;function H(){!m||!w||(m=!1,w.length?O=w.concat(O):B=-1,O.length&&A())}o(H,"cleanUpNextTick");function A(){if(!m){var J=y(H);m=!0;for(var q=O.length;q;){for(w=O,O=[];++B<q;)w&&w[B].run();B=-1,q=O.length}w=null,m=!1,W(J)}}o(A,"drainQueue"),l.nextTick=function(J){var q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)q[Ee-1]=arguments[Ee];O.push(new $(J,q)),O.length===1&&!m&&y(A)};function $(J,q){this.fun=J,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function N(){}o(N,"noop"),l.on=N,l.addListener=N,l.once=N,l.off=N,l.removeListener=N,l.removeAllListeners=N,l.emit=N,l.prependListener=N,l.prependOnceListener=N,l.listeners=function(J){return[]},l.binding=function(J){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(J){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(ot,l,b)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const T=b(3338),v=o((G,X,Z)=>{if(T(G)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(X===void 0||G===X)return String(G);if(T(X)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let M={relaxZeros:!0,...Z};typeof M.strictZeros=="boolean"&&(M.relaxZeros=M.strictZeros===!1);let Y=String(M.relaxZeros),x=String(M.shorthand),se=String(M.capture),z=String(M.wrap),de=G+":"+X+"="+Y+x+se+z;if(v.cache.hasOwnProperty(de))return v.cache[de].result;let Ae=Math.min(G,X),Oe=Math.max(G,X);if(Math.abs(Ae-Oe)===1){let me=G+"|"+X;return M.capture?`(${me})`:M.wrap===!1?me:`(?:${me})`}let ie=q(G)||q(X),we={min:G,max:X,a:Ae,b:Oe},R=[],Ve=[];if(ie&&(we.isPadded=ie,we.maxLen=String(we.max).length),Ae<0){let me=Oe<0?Math.abs(Oe):1;Ve=O(me,Math.abs(Ae),we,M),Ae=we.a=0}return Oe>=0&&(R=O(Ae,Oe,we,M)),we.negatives=Ve,we.positives=R,we.result=L(Ve,R,M),M.capture===!0?we.result=`(${we.result})`:M.wrap!==!1&&R.length+Ve.length>1&&(we.result=`(?:${we.result})`),v.cache[de]=we,we.result},"toRegexRange");function L(G,X,Z){let M=m(G,X,"-",!1,Z)||[],Y=m(X,G,"",!1,Z)||[],x=m(G,X,"-?",!0,Z)||[];return M.concat(x).concat(Y).join("|")}o(L,"collatePatterns");function y(G,X){let Z=1,M=1,Y=A(G,Z),x=new Set([X]);for(;G<=Y&&Y<=X;)x.add(Y),Z+=1,Y=A(G,Z);for(Y=$(X+1,M)-1;G<Y&&Y<=X;)x.add(Y),M+=1,Y=$(X+1,M)-1;return x=[...x],x.sort(B),x}o(y,"splitToRanges");function W(G,X,Z){if(G===X)return{pattern:G,count:[],digits:0};let M=w(G,X),Y=M.length,x="",se=0;for(let z=0;z<Y;z++){let[de,Ae]=M[z];de===Ae?x+=de:de!=="0"||Ae!=="9"?x+=J(de,Ae,Z):se++}return se&&(x+=Z.shorthand===!0?"\\d":"[0-9]"),{pattern:x,count:[se],digits:Y}}o(W,"rangeToPattern");function O(G,X,Z,M){let Y=y(G,X),x=[],se=G,z;for(let de=0;de<Y.length;de++){let Ae=Y[de],Oe=W(String(se),String(Ae),M),ie="";if(!Z.isPadded&&z&&z.pattern===Oe.pattern){z.count.length>1&&z.count.pop(),z.count.push(Oe.count[0]),z.string=z.pattern+N(z.count),se=Ae+1;continue}Z.isPadded&&(ie=Ee(Ae,Z,M)),Oe.string=ie+Oe.pattern+N(Oe.count),x.push(Oe),se=Ae+1,z=Oe}return x}o(O,"splitToPatterns");function m(G,X,Z,M,Y){let x=[];for(let se of G){let{string:z}=se;!M&&!H(X,"string",z)&&x.push(Z+z),M&&H(X,"string",z)&&x.push(Z+z)}return x}o(m,"filterPatterns");function w(G,X){let Z=[];for(let M=0;M<G.length;M++)Z.push([G[M],X[M]]);return Z}o(w,"zip");function B(G,X){return G>X?1:X>G?-1:0}o(B,"compare");function H(G,X,Z){return G.some(M=>M[X]===Z)}o(H,"contains");function A(G,X){return Number(String(G).slice(0,-X)+"9".repeat(X))}o(A,"countNines");function $(G,X){return G-G%Math.pow(10,X)}o($,"countZeros");function N(G){let[X=0,Z=""]=G;return Z||X>1?`{${X+(Z?","+Z:"")}}`:""}o(N,"toQuantifier");function J(G,X,Z){return`[${G}${X-G==1?"":"-"}${X}]`}o(J,"toCharacterClass");function q(G){return/^-?(0+)\d/.test(G)}o(q,"hasPadding");function Ee(G,X,Z){if(!X.isPadded)return G;let M=Math.abs(X.maxLen-String(G).length),Y=Z.relaxZeros!==!1;switch(M){case 0:return"";case 1:return Y?"0?":"0";case 2:return Y?"0{0,2}":"00";default:return Y?`0{0,${M}}`:`0{${M}}`}}o(Ee,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},ot.exports=v},6724:()=>{},6470:(ot,l,b)=>{"use strict";var T=b(4155);function v(O){if(typeof O!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(O))}o(v,"assertPath");function L(O,m){for(var w="",B=0,H=-1,A=0,$,N=0;N<=O.length;++N){if(N<O.length)$=O.charCodeAt(N);else{if($===47)break;$=47}if($===47){if(!(H===N-1||A===1))if(H!==N-1&&A===2){if(w.length<2||B!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var J=w.lastIndexOf("/");if(J!==w.length-1){J===-1?(w="",B=0):(w=w.slice(0,J),B=w.length-1-w.lastIndexOf("/")),H=N,A=0;continue}}else if(w.length===2||w.length===1){w="",B=0,H=N,A=0;continue}}m&&(w.length>0?w+="/..":w="..",B=2)}else w.length>0?w+="/"+O.slice(H+1,N):w=O.slice(H+1,N),B=N-H-1;H=N,A=0}else $===46&&A!==-1?++A:A=-1}return w}o(L,"normalizeStringPosix");function y(O,m){var w=m.dir||m.root,B=m.base||(m.name||"")+(m.ext||"");return w?w===m.root?w+B:w+O+B:B}o(y,"_format");var W={resolve:o(function(){for(var m="",w=!1,B,H=arguments.length-1;H>=-1&&!w;H--){var A;H>=0?A=arguments[H]:(B===void 0&&(B=T.cwd()),A=B),v(A),A.length!==0&&(m=A+"/"+m,w=A.charCodeAt(0)===47)}return m=L(m,!w),w?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var w=m.charCodeAt(0)===47,B=m.charCodeAt(m.length-1)===47;return m=L(m,!w),m.length===0&&!w&&(m="."),m.length>0&&B&&(m+="/"),w?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,w=0;w<arguments.length;++w){var B=arguments[w];v(B),B.length>0&&(m===void 0?m=B:m+="/"+B)}return m===void 0?".":W.normalize(m)},"join"),relative:o(function(m,w){if(v(m),v(w),m===w||(m=W.resolve(m),w=W.resolve(w),m===w))return"";for(var B=1;B<m.length&&m.charCodeAt(B)===47;++B);for(var H=m.length,A=H-B,$=1;$<w.length&&w.charCodeAt($)===47;++$);for(var N=w.length,J=N-$,q=A<J?A:J,Ee=-1,G=0;G<=q;++G){if(G===q){if(J>q){if(w.charCodeAt($+G)===47)return w.slice($+G+1);if(G===0)return w.slice($+G)}else A>q&&(m.charCodeAt(B+G)===47?Ee=G:G===0&&(Ee=0));break}var X=m.charCodeAt(B+G),Z=w.charCodeAt($+G);if(X!==Z)break;X===47&&(Ee=G)}var M="";for(G=B+Ee+1;G<=H;++G)(G===H||m.charCodeAt(G)===47)&&(M.length===0?M+="..":M+="/..");return M.length>0?M+w.slice($+Ee):($+=Ee,w.charCodeAt($)===47&&++$,w.slice($))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var w=m.charCodeAt(0),B=w===47,H=-1,A=!0,$=m.length-1;$>=1;--$)if(w=m.charCodeAt($),w===47){if(!A){H=$;break}}else A=!1;return H===-1?B?"/":".":B&&H===1?"//":m.slice(0,H)},"dirname"),basename:o(function(m,w){if(w!==void 0&&typeof w!="string")throw new TypeError('"ext" argument must be a string');v(m);var B=0,H=-1,A=!0,$;if(w!==void 0&&w.length>0&&w.length<=m.length){if(w.length===m.length&&w===m)return"";var N=w.length-1,J=-1;for($=m.length-1;$>=0;--$){var q=m.charCodeAt($);if(q===47){if(!A){B=$+1;break}}else J===-1&&(A=!1,J=$+1),N>=0&&(q===w.charCodeAt(N)?--N==-1&&(H=$):(N=-1,H=J))}return B===H?H=J:H===-1&&(H=m.length),m.slice(B,H)}else{for($=m.length-1;$>=0;--$)if(m.charCodeAt($)===47){if(!A){B=$+1;break}}else H===-1&&(A=!1,H=$+1);return H===-1?"":m.slice(B,H)}},"basename"),extname:o(function(m){v(m);for(var w=-1,B=0,H=-1,A=!0,$=0,N=m.length-1;N>=0;--N){var J=m.charCodeAt(N);if(J===47){if(!A){B=N+1;break}continue}H===-1&&(A=!1,H=N+1),J===46?w===-1?w=N:$!==1&&($=1):w!==-1&&($=-1)}return w===-1||H===-1||$===0||$===1&&w===H-1&&w===B+1?"":m.slice(w,H)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return y("/",m)},"format"),parse:o(function(m){v(m);var w={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return w;var B=m.charCodeAt(0),H=B===47,A;H?(w.root="/",A=1):A=0;for(var $=-1,N=0,J=-1,q=!0,Ee=m.length-1,G=0;Ee>=A;--Ee){if(B=m.charCodeAt(Ee),B===47){if(!q){N=Ee+1;break}continue}J===-1&&(q=!1,J=Ee+1),B===46?$===-1?$=Ee:G!==1&&(G=1):$!==-1&&(G=-1)}return $===-1||J===-1||G===0||G===1&&$===J-1&&$===N+1?J!==-1&&(N===0&&H?w.base=w.name=m.slice(1,J):w.base=w.name=m.slice(N,J)):(N===0&&H?(w.name=m.slice(1,$),w.base=m.slice(1,J)):(w.name=m.slice(N,$),w.base=m.slice(N,J)),w.ext=m.slice($,J)),N>0?w.dir=m.slice(0,N-1):H&&(w.dir="/"),w},"parse"),sep:"/",delimiter:":",win32:null,posix:null};W.posix=W,ot.exports=W},4155:ot=>{var l=ot.exports={},b,T;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function L(){throw new Error("clearTimeout has not been defined")}o(L,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=v}catch(J){b=v}try{typeof clearTimeout=="function"?T=clearTimeout:T=L}catch(J){T=L}}();function y(J){if(b===setTimeout)return setTimeout(J,0);if((b===v||!b)&&setTimeout)return b=setTimeout,setTimeout(J,0);try{return b(J,0)}catch(q){try{return b.call(null,J,0)}catch(Ee){return b.call(this,J,0)}}}o(y,"runTimeout");function W(J){if(T===clearTimeout)return clearTimeout(J);if((T===L||!T)&&clearTimeout)return T=clearTimeout,clearTimeout(J);try{return T(J)}catch(q){try{return T.call(null,J)}catch(Ee){return T.call(this,J)}}}o(W,"runClearTimeout");var O=[],m=!1,w,B=-1;function H(){!m||!w||(m=!1,w.length?O=w.concat(O):B=-1,O.length&&A())}o(H,"cleanUpNextTick");function A(){if(!m){var J=y(H);m=!0;for(var q=O.length;q;){for(w=O,O=[];++B<q;)w&&w[B].run();B=-1,q=O.length}w=null,m=!1,W(J)}}o(A,"drainQueue"),l.nextTick=function(J){var q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)q[Ee-1]=arguments[Ee];O.push(new $(J,q)),O.length===1&&!m&&y(A)};function $(J,q){this.fun=J,this.array=q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function N(){}o(N,"noop"),l.on=N,l.addListener=N,l.once=N,l.off=N,l.removeListener=N,l.removeAllListeners=N,l.emit=N,l.prependListener=N,l.prependOnceListener=N,l.listeners=function(J){return[]},l.binding=function(J){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(J){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},ja={};function ur(ot){var l=ja[ot];if(l!==void 0)return l.exports;var b=ja[ot]={id:ot,loaded:!1,exports:{}};return Ao[ot](b,b.exports,ur),b.loaded=!0,b.exports}o(ur,"__webpack_require__"),(()=>{ur.n=ot=>{var l=ot&&ot.__esModule?()=>ot.default:()=>ot;return ur.d(l,{a:l}),l}})(),(()=>{ur.d=(ot,l)=>{for(var b in l)ur.o(l,b)&&!ur.o(ot,b)&&Object.defineProperty(ot,b,{enumerable:!0,get:l[b]})}})(),(()=>{ur.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ot){if(typeof window=="object")return window}}()})(),(()=>{ur.o=(ot,l)=>Object.prototype.hasOwnProperty.call(ot,l)})(),(()=>{ur.r=ot=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})}})(),(()=>{ur.nmd=ot=>(ot.paths=[],ot.children||(ot.children=[]),ot)})();var Do={};(()=>{"use strict";ur.r(Do),ur.d(Do,{AllowedProviderExtensionIds:()=>qo,StateKeys:()=>ya,activate:()=>Ec,ensureProvidersRegistered:()=>Or,getOpenActionsService:()=>_o,getState:()=>nl,isPreRelease:()=>bc,updateState:()=>Yo});var ot={};ur.r(ot),ur.d(ot,{max:()=>Il,min:()=>Pl});const l=require("vscode"),b=new TextDecoder,T=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function L(t){const e=T.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(L,"encodeUtf8Hex");function y(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return b.decode(n)}o(y,"decodeUtf8Hex");const W=/^[0-9a-f]{40}$/i;function O(t){return t!==void 0&&W.test(t)}o(O,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function w(t){return m.test(t)}o(w,"isValidBranchName");function B(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(B,"shortenRef");const H=47;function A(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(A,"asKey");function $(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o($,"asFileKey");function N(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(N,"asFileStorageKey");function J(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===H){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(J,"basename");function q(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===H){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(q,"dirname");function Ee(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ee,"getParent");function G(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(G,"joinRelativePath");function X(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),Z(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):Z(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(X,"isChild");function Z(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(Z,"isDescendent");function M(t){return t&&typeof t=="object"&&"scheme"in t}o(M,"isSerializedUri");function Y(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(Y,"encodeURIComponentExceptSlashes");var x;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const _ of p)_.uri.scheme===d&&f.some(Q=>Z(_.uri,Q))&&h.set(A(_.uri),_.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let _;if(p)try{const Q=JSON.parse(y(p));_=f?f(Q):Q}catch{}return{scheme:h,metadata:_}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${L(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(x||(x={}));var se;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(se||(se={}));var z;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(z||(z={}));var de;(function(t){function e(n){return n!==void 0&&n.type===ie.Active}o(e,"isActive"),t.isActive=e})(de||(de={}));var Ae;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Oe.Latest};if(O(r.idx))return{type:Oe.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(Ae||(Ae={}));var Oe;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Oe||(Oe={}));var ie;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(ie||(ie={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(ie||(ie={}));var we;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(we||(we={}));var R;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(R||(R={}));var Ve;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(Ve||(Ve={}));var me;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(me||(me={}));var ge;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ge||(ge={}));var K;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(K||(K={}));var oe;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(oe||(oe={}));var Re;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Re||(Re={}));var $e;(function(t){t.Browse="browse",t.Edit="edit"})($e||($e={}));var re;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(re||(re={}));class et extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new et("Failed to create and push commit",re.CommitFailedError)}static DetachedHEADError(e){return new et(e,re.DetachedHEADError)}static CommitToProtectedBranchError(e){return new et(e,re.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new et(e,re.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new et(r,re.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new et(e,re.InvalidCredentialsError,n)}static MergeConflictError(e){return new et(e,re.MergeConflictError)}static NothingToCommitError(e){return new et(e,re.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new et(n,re.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new et(e,re.SyncConflictsError)}static UnresolvedConflictsError(){return new et("You have unresolved merge conflicts.",re.UnresolvedConflictsError)}static InvalidRepositoryError(){return new et("The current repository is invalid",re.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:re.Unknown}}o(et,"VirtualProviderError");const ut=6;var wt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(wt||(wt={}));var k;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(k||(k={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(k||(k={}));var U;(function(t){t.Browse="browse",t.Edit="edit"})(U||(U={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(U||(U={}));var te;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(te||(te={}));var ue;(function(t){const e=new Map([[oe.Branch,k.None],[oe.RemoteBranch,k.None],[oe.PullRequestBranch,k.Match],[oe.PullRequestRemoteBranch,k.Match],[oe.Commit,k.Match],[oe.Tag,k.Match]]),n=new Map([[oe.Branch,U.Edit],[oe.RemoteBranch,U.Edit],[oe.PullRequestBranch,U.Browse],[oe.PullRequestRemoteBranch,U.Browse],[oe.Commit,U.Browse],[oe.Tag,U.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:U.Edit,index:(c=e.get(a))!=null?c:k.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case oe.Branch:case oe.RemoteBranch:return{display:U.Browse,index:k.Latest};case oe.PullRequestBranch:case oe.PullRequestRemoteBranch:return{display:U.Browse,index:k.Match};case oe.Commit:case oe.Tag:return{display:U.Browse,index:k.Match};default:return{display:U.Edit,index:k.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(ue||(ue={}));const Be=null;var Ie=ur(5179),le=ur.n(Ie);const _e="modes",Te="indexMemento";class Ye{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){Se.configPrefix=e,Se.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(Se.onConfigurationChanged,Se))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(_e),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(_e,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Te),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:U.sanitize(s.display),index:k.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===oe.Branch||n===oe.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:U.Edit,index:k.None};case"latest":return{display:U.Browse,index:k.Latest};case"tipPlusLatest":return{display:U.Edit,index:k.TipPlusLatest}}if(!r)return ue.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(_e,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Te,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=Se.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=Se.inspect(e);if(i===void 0)return;const a=Se.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=Se.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):Se.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):Se.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):Se.update(e,le()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Ye,"Configuration");const Se=new Ye,xe="";var dt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(dt||(dt={}));const nt="[RemoteHub]",Ce=o(class{static configure(t,e){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e}static enabled(t){return this.level>=this.toOrderedLevel(t)}static toOrderedLevel(t){switch(t){case l.LogLevel.Off:return 0;case l.LogLevel.Error:return 1;case l.LogLevel.Warning:return 2;case l.LogLevel.Info:return 3;case l.LogLevel.Debug:case l.LogLevel.Trace:return 4}}static get isDebugging(){return this._isDebugging}static ensureOutputChannel(){var t;this.level=this.toOrderedLevel(l.env.logLevel),this.output=(t=this.output)!=null?t:l.window.createOutputChannel(this.outputChannelName,{log:!0})}static debug(t,...e){var n;this.ensureOutputChannel(),Ce.isDebugging&&console.log(nt,t!=null?t:xe,...e),(n=this.output)==null||n.debug(`${t!=null?t:xe}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){var r;if(this.ensureOutputChannel(),!(this.level<1&&!Ce.isDebugging)){if(e===void 0){const i=t instanceof Error?t.stack:void 0;if(i){const a=/.*\s*?at\s(.+?)\s/.exec(i);a!==null&&(e=a[1])}}Ce.isDebugging&&console.error(nt,e!=null?e:xe,...n,t),(r=this.output)==null||r.error(`${e!=null?e:xe}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){var n;this.ensureOutputChannel(),Ce.isDebugging&&console.log(nt,t!=null?t:xe,...e),(n=this.output)==null||n.info(`${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){var n;this.ensureOutputChannel(),Ce.isDebugging&&console.warn(nt,t!=null?t:xe,...e),(n=this.output)==null||n.warn(`${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:xe}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:xe;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!Ce.isDebugging)return xe;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:xe}},"_Logger");let S=Ce;S.level=0;const ye=new TextDecoder,Xe=new TextEncoder;async function Kt(t){const e=typeof t=="string"?Xe.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new pr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(ye.decode(n)))}o(Kt,"sha1");async function Nn(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(Nn,"sha256");var Rn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Rn||(Rn={}));function _n(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(_n,"leftRotate");function dr(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(dr,"fill");const ir=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,dr(this._buff,this._buffLen),this._buffLen>56&&(this._step(),dr(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=ir._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,_n(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=_n(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=_n(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let pr=ir;pr._bigBlock32=new DataView(new ArrayBuffer(320));function mr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}o(mr,"fromBase64");const{fromCharCode:fr}=String;function vt(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=fr(t[n])}return globalThis.btoa(e)}o(vt,"toBase64");function zt(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(zt,"indexOfDifference");function tn(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(tn,"escapeRegExpCharacters");let Yt;var on;(function(t){function e(n){const r=Kn(n);return Yt=l.env.uiKind===l.UIKind.Web,S.warn(`Running on the ${Yt?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})(on||(on={}));const Mn=/\/workspaceStorage\/(?<id>[^/]+)/i;function Kn(t){var e;if(t.storageUri===void 0)return"";const n=Mn.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=zt(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(Kn,"getWorkspaceId");var Gn;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.ActiveResourceHasChanges="remoteHub:activeResourceHasChanges",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(Gn||(Gn={}));const hr=new Map;function Pr(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):hr.get(t)}o(Pr,"getContext");function Wr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(Wr,"isSupportedContextKey");async function Qn(t,e){hr.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Qn,"setContext");const $r=o(async(t,e,n)=>{const r=await Promise.resolve().then(ur.bind(ur,850)),i=await Promise.resolve().then(ur.bind(ur,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),Br=o(async(t,e,n)=>{const r=await $r(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var vn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(vn||(vn={}));class Zn{constructor(e,n){this._instantiationStatus=vn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==vn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==vn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===vn.NOT_INSTANTIATED&&(this._instantiationStatus=vn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=vn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=vn.INSTANTIATED}))}}o(Zn,"BaseTelemetrySender");class Cr{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Cr,"BaseTelemetryReporter");class gr{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return gr._instance||(gr._instance=new gr),gr._instance}}o(gr,"TelemetryUtil");const oi=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(ur.bind(ur,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&gr.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function gi(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(gi,"getBrowserRelease");class yr extends Cr{constructor(e,n){let r=o(s=>oi(s,n),"clientFactory");gr.shouldUseOneDataSystemSDK(e)&&(r=o(s=>Br(s,l),"clientFactory"));const i={release:gi(navigator),platform:"web",architecture:"web"},a=new Zn(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:gr.getAdditionalCommonProperties(i)})}}o(yr,"TelemetryReporter");const P="Type of classified event does not match event properties",ce=o(class{constructor(t){this.context=t,this.sharedProperties={},ce._instance=this,this.reporter=new yr(ce.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==P&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(S.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{S.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let be=ce;be.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function Fe(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(Fe,"handleExtensionActivationError");function Ze(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(Ze,"hrtime");let Qe=0;function ht(){return Qe===Number.MAX_SAFE_INTEGER&&(Qe=0),++Qe}o(ht,"getNextInstanceId");const Dt=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${ht().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:l.LogLevel.Info,this.time=Ze(),d){if(!S.enabled(this.logLevel))return;n.length?qt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):qt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:Ze(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=Ze()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!S.enabled(this.logLevel))return;let f="";if(this.step){const[Q,D]=Ze(this.step.time),ee=Q*1e3+Math.floor(D/1e6);f=`${this.step.label?`${this.step.label} took `:""}${ee} ms`}if(!n){qt(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=Ze(this.time),_=h*1e3+Math.floor(p/1e6);qt(_>500?l.LogLevel.Warning:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${_} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=Dt.watches.get(t))==null||r.log(),Dt.watches.set(t,new Dt(t,e,...n))}static log(t,e){var n;(n=Dt.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Dt.watches.get(t))==null||n.stop(e),Dt.watches.delete(t)}},"_Stopwatch");let ct=Dt;ct.watches=new Map;function qt(t,e,...n){switch(t){case l.LogLevel.Warning:S.warn(e,...n);break;case l.LogLevel.Info:S.log(e,...n);break;default:S.debug(e,...n);break}}o(qt,"log");class bt{constructor(e){this.providerService=e}async provideCanonicalUri(e,n){var r,i;if(n.targetScheme==="https")switch(e.scheme){case x.scheme:{const a=this.providerService.getRepository(e);if(!a)return;const s=await this.providerService.getRepositoryContext(a,"http");return s.uri?l.Uri.parse(s.uri.endsWith(".git")?s.uri.slice(0,-4):s.uri):void 0}default:return(i=(r=this.providerService).getHttpsCloneUri)==null?void 0:i.call(r,e)}}}o(bt,"CanonicalUriProvider"),bt.SupportedSchemes=["https","ssh",x.scheme];class Ot{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),Se.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{S.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=A(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=A(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(A(e.uri)))}}o(Ot,"CodeNavigationServices");const Ht=globalThis.fetch;async function kt(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new l.CancellationError:i}}o(kt,"fetchWithCancellation");async function xt(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await kt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const Q=c.reduce((ve,ne)=>ve+ne.length,0),D=new Uint8Array(Q);let ee=0;for(const ve of c)D.set(ve,ee),ee+=ve.length;return D}p&&(c.push(p),u+=p.length);const _=Math.floor(u/(1024*1024));if(f<_){f=_;const Q={message:_+" MB"};i.report(Q)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(xt,"fetchUInt8ArrayWithMaxSizeAndCancellation");const On=globalThis.crypto;function En(){return On.randomUUID()}o(En,"uuid");/*! (c) Andrea Giammarchi - ISC */var lr={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;lr.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(ne,Pe){Q(this._ungap,ne,Pe)},delete:function(ne){delete this._ungap[ne]},get:function(ne){return this.has(ne)?this._ungap[ne][0]:null},getAll:function(ne){return this.has(ne)?this._ungap[ne].slice(0):[]},has:function(ne){return ne in this._ungap},set:function(ne,Pe){this._ungap[ne]=[n(Pe)]},forEach:function(ne,Pe){var ke=this;for(var We in ke._ungap)ke._ungap[We].forEach(je,We);function je(it){ne.call(Pe,it,n(We),ke)}o(je,"invoke")},toJSON:function(){return{}},toString:function(){var ne=[];for(var Pe in this._ungap)for(var ke=ee(Pe),We=0,je=this._ungap[Pe];We<je.length;We++)ne.push(ke+"="+ee(je[We]));return ne.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});lr.URLSearchParams=p;function p(ne){var Pe=i(null);switch(a(this,"_ungap",{value:Pe}),!0){case!ne:break;case typeof ne=="string":ne.charAt(0)==="?"&&(ne=ne.slice(1));for(var ke=ne.split("&"),We=0,je=ke.length;We<je;We++){var it=ke[We],Je=it.indexOf("=");-1<Je?Q(Pe,D(it.slice(0,Je)),D(it.slice(Je+1))):it.length&&Q(Pe,D(it),"")}break;case r(ne):for(var We=0,je=ne.length;We<je;We++){var it=ne[We];Q(Pe,it[0],it[1])}break;case"forEach"in ne:ne.forEach(_,Pe);break;default:for(var It in ne)Q(Pe,It,ne[It])}}o(p,"URLSearchParams");function _(ne,Pe){Q(this,Pe,ne)}o(_,"addEach");function Q(ne,Pe,ke){var We=r(ke)?ke.join(","):ke;Pe in ne?ne[Pe].push(We):ne[Pe]=[We]}o(Q,"appendTo");function D(ne){return decodeURIComponent(ne.replace(c,"%25").replace(u," "))}o(D,"decode");function ee(ne){return encodeURIComponent(ne).replace(s,ve)}o(ee,"encode");function ve(ne){return d[ne]}o(ve,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(D,ee){t.append.call(this,D,ee),D=this.toString(),h.set.call(this._usp,D?"?"+D:"")}o(p,"append");function _(D){t.delete.call(this,D),D=this.toString(),h.set.call(this._usp,D?"?"+D:"")}o(_,"del");function Q(D,ee){t.set.call(this,D,ee),D=this.toString(),h.set.call(this._usp,D?"?"+D:"")}return o(Q,"set"),function(D,ee){return D.append=p,D.delete=_,D.set=Q,i(D,"_usp",{configurable:!0,writable:!0,value:ee})}},"createSearchParamsPollute"),c=o(function(h){return function(p,_){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(_,p)}),_}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,_=a(p,"searchParams"),Q=a(p,"href"),D=a(p,"search"),ee;!_&&D&&D.set&&(ee=c(s(D)),r.defineProperties(p,{href:{get:function(){return Q.get.call(this)},set:function(ve){var ne=this._searchParams;Q.set.call(this,ve),ne&&u(ne)}},search:{get:function(){return D.get.call(this)},set:function(ve){var ne=this._searchParams;D.set.call(this,ve),ne&&u(ne)}},searchParams:{get:function(){return d(this,h),this._searchParams||ee(this,new URLSearchParams(this.search.slice(1)))},set:function(ve){d(this,h),ee(this,ve)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(lr.URLSearchParams.prototype,Object);const nr=lr.URLSearchParams,ar=60,Kr=ar*60,Ir=Kr*24,jn=Ir*7,vi=Ir*30,Jt=Ir*365;function zn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",zn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<ar?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<Kr?(r=Math.floor(n/ar),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<Ir?(r=Math.floor(n/Kr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<jn?(r=Math.floor(n/Ir),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<vi?(r=Math.floor(n/jn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<Jt?(r=Math.floor(n/vi),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/Jt),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(zn,"fromNow");var Ln,nn;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(nn||(nn={}));class Bn{constructor(){this[Ln]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=nn.None){const r=this._map.get(e);if(!!r)return n!==nn.None&&this.touch(r,n),r.value}set(e,n,r=nn.None){let i=this._map.get(e);if(i)i.value=n,r!==nn.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case nn.None:this.addItemLast(i);break;case nn.First:this.addItemFirst(i);break;case nn.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(Ln=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==nn.First&&n!==nn.Last)){if(n===nn.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===nn.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(Bn,"LinkedMap");class kn extends Bn{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=nn.AsNew){return super.get(e,n)}peek(e){return super.get(e,nn.None)}set(e,n){return super.set(e,n,nn.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(kn,"LRUCache");class wr{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(wr,"TaskDebouncer");const Gr=Symbol("QuickPickGoBack");var pi;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(_=>new mi(_)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const _=await d.provideSources();if(_){const Q=_.reduce((D,ee)=>("providerId"in ee&&D.push({label:`${ee.icon?`${ee.icon} `:""}${ee.name}`,description:ee.description,detail:ee.detail,url:ee.url,workspace:ee.url?void 0:ee.workspace,buttons:[zr.OpenInNewWindow],showMore:void 0}),D),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...Q)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const _=await new Promise(Q=>{h.push(f.onDidHide(()=>Q(void 0)),f.onDidChangeValue(D=>{D=D.trim(),D.length===0?f.items=c:f.activeItems.length===0||f.activeItems[0]instanceof si?f.items=[new si(n,D),...c]:f.items=c}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[D]=f.activeItems;(!(D instanceof si)||D.validate())&&Q(D)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[D]=f.activeItems;let ee=!0;if(D===void 0?ee=Boolean(f.value):ee=D instanceof si,ee){if(f.buttons.length===1)return;f.buttons=[zr.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(D=>{if(D===zr.AddToWorkspace){const[ee]=f.activeItems;if(!(ee instanceof si))return;ee.validate()&&(p=Ve.AddToWorkspace,Q(ee))}}),f.onDidTriggerItemButton(D=>{switch(D.button){case zr.OpenInNewWindow:p=Ve.NewWindow,Q(D.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(_ instanceof mi){const Q=await _.show(p,_.placeholder,a,s);if(Q===Gr)continue;const[D,ee]=Q;if(D&&"showMore"in D&&D.showMore!==void 0)continue;return[D,ee]}if(!(_&&"showMore"in _&&_.showMore!==void 0))return[_,p]}}finally{f.dispose(),h.forEach(_=>void _.dispose())}}o(e,"show"),t.show=e})(pi||(pi={}));class mi{constructor(e){this.provider=e}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new wr(500),c=[s];async function u(ee,ve,ne,Pe,ke){const We=await ee.provideSources(ve,ne,Pe,ke);return We==null?void 0:We.map(je=>"showMore"in je?{label:je.label,showMore:je.showMore}:"kind"in je?je:{label:`${je.icon?`${je.icon} `:""}${je.name}`,description:je.description,detail:je.detail,url:je.url,workspace:je.workspace,buttons:[zr.OpenInNewWindow]})}o(u,"getItems");async function d(ee){var ve;_=void 0;const ne=a.activeItems;a.items=(ve=ee!=null?ee:await D)!=null?ve:[],p&&ne.length!==0&&(a.activeItems=a.items.filter(Pe=>ne.some(ke=>ke.url===Pe.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,_,Q=e,D=u(this.provider,f,h,void 0,{sort:"updated"});try{const ee=await new Promise(ve=>{c.push(a.onDidHide(()=>ve(void 0)),a.onDidChangeValue(ne=>{p=!1,ne=ne.trim(),a.busy=!0;const Pe=s.debounce(ne?()=>u(this.provider,f,h,ne,{sort:"stars"}):()=>D);_===void 0&&(_=Pe.then(ke=>d(ke)))}),a.onDidAccept(async()=>{var ne;if(a.activeItems.length!==0){const[Pe]=a.activeItems;if("showMore"in Pe){await((ne=Pe.showMore)==null?void 0:ne.call(Pe)),D=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await D);return}ve(Pe)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,Q!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[ne]=a.activeItems;if(ne===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,zr.AddToWorkspace]}}),a.onDidTriggerButton(ne=>{if(ne===l.QuickInputButtons.Back){ve(Gr);return}if(ne===zr.AddToWorkspace){const[Pe]=a.activeItems;if(Pe===void 0)return;Q=Ve.AddToWorkspace,ve(Pe)}}),a.onDidTriggerItemButton(ne=>{switch(ne.button){case zr.OpenInNewWindow:Q=Ve.NewWindow,ve(ne.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),_=s.debounce(()=>D,0).then(ne=>d(ne))});return ee===Gr?ee:[ee,Q]}finally{a.dispose(),c.forEach(ee=>void ee.dispose())}}}o(mi,"RemoteSourceProviderPickerItem");class si{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[zr.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case K.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case K.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case K.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case K.File:return l.l10n.t("Open File from {0} Repository",e.name);case K.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(si,"RemoteUrlQuickPickItem");var zr;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(zr||(zr={}));function ta(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(ta,"groupBy");function Ti(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Ti,"isBinary");function na(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(na,"uniqueBy");function Mi(t,e){switch(t){case z.Branch:case z.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case z.Tag:return"$(tag)";case z.Commit:return"$(git-commit)"}}o(Mi,"headTypeToCodicon");function ra(t){switch(t){case ie.Active:return"$(layers-active)";case ie.Match:return"$(layers-dot)";case ie.Indexed:return"$(layers)"}}o(ra,"indexTypeToCodicon");function Xr(t,e){switch(t){case z.Branch:case z.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case z.Tag:return new l.ThemeIcon("tag");case z.Commit:return new l.ThemeIcon("git-commit")}}o(Xr,"headTypeToThemeIcon");function*Zr(t,e){for(const n of t)yield*e(n)}o(Zr,"flatMap");function*ei(t,e){for(const n of t)e(n)&&(yield n)}o(ei,"filter");function*ca(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(ca,"filterMap");function Hi(t,e){for(const n of t)if(e(n))return n}o(Hi,"find");function ti(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(ti,"join");function*Ji(t,e){for(const n of t)yield e(n)}o(Ji,"map");function Ne(t,e){for(const n of t)if(e(n))return!0;return!1}o(Ne,"some");function*rt(...t){for(const e of t)for(const n of e)yield n}o(rt,"union");function*pt(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(pt,"unique");const at="";function Lt(...t){if(t.length===1){const e=t[0];return e===void 0?at:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Lt,"defaultResolver");function Gt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:Lt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(Gt,"serialize");let Ct=0;function en(){return Ct===Number.MAX_SAFE_INTEGER&&(Ct=0),String(++Ct)}o(en,"getNextLockId");class Ut{constructor(){this.id=en()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(Ut,"Lock");class hn{constructor(e){this.lock=new Ut,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new ct(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new ct(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(hn,"ReaderWriterLock");class Pn{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new hn(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new hn(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(Pn,"KeyedReaderWriterLock");const Un=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new hn("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),Se.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!Se.changed(t,"experimental.syncRecentList"))return;const e=Se.get("experimental.syncRecentList")===!0?[Un.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=na(t.map(n=>n.rootUri),n=>A(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=A(t);e=e.filter(r=>A(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Un.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${A(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Un.storageKey,this.toStorage(e))}catch(s){throw S.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${A(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&ie.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:Qt(s),timestamp:Date.now()})}try{await this.storageService.store(Un.storageKey,this.toStorage(e))}catch(n){throw S.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&M(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return S.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Un.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let Yn=Un;Yn.storageKey="workspaceRepositories",Yn.storageSchemaVersion=1;function er(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(er,"hasChanges");function Fn(t){return er(t.changes)}o(Fn,"hasUncommittedChanges");function Qt(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case R.Created:e++;break;case R.Changed:n++;break;case R.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(Qt,"toChangesSummary");function sn(t,e,{compact:n=!0,preamble:r,separator:i=", ",short:a=!1,single:s=!1}={}){if(!er(e))return t===z.Branch||t===z.RemoteBranch?l.l10n.t("Everything up to date"):l.l10n.t("No uncommitted changes");const{added:c,changed:u,deleted:d}=e;if(s){const h=c+u+d;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let f=`${r!=null?r:""}`;return(c||!n)&&(f+=a?`+${c}`:c===1?l.l10n.t("{0} file added",c):l.l10n.t("{0} files added",c),(u||d||!n)&&(f+=i)),(u||!n)&&(f+=a?`~${u}`:u===1?l.l10n.t("{0} file changed",u):l.l10n.t("{0} files changed",u),(d||!n)&&(f+=i)),(d||!n)&&(f+=a?`-${d}`:d===1?l.l10n.t("{0} file deleted",d):l.l10n.t("{0} files deleted",d)),f}o(sn,"formatChangesSummary");class rn extends Error{constructor(e){var n;const r=typeof e=="string"?e:Xn.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,rn)}}o(rn,"ProviderNotFoundError");class yn{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(yn,"VirtualRepository");var I;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(I||(I={}));var j;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(j||(j={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(j||(j={}));var Ue;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(Ue||(Ue={}));var tt;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(tt||(tt={}));var Rt;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(O(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(Rt||(Rt={}));function Ft(t){return t!==void 0&&typeof t.then=="function"}o(Ft,"isPromise");const pn="";function mn(...t){if(t.length===1){const e=t[0];return e===void 0?pn:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(mn,"gate_defaultResolver");function Wt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:mn)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!Ft(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(Wt,"gate");var gn=Object.defineProperty,wn=Object.getOwnPropertyDescriptor,Bt=o((t,e,n,r)=>{for(var i=r>1?void 0:r?wn(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&gn(e,n,i),i},"__decorateClass");class mt{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=xn.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(mt,"Messages"),Bt([Wt(()=>"")],mt.prototype,"showRepositoryNotValidMessage",1),Bt([Wt(()=>"")],mt.prototype,"showGitHubStatus500Message",1),Bt([Wt(()=>"")],mt.prototype,"showStatus401Message",1),Bt([Wt(()=>"")],mt.prototype,"showStatus403Message",1),Bt([Wt()],mt.prototype,"showProviderNotFoundMessage",1);const xn=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Tn=new mt;async function Cn(t,e,n){var r,i,a,s,c;if(be.instance.publicLog2("openWorkspace",{location:e.location}),e.location===Ve.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===Ve.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(Yt?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(_=>_.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(_=>_.name).join(", ")),{modal:!0},f,h)!==f){be.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===Ve.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=_o())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=_o())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),be.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===Ve.NewWindow,forceLocalWindow:u})}o(Cn,"openWorkspace");var or=ur(6724),jt=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,_r=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Hr(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&jt(e,n,i),i},"providers_decorateClass");const fn=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this),l.workspace.onDidSaveTextDocument(this.onDocumentChanged,this),l.workspace.onDidSaveNotebookDocument(this.onDocumentChanged,this),l.window.onDidChangeActiveNotebookEditor(this.onDocumentChanged,this),l.window.onDidChangeActiveTextEditor(this.onDocumentChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(A(t.uri));!e||(S.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=A(t.uri);if(t.uri.scheme!==fn.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new yn(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onDocumentChanged(t){var e,n;let r;t&&"uri"in t?r=t.uri:t&&"document"in t&&((e=l.window.activeTextEditor)==null?void 0:e.document.uri.toString())===t.document.uri.toString()?r=t.document.uri:t&&"notebook"in t&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.toString())===t.notebook.uri.toString()&&(r=t.notebook.uri);const i=r&&r.scheme===x.scheme?this.getVirtualRootUri(r):void 0;i&&this.changeStoreMaybeHasChanges(i,r)?Qn(Gn.ActiveResourceHasChanges,!0):Qn(Gn.ActiveResourceHasChanges,!1)}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=A(e.uri);if(e.uri.scheme!==fn.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Qn(Gn.HasVirtualFolders,this._repositories.size!==0),Qn(Gn.VirtualFolderProviders,ti(pt(Ji(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Ji(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Qn(Gn.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,_]of[...this._repositories])(_==null?void 0:_.provider.id)===t&&(this._repositories.delete(p),h.push(_));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Ji(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==fn.scheme)return;const i=(n=this._repositories.get(A(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ei(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:fn.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:fn.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new rn(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new rn(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new rn(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new rn(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new rn(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new rn(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:zn(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${x.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Mi(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${sn(a.ref.type,a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${ra(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:Ve.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i,a,s,c;if(t)return(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[];const u=new Map;for(const d of this._providers.values()){const f=(c=(s=(a=d.provider).getRemoteWorkspaceSourceProviders)==null?void 0:s.call(a))!=null?c:[];for(const h of f)if(h.qualifiedLabel){const p=u.get(h.label);p!==void 0?u.set(h.label,p.concat(h).map(_=>{var Q;return{..._,label:(Q=_.qualifiedLabel)!=null?Q:_.label}})):u.set(h.label,[h])}else u.set(h.label,[h])}return[...Zr(u.values(),d=>d)]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===x.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new rn(t);return e==null?void 0:e.provider.getAuthentication(t)}getHttpsCloneUri(t){var e,n;const r=this.canOpenRemoteUrl(t.toString());return(n=r==null?void 0:(e=r.provider.provider).getHttpsCloneUri)==null?void 0:n.call(e,t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=Ve.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return Cn(this,t,e)}createProviderUri(t,e,n){return x.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(fn.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return x.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===fn.scheme?x.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return x.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(fn.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n,r){const{provider:i,repo:a,ref:s}=this.getVirtualUriMetadata(t);if(e===I.Repository)return this.getRemoteUri(i.id,{repo:a,path:n,item:r});if(e===I.PullRequest||e===void 0&&(s==null?void 0:s.type)===me.PullRequest){if((s==null?void 0:s.type)===me.PullRequest)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:s.id},path:n,item:r});const{pullRequest:c}=await this.getMetadata(t);if(e===I.PullRequest&&c)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:c.id},path:n,item:r})}if(e===I.Branch||e===void 0&&(s==null?void 0:s.type)===me.Branch){if((s==null?void 0:s.type)===me.Branch)return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===z.Branch||c.type===z.RemoteBranch&&e===I.Branch)return this.getRemoteUri(i.id,{repo:a,branch:c.branch.name,path:n,item:r})}if(e===I.Tag||e===void 0&&(s==null?void 0:s.type)===me.Tag){if((s==null?void 0:s.type)===me.Tag)return this.getRemoteUri(i.id,{repo:a,tag:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===z.Tag)return this.getRemoteUri(i.id,{repo:a,tag:c.detached.name,path:n,item:r})}if(e===I.Commit||e===void 0&&((s==null?void 0:s.type)===me.Commit||(s==null?void 0:s.type)===me.Tree&&O(s.id))){if((s==null?void 0:s.type)===me.Commit||(s==null?void 0:s.type)===me.Tree&&O(s.id))return this.getRemoteUri(i.id,{repo:a,sha:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(e===I.Commit||c.type===z.Commit)return this.getRemoteUri(i.id,{repo:a,sha:c.sha,path:n,item:r})}if(e===void 0&&(s==null?void 0:s.type)===me.Tree&&!O(s.id))return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});if(e===void 0)return this.getRemoteUri(i.id,{repo:a,path:n,item:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(fn.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=x.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=x.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=x.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(fn.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return x.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(x.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case R.Created:case R.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Kt(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case R.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return Se.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=A(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new rn(t);const s=Rt.decode(t);(s==null?void 0:s.type)===tt.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw et.asVirtualProviderErrorCode(c)===re.InvalidRepositoryError&&Tn.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new ct(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t,e){var n,r;e=e!=null?e:Se.get("gitProtocol");let{HEAD:i,cloneUrl:a}=await this.getMetadata(t.uri);if(((n=i.branch)==null?void 0:n.remote)!==void 0){const s=this.getRemoteUri(t.provider.id,{repo:i.branch.remote.repo}),c=(r=await this.createWorkspaceForRemoteUrl(s.toString()))==null?void 0:r.uri;if(c===void 0)throw new Error(`Unable to determine repository context for remote url '${s.toString()}'`);return{cloneUrl:a}=await this.getMetadata(c),{uri:e==="http"?a.http:a.ssh,ref:i.branch.name,name:i.branch.remote.name}}return{uri:e==="http"?a.http:a.ssh,ref:i.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),Yt)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){S.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await Or(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(A(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new rn(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw et.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ge.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return ta(t.sort((e,n)=>n.timestamp-e.timestamp),e=>A(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(fn.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(fn.authoritySeparator)===-1}},"_VirtualProviderService");let Xn=fn;Xn.scheme="vscode-vfs",Xn.authoritySeparator="+",Xn.baseVirtualWorkspaceUri=l.Uri.parse(`${fn.scheme}://`),_r([Gt()],Xn.prototype,"getMetadataCore",1);var Lr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(Lr||(Lr={}));function Ur(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(Ur,"extractContext");function li(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=Ur(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=Qr(s),{type:2,uri:c,cellIndex:d,range:i}}return i=Qr(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(li,"getFileAndPosition");function Qr(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(Qr,"getRangeOrSelectionForLink");function Vr(){return`${l.env.appName.toLowerCase().includes("insiders")?"insiders.":""}vscode.dev`}o(Vr,"getVscodeDevHost");function Yr(t,e,n){async function r(s,c){await Or(t,void 0);const[u,d]=typeof s=="string"?[{url:s,workspace:void 0}]:await pi.show(t,c,l.l10n.t("Enter a remote url, or select a remote provider"),c===Ve.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let f;if(u.workspace)f=u.workspace,f.location=d!=null?d:f.location;else if(f=await t.createWorkspaceForRemoteUrl(u.url,void 0,d!=null?d:c),!f){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await Cn(t,f)}catch(f){if(n.sendException(f),et.asVirtualProviderErrorCode(f)===re.InvalidCredentialsError){const{action:h}=f;if(h){Tn.showStatus401Message(()=>h());return}}S.error(f)}}o(r,"openRepository");async function i(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(f=>({label:f.name,description:f.provider.name,repository:f})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}o(i,"getRepository");async function a(s,c,u=!1){var d;const f=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=li(c);if(!h)return;const p=s.getRelativeFilePath(h.uri),_=await s.getMetadata(f.uri),Q=((d=_.HEAD.branch)==null?void 0:d.name)===_.defaultBranch.name||_.pullRequest?await s.getBestRemoteUri(f.uri,I.Branch,p,{selection:h.range,resourceUri:h.uri}):await s.getBestRemoteUri(f.uri,void 0,p,{selection:h.range,resourceUri:h.uri});if(Q!==void 0)return Q.with({authority:`${Vr()}/${Q.authority}`,fragment:u?Q.fragment:void 0,query:u?Q.query:void 0,path:Y(Q.path)})}return o(a,"getLink"),[l.commands.registerCommand("remoteHub.openRepository",s=>(n.publicLog2("command.openRepository"),r(s))),l.commands.registerCommand("remoteHub.continueOn.openRepository",s=>(n.publicLog2("command.continueOn.openRepository"),r(s))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await i(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return c.with({authority:`${Vr()}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Vr()}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(u)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Vr()}/${c.authority}`});await l.env.clipboard.writeText(u.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async s=>{const c=await a(t,s,!0);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async s=>{const c=await a(t,s,!1);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await i(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Qn(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Yt?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(Yr,"registerCommands");function br(t){return t}o(br,"command");async function ci(t,e){return l.commands.executeCommand(t,e)}o(ci,"executeCommand");function yi(t,e,n){return new qe(new qr(t),new qr(e)).ComputeDiff(n).changes}o(yi,"stringDiff");class Er{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Er,"DiffChange");var ui;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(ui||(ui={}));function wi(t,e){return(e<<5)-e+t|0}o(wi,"numberHash");function Pi(t,e){e=wi(149417,e);for(let n=0,r=t.length;n<r;n++)e=wi(t.charCodeAt(n),e);return e}o(Pi,"stringHash");class qr{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(qr,"StringDiffSequence");class kr{static Assert(e,n){if(!e)throw new Error(n)}}o(kr,"Debug");class tr{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(tr,"MyArray");var Si;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(Si||(Si={}));class he{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Er(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(he,"DiffChangeHelper");class qe{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=qe._getElements(e),[c,u,d]=qe._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(qe._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=Pi(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=qe._getStrictElement(this._originalSequence,e),i=qe._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(kr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Er(e,0,r,i-r+1)]):e<=n?(kr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Er(e,n-e+1,r,0)]):(kr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),kr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Er(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Er(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,_,Q,D,ee,ve,ne){let Pe=null,ke=null,We=new he,je=n,it=r,Je=_[0]-ee[0]-i,It=-1073741824,Xt=this.m_forwardHistory.length-1;do{const an=Je+e;an===je||an<it&&d[an-1]<d[an+1]?(h=d[an+1],Q=h-Je-i,h<It&&We.MarkNextChange(),It=h,We.AddModifiedElement(h+1,Q),Je=an+1-e):(h=d[an-1]+1,Q=h-Je-i,h<It&&We.MarkNextChange(),It=h-1,We.AddOriginalElement(h,Q+1),Je=an-1-e),Xt>=0&&(d=this.m_forwardHistory[Xt],e=d[0],je=1,it=d.length-1)}while(--Xt>=-1);if(Pe=We.getReverseChanges(),ne[0]){let an=_[0]+1,$t=ee[0]+1;if(Pe!==null&&Pe.length>0){const dn=Pe[Pe.length-1];an=Math.max(an,dn.getOriginalEnd()),$t=Math.max($t,dn.getModifiedEnd())}ke=[new Er(an,p-an+1,$t,D-$t+1)]}else{We=new he,je=s,it=c,Je=_[0]-ee[0]-u,It=1073741824,Xt=ve?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const an=Je+a;an===je||an<it&&f[an-1]>=f[an+1]?(h=f[an+1]-1,Q=h-Je-u,h>It&&We.MarkNextChange(),It=h+1,We.AddOriginalElement(h+1,Q+1),Je=an+1-a):(h=f[an-1],Q=h-Je-u,h>It&&We.MarkNextChange(),It=h,We.AddModifiedElement(h+1,Q+1),Je=an-1-a),Xt>=0&&(f=this.m_reverseHistory[Xt],a=f[0],je=1,it=f.length-1)}while(--Xt>=-1);ke=We.getChanges()}return this.ConcatenateChanges(Pe,ke)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,_=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const Q=n-e+(i-r),D=Q+1,ee=new Int32Array(D),ve=new Int32Array(D),ne=i-r,Pe=n-e,ke=e-r,We=n-i,it=(Pe-ne)%2==0;ee[ne]=e,ve[Pe]=n,c[0]=!1;for(let Je=1;Je<=Q/2+1;Je++){let It=0,Xt=0;f=this.ClipDiagonalBound(ne-Je,Je,ne,D),h=this.ClipDiagonalBound(ne+Je,Je,ne,D);for(let $t=f;$t<=h;$t+=2){$t===f||$t<h&&ee[$t-1]<ee[$t+1]?u=ee[$t+1]:u=ee[$t-1]+1,d=u-($t-ne)-ke;const dn=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(ee[$t]=u,u+d>It+Xt&&(It=u,Xt=d),!it&&Math.abs($t-Pe)<=Je-1&&u>=ve[$t])return a[0]=u,s[0]=d,dn<=ve[$t]&&1447>0&&Je<=1447+1?this.WALKTRACE(ne,f,h,ke,Pe,p,_,We,ee,ve,u,n,a,d,i,s,it,c):null}const an=(It-e+(Xt-r)-Je)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(It,an))return c[0]=!0,a[0]=It,s[0]=Xt,an>0&&1447>0&&Je<=1447+1?this.WALKTRACE(ne,f,h,ke,Pe,p,_,We,ee,ve,u,n,a,d,i,s,it,c):(e++,r++,[new Er(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(Pe-Je,Je,Pe,D),_=this.ClipDiagonalBound(Pe+Je,Je,Pe,D);for(let $t=p;$t<=_;$t+=2){$t===p||$t<_&&ve[$t-1]>=ve[$t+1]?u=ve[$t+1]-1:u=ve[$t-1],d=u-($t-Pe)-We;const dn=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(ve[$t]=u,it&&Math.abs($t-ne)<=Je&&u<=ee[$t])return a[0]=u,s[0]=d,dn>=ee[$t]&&1447>0&&Je<=1447+1?this.WALKTRACE(ne,f,h,ke,Pe,p,_,We,ee,ve,u,n,a,d,i,s,it,c):null}if(Je<=1447){let $t=new Int32Array(h-f+2);$t[0]=ne-f+1,tr.Copy2(ee,f,$t,1,h-f+1),this.m_forwardHistory.push($t),$t=new Int32Array(_-p+2),$t[0]=Pe-p+1,tr.Copy2(ve,p,$t,1,_-p+1),this.m_reverseHistory.push($t)}}return this.WALKTRACE(ne,f,h,ke,Pe,p,_,We,ee,ve,u,n,a,d,i,s,it,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,_=r.modifiedStart-h;if(p<i||_<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(_,_+r.modifiedLength))break;const D=(p===i&&_===a?5:0)+this._boundaryScore(p,r.originalLength,_,r.modifiedLength);D>d&&(d=D,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const _=this._findBetterContiguousSequence(c,d,f,p,s);if(_){const[Q,D]=_;(Q!==i.originalStart+i.originalLength||D!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=Q-i.originalStart,i.modifiedLength=D-i.modifiedStart,a.originalStart=Q+s,a.modifiedStart=D+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const _=this._contiguousSequenceScore(h,p,a);_>0&&_>u&&(u=_,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return tr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],tr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return tr.Copy(e,0,i,0,e.length),tr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(kr.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),kr.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Er(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o(qe,"LcsDiff");var st;(function(t){function e(r,i){return r instanceof fe?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof fe?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(st||(st={}));var St;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(St||(St={}));const Tt=o(class{constructor(t,e,n,r){this.diffCache=new kn(32),this.indexDocumentCache=new kn(32),this.codeDocumentCache=new kn(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===R.Created||i===R.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===R.Created||i===R.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const ee of c){if(h<ee.originalStart)break;const ve=ee.modifiedLength-ee.originalLength;if(ee.originalStart<=u){if(u<ee.originalStart+ee.originalLength)return;d+=ve}else if(f<ee.originalStart+ee.originalLength)return;if(ee.originalStart<=f){if(f<ee.originalStart+ee.originalLength)return;h+=ve}}const p=s.positionAt(d),_=s.positionAt(h),Q=a.getText(e),D=s.getText(st.makeRange(s,{start:p,end:_}));if(Q===D)return new l.Range(p.line,p.character,_.line,_.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new fe(t,Number.MAX_VALUE,Tt.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:yi(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let Nt=Tt;Nt.textDecoder=new TextDecoder("utf8");var ln;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(ln||(ln={}));class fe{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=fe.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(fe,"TextDocument");var Ge;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Ge||(Ge={}));var He;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(He||(He={}));var lt;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=He.MAX_VALUE),i===Number.MAX_VALUE&&(i=He.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&Ke.uinteger(i.line)&&Ke.uinteger(i.character)}o(n,"is"),t.is=n})(lt||(lt={}));var Et;(function(t){function e(r,i,a,s){if(Ke.uinteger(r)&&Ke.uinteger(i)&&Ke.uinteger(a)&&Ke.uinteger(s))return{start:lt.create(r,i),end:lt.create(a,s)};if(lt.is(r)&&lt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&lt.is(i.start)&&lt.is(i.end)}o(n,"is"),t.is=n})(Et||(Et={}));var Vt;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Et.is(i.range)&&(Ke.string(i.uri)||Ke.undefined(i.uri))}o(n,"is"),t.is=n})(Vt||(Vt={}));var An;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Et.is(i.targetRange)&&Ke.string(i.targetUri)&&(Et.is(i.targetSelectionRange)||Ke.undefined(i.targetSelectionRange))&&(Et.is(i.originSelectionRange)||Ke.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(An||(An={}));var In;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.numberRange(i.red,0,1)&&Ke.numberRange(i.green,0,1)&&Ke.numberRange(i.blue,0,1)&&Ke.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(In||(In={}));var Vn;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Et.is(i.range)&&In.is(i.color)}o(n,"is"),t.is=n})(Vn||(Vn={}));var di;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.string(i.label)&&(Ke.undefined(i.textEdit)||Ci.is(i))&&(Ke.undefined(i.additionalTextEdits)||Ke.typedArray(i.additionalTextEdits,Ci.is))}o(n,"is"),t.is=n})(di||(di={}));var fi;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(fi||(fi={}));var Ui;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return Ke.defined(a)&&(u.startCharacter=a),Ke.defined(s)&&(u.endCharacter=s),Ke.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.uinteger(i.startLine)&&Ke.uinteger(i.startLine)&&(Ke.undefined(i.startCharacter)||Ke.uinteger(i.startCharacter))&&(Ke.undefined(i.endCharacter)||Ke.uinteger(i.endCharacter))&&(Ke.undefined(i.kind)||Ke.string(i.kind))}o(n,"is"),t.is=n})(Ui||(Ui={}));var sr;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Vt.is(i.location)&&Ke.string(i.message)}o(n,"is"),t.is=n})(sr||(sr={}));var ni;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(ni||(ni={}));var Ii;(function(t){t.Unnecessary=1,t.Deprecated=2})(Ii||(Ii={}));var ia;(function(t){function e(n){var r=n;return r!=null&&Ke.string(r.href)}o(e,"is"),t.is=e})(ia||(ia={}));var wa;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return Ke.defined(a)&&(d.severity=a),Ke.defined(s)&&(d.code=s),Ke.defined(c)&&(d.source=c),Ke.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return Ke.defined(a)&&Et.is(a.range)&&Ke.string(a.message)&&(Ke.number(a.severity)||Ke.undefined(a.severity))&&(Ke.integer(a.code)||Ke.string(a.code)||Ke.undefined(a.code))&&(Ke.undefined(a.codeDescription)||Ke.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Ke.string(a.source)||Ke.undefined(a.source))&&(Ke.undefined(a.relatedInformation)||Ke.typedArray(a.relatedInformation,sr.is))}o(n,"is"),t.is=n})(wa||(wa={}));var Li;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return Ke.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.title)&&Ke.string(i.command)}o(n,"is"),t.is=n})(Li||(Li={}));var Ci;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return Ke.objectLiteral(s)&&Ke.string(s.newText)&&Et.is(s.range)}o(i,"is"),t.is=i})(Ci||(Ci={}));var ji;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Ke.objectLiteral(i)&&Ke.string(i.label)&&(Ke.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ke.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(ji||(ji={}));var xr;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(xr||(xr={}));var ki;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Ci.is(s)&&(ji.is(s.annotationId)||xr.is(s.annotationId))}o(i,"is"),t.is=i})(ki||(ki={}));var aa;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&_i.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(aa||(aa={}));var oa;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(oa||(oa={}));var Wi;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&Ke.string(i.oldUri)&&Ke.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(Wi||(Wi={}));var Jn;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ke.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ke.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(Jn||(Jn={}));var Ar;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return Ke.string(i.kind)?oa.is(i)||Wi.is(i)||Jn.is(i):aa.is(i)}))}o(e,"is"),t.is=e})(Ar||(Ar={}));var ua=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Ci.insert(e,n):xr.is(r)?(a=r,i=ki.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=ki.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Ci.replace(e,n):xr.is(r)?(a=r,i=ki.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=ki.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Ci.del(e):xr.is(n)?(i=n,r=ki.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=ki.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Sr=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(xr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),rs=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Sr(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(aa.is(r)){var i=new ua(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new ua(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(_i.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new ua(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new ua(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Sr,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ji.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=oa.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=oa.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;ji.is(r)||xr.is(r)?a=r:i=r;var s,c;if(a===void 0?s=Wi.create(e,n,i):(c=xr.is(a)?a:this._changeAnnotations.manage(a),s=Wi.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ji.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=Jn.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=Jn.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),xi;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)}o(n,"is"),t.is=n})(xi||(xi={}));var $i;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.integer(i.version)}o(n,"is"),t.is=n})($i||($i={}));var _i;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&(i.version===null||Ke.integer(i.version))}o(n,"is"),t.is=n})(_i||(_i={}));var Ki;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.string(i.languageId)&&Ke.integer(i.version)&&Ke.string(i.text)}o(n,"is"),t.is=n})(Ki||(Ki={}));var Fi;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Fi||(Fi={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(Fi||(Fi={}));var Ma;(function(t){function e(n){var r=n;return Ke.objectLiteral(n)&&Fi.is(r.kind)&&Ke.string(r.value)}o(e,"is"),t.is=e})(Ma||(Ma={}));var Pa;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Pa||(Pa={}));var Ya;(function(t){t.PlainText=1,t.Snippet=2})(Ya||(Ya={}));var qa;(function(t){t.Deprecated=1})(qa||(qa={}));var Qa;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.newText)&&Et.is(i.insert)&&Et.is(i.replace)}o(n,"is"),t.is=n})(Qa||(Qa={}));var Xa;(function(t){t.asIs=1,t.adjustIndentation=2})(Xa||(Xa={}));var Za;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Za||(Za={}));var Ia;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Ia||(Ia={}));var Sa;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return Ke.string(i)||Ke.objectLiteral(i)&&Ke.string(i.language)&&Ke.string(i.value)}o(n,"is"),t.is=n})(Sa||(Sa={}));var La;(function(t){function e(n){var r=n;return!!r&&Ke.objectLiteral(r)&&(Ma.is(r.contents)||Sa.is(r.contents)||Ke.typedArray(r.contents,Sa.is))&&(n.range===void 0||Et.is(n.range))}o(e,"is"),t.is=e})(La||(La={}));var eo;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(eo||(eo={}));var to;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return Ke.defined(r)&&(s.documentation=r),Ke.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(to||(to={}));var da;(function(t){t.Text=1,t.Read=2,t.Write=3})(da||(da={}));var no;(function(t){function e(n,r){var i={range:n};return Ke.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(no||(no={}));var ka;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(ka||(ka={}));var xa;(function(t){t.Deprecated=1})(xa||(xa={}));var ro;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(ro||(ro={}));var bi;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.name)&&Ke.number(i.kind)&&Et.is(i.range)&&Et.is(i.selectionRange)&&(i.detail===void 0||Ke.string(i.detail))&&(i.deprecated===void 0||Ke.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(bi||(bi={}));var Ei;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Ei||(Ei={}));var fa;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.typedArray(i.diagnostics,wa.is)&&(i.only===void 0||Ke.typedArray(i.only,Ke.string))}o(n,"is"),t.is=n})(fa||(fa={}));var Fa;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):Li.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.title)&&(i.diagnostics===void 0||Ke.typedArray(i.diagnostics,wa.is))&&(i.kind===void 0||Ke.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Li.is(i.command))&&(i.isPreferred===void 0||Ke.boolean(i.isPreferred))&&(i.edit===void 0||Ar.is(i.edit))}o(n,"is"),t.is=n})(Fa||(Fa={}));var io;(function(t){function e(r,i){var a={range:r};return Ke.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Et.is(i.range)&&(Ke.undefined(i.command)||Li.is(i.command))}o(n,"is"),t.is=n})(io||(io={}));var Na;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.uinteger(i.tabSize)&&Ke.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(Na||(Na={}));var ao;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Et.is(i.range)&&(Ke.undefined(i.target)||Ke.string(i.target))}o(n,"is"),t.is=n})(ao||(ao={}));var oo;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Et.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(oo||(oo={}));var Ro=null,To;(function(t){function e(a,s,c,u){return new so(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(Ke.defined(s)&&Ke.string(s.uri)&&(Ke.undefined(s.languageId)||Ke.string(s.languageId))&&Ke.uinteger(s.lineCount)&&Ke.func(s.getText)&&Ke.func(s.positionAt)&&Ke.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(Q,D){var ee=Q.range.start.line-D.range.start.line;return ee===0?Q.range.start.character-D.range.start.character:ee}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),_=a.offsetAt(h.range.end);if(_<=d)c=c.substring(0,p)+h.newText+c.substring(_,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var _=s(u[f],d[h]);_<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(To||(To={}));var so=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return lt.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return lt.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Ke;(function(t){var e=Object.prototype.toString;function n(_){return typeof _!="undefined"}o(n,"defined"),t.defined=n;function r(_){return typeof _=="undefined"}o(r,"undefined"),t.undefined=r;function i(_){return _===!0||_===!1}o(i,"boolean"),t.boolean=i;function a(_){return e.call(_)==="[object String]"}o(a,"string"),t.string=a;function s(_){return e.call(_)==="[object Number]"}o(s,"number"),t.number=s;function c(_,Q,D){return e.call(_)==="[object Number]"&&Q<=_&&_<=D}o(c,"numberRange"),t.numberRange=c;function u(_){return e.call(_)==="[object Number]"&&-2147483648<=_&&_<=2147483647}o(u,"integer"),t.integer=u;function d(_){return e.call(_)==="[object Number]"&&0<=_&&_<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(_){return e.call(_)==="[object Function]"}o(f,"func"),t.func=f;function h(_){return _!==null&&typeof _=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(_,Q){return Array.isArray(_)&&_.every(Q)}o(p,"typedArray"),t.typedArray=p})(Ke||(Ke={}));var Yi;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(Yi||(Yi={}));var sa;(function(t){function e(n){const r=n;return r!=null&&(Yi.number(r.value)||Yi.string(r.value))&&Yi.string(r.target)}o(e,"is"),t.is=e})(sa||(sa={}));class lo extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(lo,"ProtocolDiagnostic");var Ai;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(Ai||(Ai={}));var Ca;(function(t){function e(n){const r=n;return r&&Ai.string(r.language)&&Ai.string(r.value)}o(e,"is"),t.is=e})(Ca||(Ca={}));function C(t){const e=o(V=>l.Uri.parse(V),"nullConverter"),n=t!=null?t:e;function r(V){return n(V)}o(r,"asUri");function i(V){return V.map(a)}o(i,"asDiagnostics");function a(V){const yt=new lo(h(V.range),V.message,_(V.severity),V.data);return V.code!==void 0&&(ia.is(V.codeDescription)?yt.code={value:V.code,target:r(V.codeDescription.href)}:sa.is(V.code)?(yt.hasDiagnosticCode=!0,yt.code={value:V.code.value,target:r(V.code.target)}):yt.code=V.code),V.source&&(yt.source=V.source),V.relatedInformation&&(yt.relatedInformation=s(V.relatedInformation)),Array.isArray(V.tags)&&(yt.tags=u(V.tags)),yt}o(a,"asDiagnostic");function s(V){return V.map(c)}o(s,"asRelatedInformation");function c(V){return new l.DiagnosticRelatedInformation(Je(V.location),V.message)}o(c,"asDiagnosticRelatedInformation");function u(V){if(!V)return;const yt=[];for(const bn of V){const jr=d(bn);jr!==void 0&&yt.push(jr)}return yt.length>0?yt:void 0}o(u,"asDiagnosticTags");function d(V){switch(V){case Ii.Unnecessary:return l.DiagnosticTag.Unnecessary;case Ii.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(V){if(!!V)return new l.Position(V.line,V.character)}o(f,"asPosition");function h(V){if(!!V)return new l.Range(f(V.start),f(V.end))}o(h,"asRange");function p(V){return V.map(yt=>h(yt))}o(p,"asRanges");function _(V){if(V==null)return l.DiagnosticSeverity.Error;switch(V){case ni.Error:return l.DiagnosticSeverity.Error;case ni.Warning:return l.DiagnosticSeverity.Warning;case ni.Information:return l.DiagnosticSeverity.Information;case ni.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(_,"asDiagnosticSeverity");function Q(V){if(Ai.string(V))return new l.MarkdownString(V);if(Ca.is(V))return new l.MarkdownString().appendCodeblock(V.value,V.language);if(Array.isArray(V)){const bn=[];for(const jr of V){const Ja=new l.MarkdownString;Ca.is(jr)?Ja.appendCodeblock(jr.value,jr.language):Ja.appendMarkdown(jr),bn.push(Ja)}return bn}let yt;switch(V.kind){case Fi.Markdown:return new l.MarkdownString(V.value);case Fi.PlainText:return yt=new l.MarkdownString,yt.appendText(V.value),yt;default:return yt=new l.MarkdownString,yt.appendText(`Unsupported Markup content received. Kind is: ${V.kind}`),yt}}o(Q,"asHoverContent");function D(V){if(Ai.string(V))return V;switch(V.kind){case Fi.Markdown:return new l.MarkdownString(V.value);case Fi.PlainText:return V.value;default:return`Unsupported Markup content received. Kind is: ${V.kind}`}}o(D,"asDocumentation");function ee(V){if(!!V)return new l.Hover(Q(V.contents),h(V.range))}o(ee,"asHover");function ve(V){if(!!V)return new l.TextEdit(h(V.range),V.newText)}o(ve,"asTextEdit");function ne(V){if(!!V)return V.map(ve)}o(ne,"asTextEdits");function Pe(V){if(!V)return;const yt=new l.SignatureHelp;return Ai.number(V.activeSignature)?yt.activeSignature=V.activeSignature:yt.activeSignature=0,Ai.number(V.activeParameter)?yt.activeParameter=V.activeParameter:yt.activeParameter=0,V.signatures&&(yt.signatures=ke(V.signatures)),yt}o(Pe,"asSignatureHelp");function ke(V){return V.map(We)}o(ke,"asSignatureInformations");function We(V){const yt=new l.SignatureInformation(V.label);return V.documentation!==void 0&&(yt.documentation=D(V.documentation)),V.parameters!==void 0&&(yt.parameters=je(V.parameters)),V.activeParameter!==void 0&&(yt.activeParameter=V.activeParameter),yt}o(We,"asSignatureInformation");function je(V){return V.map(it)}o(je,"asParameterInformations");function it(V){const yt=new l.ParameterInformation(V.label);return V.documentation&&(yt.documentation=D(V.documentation)),yt}o(it,"asParameterInformation");function Je(V){if(!!V)return new l.Location(n(V.uri),h(V.range))}o(Je,"asLocation");function It(V){if(!!V)return $t(V)}o(It,"asDeclarationResult");function Xt(V){if(!!V)return $t(V)}o(Xt,"asDefinitionResult");function an(V){if(!V)return;const yt={targetUri:n(V.targetUri),targetRange:h(V.targetSelectionRange),originSelectionRange:h(V.originSelectionRange),targetSelectionRange:h(V.targetSelectionRange)};if(!yt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return yt}o(an,"asLocationLink");function $t(V){if(!!V)return Ai.array(V)?V.length===0?[]:An.is(V[0])?V.map(jr=>an(jr)):V.map(bn=>Je(bn)):An.is(V)?[an(V)]:Je(V)}o($t,"asLocationResult");function dn(V){if(!!V)return V.map(yt=>Je(yt))}o(dn,"asReferences");function Tr(V){if(!!V)return V.map(Di)}o(Tr,"asDocumentHighlights");function Di(V){const yt=new l.DocumentHighlight(h(V.range));return Ai.number(V.kind)&&(yt.kind=Ri(V.kind)),yt}o(Di,"asDocumentHighlight");function Ri(V){switch(V){case da.Text:return l.DocumentHighlightKind.Text;case da.Read:return l.DocumentHighlightKind.Read;case da.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Ri,"asDocumentHighlightKind");function la(V,yt){if(!!V)return V.map(bn=>al(bn,yt))}o(la,"asSymbolInformations");function Bi(V){return V<=ka.TypeParameter?V-1:l.SymbolKind.Property}o(Bi,"asSymbolKind");function Ta(V){switch(V){case xa.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(Ta,"asSymbolTag");function Eo(V){if(V==null)return;const yt=[];for(const bn of V){const jr=Ta(bn);jr!==void 0&&yt.push(jr)}return yt.length===0?void 0:yt}o(Eo,"asSymbolTags");function al(V,yt){const bn=new l.SymbolInformation(V.name,Bi(V.kind),h(V.location.range),V.location.uri?n(V.location.uri):yt);return ol(bn,V),V.containerName&&(bn.containerName=V.containerName),bn}o(al,"asSymbolInformation");function Mc(V){if(V!=null)return V.map(Zo)}o(Mc,"asDocumentSymbols");function Zo(V){var yt;const bn=new l.DocumentSymbol(V.name,(yt=V.detail)!=null?yt:"",Bi(V.kind),h(V.range),h(V.selectionRange));if(ol(bn,V),V.children!==void 0&&V.children.length>0){const jr=[];for(const Ja of V.children)jr.push(Zo(Ja));bn.children=jr}return bn}o(Zo,"asDocumentSymbol");function ol(V,yt){V.tags=Eo(yt.tags),yt.deprecated&&(V.tags?V.tags.includes(l.SymbolTag.Deprecated)||(V.tags=V.tags.concat(l.SymbolTag.Deprecated)):V.tags=[l.SymbolTag.Deprecated])}o(ol,"fillTags");function es(V){const yt={title:V.title,command:V.command};return V.arguments&&(yt.arguments=V.arguments),yt}o(es,"asCommand");function Pc(V){if(!!V)return V.map(es)}o(Pc,"asCommands");const ea=new Map;ea.set(Ei.Empty,l.CodeActionKind.Empty),ea.set(Ei.QuickFix,l.CodeActionKind.QuickFix),ea.set(Ei.Refactor,l.CodeActionKind.Refactor),ea.set(Ei.RefactorExtract,l.CodeActionKind.RefactorExtract),ea.set(Ei.RefactorInline,l.CodeActionKind.RefactorInline),ea.set(Ei.RefactorRewrite,l.CodeActionKind.RefactorRewrite),ea.set(Ei.Source,l.CodeActionKind.Source),ea.set(Ei.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function ts(V){if(V==null)return;let yt=ea.get(V);if(yt)return yt;const bn=V.split(".");yt=l.CodeActionKind.Empty;for(const jr of bn)yt=yt.append(jr);return yt}o(ts,"asCodeActionKind");function Ic(V){if(V!=null)return V.map(yt=>ts(yt))}o(Ic,"asCodeActionKinds");function Lc(V){if(V==null)return;const yt=new l.CodeAction(V.title);return V.kind!==void 0&&(yt.kind=ts(V.kind)),V.diagnostics&&(yt.diagnostics=i(V.diagnostics)),V.edit&&(yt.edit=sl(V.edit)),V.command&&(yt.command=es(V.command)),V.isPreferred!==void 0&&(yt.isPreferred=V.isPreferred),yt}o(Lc,"asCodeAction");function sl(V){if(!V)return;const yt=new l.WorkspaceEdit;return V.documentChanges?V.documentChanges.forEach(bn=>{if(oa.is(bn))yt.createFile(n(bn.uri),bn.options);else if(Wi.is(bn))yt.renameFile(n(bn.oldUri),n(bn.newUri),bn.options);else if(Jn.is(bn))yt.deleteFile(n(bn.uri),bn.options);else if(aa.is(bn))yt.set(n(bn.textDocument.uri),ne(bn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(bn,void 0,4)}`)}):V.changes&&Object.keys(V.changes).forEach(bn=>{yt.set(n(bn),ne(V.changes[bn]))}),yt}o(sl,"asWorkspaceEdit");function ll(V){return new l.Color(V.red,V.green,V.blue,V.alpha)}o(ll,"asColor");function cl(V){return new l.ColorInformation(h(V.range),ll(V.color))}o(cl,"asColorInformation");function kc(V){if(Array.isArray(V))return V.map(cl)}o(kc,"asColorInformations");function ul(V){const yt=new l.ColorPresentation(V.label);return yt.additionalTextEdits=ne(V.additionalTextEdits),V.textEdit&&(yt.textEdit=ve(V.textEdit)),yt}o(ul,"asColorPresentation");function xc(V){if(Array.isArray(V))return V.map(ul)}o(xc,"asColorPresentations");function dl(V){if(V)switch(V){case fi.Comment:return l.FoldingRangeKind.Comment;case fi.Imports:return l.FoldingRangeKind.Imports;case fi.Region:return l.FoldingRangeKind.Region}}o(dl,"asFoldingRangeKind");function fl(V){return new l.FoldingRange(V.startLine,V.endLine,dl(V.kind))}o(fl,"asFoldingRange");function Fc(V){if(Array.isArray(V))return V.map(fl)}o(Fc,"asFoldingRanges");function ns(V){return new l.SelectionRange(h(V.range),V.parent?ns(V.parent):void 0)}o(ns,"asSelectionRange");function Nc(V){if(!Array.isArray(V))return[];const yt=[];for(const bn of V)yt.push(ns(bn));return yt}return o(Nc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:_,asDiagnosticTag:d,asHover:ee,asTextEdit:ve,asTextEdits:ne,asSignatureHelp:Pe,asSignatureInformations:ke,asSignatureInformation:We,asParameterInformations:je,asParameterInformation:it,asDeclarationResult:It,asDefinitionResult:Xt,asLocation:Je,asReferences:dn,asDocumentHighlights:Tr,asDocumentHighlight:Di,asDocumentHighlightKind:Ri,asSymbolKind:Bi,asSymbolTag:Ta,asSymbolTags:Eo,asSymbolInformations:la,asSymbolInformation:al,asDocumentSymbols:Mc,asDocumentSymbol:Zo,asCommand:es,asCommands:Pc,asCodeAction:Lc,asCodeActionKind:ts,asCodeActionKinds:Ic,asWorkspaceEdit:sl,asFoldingRangeKind:dl,asFoldingRange:fl,asFoldingRanges:Fc,asColor:ll,asColorInformation:cl,asColorInformations:kc,asColorPresentation:ul,asColorPresentations:xc,asSelectionRange:ns,asSelectionRanges:Nc}}o(C,"createConverter");var g;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(g||(g={}));var E;(function(t){function e(i){if(i.HEAD.type===z.Branch||i.HEAD.type===z.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==z.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=De.timeout){const c=await i.getMetadata(a),u=g.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return De.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(E||(E={}));var F;(function(t){const e=new kn(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${zn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(F||(F={}));var ae;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(ae||(ae={}));var pe;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(pe||(pe={}));var De;(function(t){t.timeout=5*60*1e3;const e=new kn(32),n=new kn(32);async function r(h,p,_,Q=t.timeout){const D=await i(h,p,_,Q);if(!(D===void 0||D.length===0))return D[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,_,Q=t.timeout){const D=c(h,p);let ee=e.get(D);if(ee===void 0||ee!==void 0&&Date.now()-ee.time>Q){const ve=ft.getAllWorkspaceSnapshots(h,_,p);ee={time:Date.now(),promise:ve,snapshots:void 0},e.set(D,ee)}if(ee.snapshots!==null){if(ee.snapshots===void 0){let ve=await ee.promise;if(ve===void 0){ee.snapshots=null;return}ve.sort((ne,Pe)=>Pe.creationDate.getTime()-ne.creationDate.getTime()),ve=ve.filter(ne=>ne.state===5||ne.state===3),ee.snapshots=ve}return ee.snapshots}}o(i,"all"),t.all=i;async function a(h,p,_,Q,D=t.timeout){const ee=s(h,p);let ve=n.get(ee);if(ve===null)return;if(ve!==void 0)return ve;const ne=c(h,_),Pe=e.get(ne);if(Pe!==void 0&&Date.now()-Pe.time<=D){if(Pe.snapshots===null)return;const ke=Pe.snapshots!==void 0?Pe.snapshots:await i(h,_,Q);if(ke!==void 0){for(const We of ke)if(We.commitId===p)return n.set(ee,We),We}return}if(ve=await ft.getWorkspaceSnapshot(p,Q),ve===void 0){n.set(ee,null);return}return n.set(ee,ve),ve}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,_,Q=t.timeout){return await a(h,p,void 0,_,Q)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,_,Q=t.timeout){return await i(h,p,_,Q)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,_){const Q=new Map(_.map(ve=>[ve.commitId,ve])),D=await F.all(h,p.uri,_.map(ve=>ve.commitId));if(D.length===0)return;const ee=[];for(const ve of D){const ne=Q.get(ve.hash);ne!==void 0&&ee.push({...ne,commit:ve})}if(ee.length!==0)return ee}o(f,"resolve"),t.resolve=f})(De||(De={}));var ze;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(ze||(ze={}));var ft;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api",r=10*1e3;function i(ke,We){const je=setTimeout(()=>{ke.cancel()},We);return{dispose:()=>clearTimeout(je)}}o(i,"timeout");async function a(ke,We,je,it){var Je;const It=await kt(ke,{method:"POST",body:JSON.stringify(We),headers:{"Content-Type":"application/json",...(await je.authentication).getRichNavigationHeaders(),"x-correlation-id":(Je=je.correlationId)!=null?Je:En()}},it);if(!!It.ok)return It.json()}o(a,"postRequest");async function s(ke,We,je,it){const Je=await kt(ke,{method:"POST",body:We,headers:(await je.authentication).getRichNavigationHeaders()},it);if(!!Je.ok)return await Je.json()}o(s,"postForm");function c(ke,We){return`${n}/${e}/HttpLanguageService/${ke}/${We}`}o(c,"makeRequestUrl");async function u(ke,We){const je=new l.CancellationTokenSource,it=i(je,r);try{const Je=await kt(`${n}/${e}/WorkspaceSnapshot?commitId=${ke}`,{headers:(await We.authentication).getRichNavigationHeaders()},je.token);if(Je.ok){const It=await Je.json();return{workspaceId:It.workspaceId,snapshotId:It.snapshotId,state:It.state,commitId:ke.toLowerCase(),branchName:void 0,creationDate:new Date}}return}catch(Je){if(Je instanceof l.CancellationError){S.log(`RichNav request getWorkspaceSnapshot timed out after ${r/1e3} seconds`);return}throw Je}finally{it.dispose()}}o(u,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=u;async function d(ke,We,je){const it=new nr;it.append("uriString",ke.toString(!0)),je!==void 0&&it.append("branchName",je);const Je=new l.CancellationTokenSource,It=i(Je,r);try{const Xt=await s(`${n}/${e}/WorkspaceSnapshot/all`,it,We,Je.token);return Xt===void 0?void 0:Xt.map(pe.asWorkspaceSnapshot)}catch(Xt){Xt instanceof l.CancellationError?S.log(`RichNav request getAllWorkspaceSnapshots timed out after ${r/1e3}  seconds`):S.error(Xt);return}finally{It.dispose()}}o(d,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=d;async function f(ke,We,je){const it=new nr;it.append("uriString",ke.toString(!0)),je!==void 0&&it.append("branchName",je);const Je=new l.CancellationTokenSource,It=i(Je,r);try{const Xt=await s(`${n}/${e}/WorkspaceSnapshot/latest`,it,We,Je.token);return Xt===void 0?void 0:pe.asWorkspaceSnapshot(Xt)}catch(Xt){Xt instanceof l.CancellationError?S.log(`RichNav request getLatestWorkspaceSnapshot timed out after ${r/1e3}  seconds`):S.error(Xt);return}finally{It.dispose()}}o(f,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=f;async function h(ke,We,je,it){try{return a(c(ke,"textDocument/capabilities"),We,je,it)}catch(Je){S.error(Je);return}}o(h,"capabilities"),t.capabilities=h;async function p(ke,We,je,it){try{return a(c(ke,"textDocument/hover"),We,je,it)}catch(Je){S.error(Je);return}}o(p,"provideHover"),t.provideHover=p;async function _(ke,We,je,it){try{return a(c(ke,"textDocument/definition"),We,je,it)}catch(Je){S.error(Je);return}}o(_,"provideDefinition"),t.provideDefinition=_;async function Q(ke,We,je,it){try{return a(c(ke,"textDocument/declaration"),We,je,it)}catch(Je){S.error(Je);return}}o(Q,"provideDeclaration"),t.provideDeclaration=Q;async function D(ke,We,je,it){try{return a(c(ke,"textDocument/typeDefinition"),We,je,it)}catch(Je){S.error(Je);return}}o(D,"provideTypeDefinition"),t.provideTypeDefinition=D;async function ee(ke,We,je,it){try{return a(c(ke,"textDocument/references"),We,je,it)}catch(Je){S.error(Je);return}}o(ee,"provideReferences"),t.provideReferences=ee;async function ve(ke,We,je,it){try{return a(c(ke,"textDocument/foldingRange"),We,je,it)}catch(Je){S.error(Je);return}}o(ve,"providerFoldingRanges"),t.providerFoldingRanges=ve;async function ne(ke,We,je,it){if(We=="")return;const Je=await kt(`${n}/${e}/Search/${ke}/${We}`,{headers:(await je.authentication).getRichNavigationHeaders()},it);if(Je.ok)return await Je.json()}o(ne,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=ne;async function Pe(ke,We,je){const it=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${ke}/${We}/assets/designtime`,query:`id=${je}`});try{const Je=new l.CancellationTokenSource,It=await kt(it.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}},Je.token);return It.ok?It.text():void 0}catch(Je){S.error(Je);return}}o(Pe,"getDesignTimeFileContent"),t.getDesignTimeFileContent=Pe})(ft||(ft={}));class _t{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=Se.getIndexMemento(c);if(u!==void 0){const d=g.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?De.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&O(u.ref)&&De.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?E.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,Se.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=A(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Rt.decode(e);if(i!==void 0){if(i.type===tt.Latest)return r===oe.Branch?this.getIndexedTip(e,n?0:De.timeout):void 0;if(i.type===tt.SHA){const s=g.externalIndexUri(this.providerService,e);return s===void 0?void 0:await De.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:De.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===k.Latest)return this.getIndexedTip(e,n?0:De.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=A(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=De.timeout){const r=await E.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new ct(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=g.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?E.getIndexBranchName(s):void 0,d=await De.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===z.Branch||s.HEAD.type===z.RemoteBranch){const _=Rt.decode(e);if(_!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?_.type===tt.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await De.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:j.Indexed}:{type:j.NotIndexed}):{type:j.NotIndexed}:_.type===tt.Latest||_.type===tt.SHA?{type:j.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:j.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===k.Latest||h.index===k.Match)&&d!==void 0)return{type:j.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===k.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:j.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===z.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const _=await De.all(r,u,{authentication:c});if(_!==void 0&&_.length>0)return{type:j.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,_),branch:{name:u}}}}return d!==void 0?{type:j.Indexed}:s.HEAD.type===z.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await De.branch(r,u,{authentication:c}))?{type:j.Indexed}:{type:j.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=g.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await De.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${B(s.sha)}`];if(r.type===j.Active){const f=await r.sha;a.index===k.Latest||a.index===k.Match?(u=a.display===U.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===k.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===j.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===j.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(br({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(_t,"RichNavIndexProvider");var Mt;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>S.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(A(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(Q){const D=Q.lastIndexOf("/");return D<=0?Q:Q.substr(D+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const _=await p.isDocumentIndexed(h.document);_===vr.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):_===vr.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,_=s(p);if(_===void 0)return;const[Q,D,ee,ve]=await Promise.all([_.getBranchName(),_.getMetadata(),_.getIndexMetadata(),_.getModeRefType(p)]);if(ee===void 0||!j.hasIndex(ee.type))return;let ne,Pe=!1;const ke=Rt.decode(p);(ke==null?void 0:ke.type)===tt.Latest||(ke==null?void 0:ke.type)===tt.SHA?(Pe=!0,ne={display:U.Browse,index:ke.type===tt.Latest?k.Latest:k.Match}):ne=(h=_.getCurrentIndexMode())!=null?h:_.getModeConfig(p,ve);const We=_.getUriMetadata(),je=l.l10n.t("{0} current","$(check)"),it={indexKind:"disable",label:l.l10n.t("Disable"),description:ne.index===k.None?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let Je,It;if(ve===oe.PullRequestBranch||ve===oe.PullRequestRemoteBranch||ve===oe.Commit||ve===oe.Tag){const Xt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:ne.index===k.Match&&ne.display===U.Browse?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},an={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:ne.index===k.Match&&ne.display===U.Edit?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let $t=We.provider.id==="github";$t&&($t=D.HEAD.type===z.RemoteBranch?D.HEAD.branch.remote.accessLevel>=se.Write:!0);const dn=$t?[Xt,an,it]:[Xt,it];It=await l.window.showQuickPick(dn,{placeHolder:"Pick a rich navigation mode"})}else if(ve===oe.Branch||ve===oe.RemoteBranch){const Xt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:ne.index===k.Latest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},an={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:ne.index===k.TipPlusLatest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},$t=We.provider.id==="github"?[Xt,an,it]:[Xt,it];It=await l.window.showQuickPick($t,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",Q)})}if(It!==void 0&&(It.indexKind==="disable"?Je={display:U.Edit,index:k.None}:It.indexKind==="match"?Je={display:U.Browse,index:k.Match}:It.indexKind==="match+writeable"?Je={display:U.Edit,index:k.Match}:It.indexKind==="tip+latest"?Je={display:U.Edit,index:k.TipPlusLatest}:It.indexKind==="latest"&&(Je={display:U.Browse,index:k.Latest}),Je!==void 0&&!te.equals(ne,Je))){if(await _.hasChanges()&&Je.display===U.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await _.updateIndexMode(Je),Pe){const Xt=await _.getNonIndexedWorkspaceDescriptor();Xt!==void 0&&Cn(_.getProviderService(),Xt)}}}o(d,"toggleIndexMode")})(Mt||(Mt={}));class cn{constructor(e){this.telemetryService=e}static createStatus(){return Mt.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===j.NotIndexed))return()=>new rr(e,n,this.telemetryService)}}o(cn,"RichNavServiceProvider");var Hn;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:Sn.scheme,authority:L(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==Sn.scheme)return;let a;try{return a=JSON.parse(y(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(Hn||(Hn={}));const un=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new kn(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return un.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==un.scheme)return;const n=Hn.toRichNavComponents(t);if(n===void 0)return;const r=await ft.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let Sn=un;Sn.scheme="vsck-fs",Sn.emptyDisposable={dispose:()=>{}};var vr;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(vr||(vr={}));const Le=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[_,Q,D]=c,ee=this.providerService.getModeConfig(s,D);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===_.HEAD.sha&&Q!==void 0&&h.type===Q.type&&p.index===ee.index&&p.display===ee.display){const ne=(h==null?void 0:h.type)===j.Active?await h.sha:void 0,Pe=(Q==null?void 0:Q.type)===j.Active?await Q.sha:void 0;if(ne===Pe)return}const ve={newDisplayMode:ee.display,newIndexMode:ee.index,newIndexType:(Q==null?void 0:Q.type)===void 0?"undefined":j[Q==null?void 0:Q.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":j[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",ve),this.currentlyResolved=[_,Q,ee];for(const ne of this.registeredFeatures.values())ne.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,Ue.isActive(Q)){const ne=g.externalIndexUri(this.providerService,_),Pe=await Q.sha;if(ne!==void 0&&Pe!==void 0){const ke=await De.single(ne,Pe,E.getIndexBranchName(_),{authentication:this.providerService.getAuthentication(s)});ke!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:ke.snapshotId}),this.workspaceSnapshot=ke,this.documentListeners=this.installDocumentListeners(),((ee==null?void 0:ee.display)===U.Edit||_.HEAD.sha!==Pe)&&(this.mapper=new Nt(this.providerService,s,Pe,_.HEAD.sha)))}}await Mt.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new kn(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{A(a.repository.uri)===A(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(A(s)===A(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),Mt.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=Rt.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===tt.Latest&&a.type!==j.Active||d.type===tt.SHA&&(a.type!==j.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===U.Browse&&a!==void 0&&h.index!==k.None&&a.type!==j.Active?u=!0:(a==null?void 0:a.type)===j.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===U.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Le.fileSystemProvider===void 0&&(Le.fileSystemProvider=new Sn,l.workspace.registerFileSystemProvider(Sn.scheme,Le.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===k.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===k.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await Se.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return A(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),Mt.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Xn.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return E.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:Ve.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===j.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=g.externalIndexUri(this.providerService,t),n=E.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await De.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await F.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=g.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([F.get(this.providerService,this.repository.uri,t),De.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Xn.scheme!==r&&Sn.scheme!==r)return;const i=n.uri.toString();if(r===Xn.scheme&&!i.startsWith(this.repositoryRoot)||r===Sn.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((D,ee)=>{const ve=`/${r.snapshotId}/source/`;this.metadata.then(ne=>{D(C(Pe=>{const ke=l.Uri.parse(Pe);if(ne===void 0)return ke;try{if(ke.scheme==="vsck"&&ke.authority===r.workspaceId&&ke.path.startsWith(ve))return this.repository.createRelativeUri(ke.path.substr(ve.length));const We=Hn.toVSCode(Pe);return We!==void 0?(this.knownDesignTimeFiles.add(We.toString()),We):ke}catch(We){return ke}}))},ee)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(D){const ee=d.exec(D);return ee===null||ee.length===2}o(f,"designTimeFilter");function h(D){if(D==null)return D;if(Array.isArray(D)){if(D.length===0)return[];const ee=D[0];return typeof ee.uri=="string"?D.filter(Pe=>f(Pe.uri)):typeof ee.targetUri=="string"?D.filter(Pe=>f(Pe.targetUri)):[]}return d.exec(D.uri)===null?D:void 0}o(h,"filterDesignTimeFiles");async function p(D,ee,ve){var ne,Pe,ke;if(ve==null||D===void 0)return ve;const We=new Map(l.workspace.textDocuments.map(it=>[it.uri.toString(!0),it]));if(Array.isArray(ve)){const it=[],Je=[];if(ve.length===0)return[];for(const It of ve){const Xt=It;if(Xt.uri instanceof l.Uri){const an=await D.mapRangeFromIndexToCode((ne=We.get(Xt.uri.toString()))!=null?ne:Xt.uri,Xt.range);an!==void 0&&it.push(new l.Location(Xt.uri,an))}else{const an=It,$t=(Pe=We.get(an.targetUri.toString()))!=null?Pe:an.targetUri,dn=an.originSelectionRange?await D.mapRangeFromIndexToCode(ee,an.originSelectionRange):void 0;if(dn!==void 0||an.originSelectionRange===void 0){const Tr=await D.mapRangeFromIndexToCode($t,an.targetRange);if(Tr!==void 0){const Di=an.targetSelectionRange?await D.mapRangeFromIndexToCode($t,an.targetSelectionRange):void 0;(Di!==void 0||an.targetSelectionRange===void 0)&&Je.push({targetUri:an.targetUri,targetRange:Tr,targetSelectionRange:Di,originSelectionRange:dn})}}}}return it.length>0?it:Je}const je=await D.mapRangeFromIndexToCode((ke=We.get(ve.uri.toString()))!=null?ke:ve.uri,ve.range);if(je!==void 0)return new l.Location(ve.uri,je)}o(p,"mapLocations");const _=o(D=>({authentication:this.providerService.getAuthentication(D.uri),correlationId:En()}),"getRestApiOptions"),Q=o((D,ee)=>{const ve={method:D,correlationId:ee.correlationId};this.telemetryService.publicLog2("codex.restAPICall",ve)},"sendTelemetry");Le.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(D,ee,ve)=>{const ne=await this.createTextDocumentPositionParams(D,ee);if(ne===void 0)return;const Pe=_(D);return Q("codex.provideHover",Pe),(await u).asHover(await ft.provideHover(n,ne,Pe,ve))}})),Le.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(D,ee,ve)=>{const ne=await this.createTextDocumentPositionParams(D,ee);if(ne===void 0)return;const Pe=_(D);return Q("codex.provideDefinition",Pe),p(this.mapper,D,(await u).asDefinitionResult(h(await ft.provideDefinition(n,ne,Pe,ve))))}})),Le.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(D,ee,ve)=>{const ne=await this.createTextDocumentPositionParams(D,ee);if(ne===void 0)return;const Pe=_(D);return Q("codex.provideDeclaration",Pe),p(this.mapper,D,(await u).asDeclarationResult(h(await ft.provideDeclaration(n,ne,Pe,ve))))}})),Le.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(D,ee,ve)=>{const ne=await this.createTextDocumentPositionParams(D,ee);if(ne===void 0)return;const Pe=_(D);return Q("codex.provideTypeDefinition",Pe),p(this.mapper,D,(await u).asDefinitionResult(h(await ft.provideTypeDefinition(n,ne,Pe,ve))))}})),Le.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(D,ee,ve,ne)=>{const Pe=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(D,ee):ee;if(Pe===void 0)return;const ke={position:{line:Pe.line,character:Pe.character},textDocument:{uri:this.createRichNavDocumentUri(D.uri).toString(!0)},context:{includeDeclaration:ve.includeDeclaration}},We=_(D);return Q("codex.provideReferences",We),p(this.mapper,D,(await u).asReferences(h(await ft.provideReferences(n,ke,We,ne))))}})),Le.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async(D,ee,ve)=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(D))return;const ne=_(D);return Q("codex.provideFoldingRanges",ne),(await u).asFoldingRanges(await ft.providerFoldingRanges(n,this.createTextDocumentParams(D.uri),ne,ve))}})),Le.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async(D,ee)=>{const ve=_(t),ne=await ft.provideWorkspaceSymbols(n,D,ve,ee);if(ne!==void 0)return(await u).asSymbolInformations(ne)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),Mt.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n===void 0)return;const r=new l.CancellationTokenSource;return(e=await ft.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)},r.token))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===Sn.scheme){const r=Hn.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let rr=Le;rr.localCapabilities=new Map([["javascript",Object.assign(ze.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(ze.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(ze.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(ze.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),rr.disabledCapabilities=new Map([["javascript",Object.assign(ze.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(ze.create(),{declarationProvider:!0})],["typescript",Object.assign(ze.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(ze.create(),{declarationProvider:!0})]]);var qn=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),cr=o((t,e,n)=>(qn(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Rr=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),qi=o((t,e,n,r)=>(qn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),Ni;class ha{constructor(e){Rr(this,Ni,void 0),qi(this,Ni,e)}async provideEditSessionIdentity(e,n){await Or(cr(this,Ni),e.uri);const r=cr(this,Ni).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await cr(this,Ni).getRepositoryContext(r,"http"),s=await cr(this,Ni).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=this.normalizeEditSessionIdentity(e),i=this.normalizeEditSessionIdentity(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}normalizeEditSessionIdentity(e){var n,r,i;let{remote:a,ref:s,sha:c}=JSON.parse(e);return a=(i=(r=(n=cr(this,Ni)).getHttpsCloneUri)==null?void 0:r.call(n,a))!=null?i:typeof a=="string"&&a.endsWith(".git")?a.slice(0,a.length-4):a,{remote:a,ref:s,sha:c}}}o(ha,"EditSessionIdentityProvider"),Ni=new WeakMap;var ga=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),ri=o((t,e,n)=>(ga(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),Mo=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),co=o((t,e,n,r)=>(ga(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Fr;class _a{constructor(e){Mo(this,Fr,void 0),co(this,Fr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await Or(ri(this,Fr),e);const n=ri(this,Fr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return ri(this,Fr).getRepositoryContext(n)})}async getMetadata(e){const n=ri(this,Fr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await ri(this,Fr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return ri(this,Fr).getRegisteredProvider(e)}getProviderUri(e){return x.getProviderUri(e)}getProviderRootUri(e){return ri(this,Fr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Xn.scheme&&ri(this,Fr).hasProvider(e,n)}getVirtualUri(e){return x.getVirtualUri(e)}getVirtualWorkspaceUri(e){return ri(this,Fr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==x.scheme)return!1;await Or(ri(this,Fr),e);const n=ri(this,Fr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new ct(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:l.LogLevel.Debug}),i=await ri(this,Fr).loadWorkspaceContents(n);return r.stop(),i}}o(_a,"ExtensionApi"),Fr=new WeakMap;var Po=Object.defineProperty,Oa=Object.getOwnPropertyDescriptor,va=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Oa(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Po(e,n,i),i},"fs_decorateClass");const ba=l.FileSystemError.FileNotFound().code;class Qi{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case R.Created:return{type:l.FileChangeType.Created,uri:i.uri};case R.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case R.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Xn.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(S.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=x.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>Z(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));S.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(A(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{S.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=A(e);this.watchedUris.set(r,e);const i=Or(this.providerService,e).then(()=>this.providerService.watch(x.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new ct(`fs.stat(${e.toString()})`);await Or(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(A(e),e);return a=await this.providerService.stat(x.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(A(e)),n.stop()}}async readDirectory(e){const n=new ct(`fs.readDirectory(${e.toString()})`);await Or(this.providerService,e),this.implicitlyWatchedUris.set(A(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(x.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new ct(`fs.createDirectory(${e.toString()})`);await Or(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw S.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new ct(`fs.readFile(${e.toString()})`),r=A(e);let i;await Or(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(x.getProviderUri(e)),i}catch(a){throw a instanceof rn&&Tn.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new ct(`fs.writeFile(${e.toString()})`,{},n.length,r);await Or(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===ba){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(x.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===ba)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw S.error(s,i.context),s}}catch(a){throw a instanceof rn&&Tn.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new ct(`fs.delete(${e.toString()})`,{},n);await Or(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw S.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new ct(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw S.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new ct(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Or(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw S.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new ct(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw S.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new ct(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw S.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new ct(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw S.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===ba)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new ct(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:l.LogLevel.Debug});await Or(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>x.getVirtualUri(c))}catch(c){throw S.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Or(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:x.getVirtualUri(a.uri)})},i)}}o(Qi,"ChangeTrackingFileSystem"),va([Gt()],Qi.prototype,"stat",1),va([Gt()],Qi.prototype,"readDirectory",1),va([Gt()],Qi.prototype,"readFile",1);const Ba=o(class{constructor(t){this.providerService=t,this.lock=new hn("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=Se.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},_={title:l.l10n.t("Don't Show Again")},Q=await l.window.showInformationMessage(f,{modal:!0},h,p,_);switch(Q==null?void 0:Q.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case _.title:await Se.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){S.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){S.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){S.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return S.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return S.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){S.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){S.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${A(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&M(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return S.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Ba.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Ha=Ba;Ha.storageSchemaVersion=1;function Oi(){}o(Oi,"Diff"),Oi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(D){return i?(setTimeout(function(){i(void 0,D)},0),!0):D}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function _(){for(var D=-1*d;D<=d;D+=2){var ee=void 0,ve=h[D-1],ne=h[D+1],Pe=(ne?ne.newPos:0)-D;ve&&(h[D-1]=void 0);var ke=ve&&ve.newPos+1<c,We=ne&&0<=Pe&&Pe<u;if(!ke&&!We){h[D]=void 0;continue}if(!ke||We&&ve.newPos<ne.newPos?(ee=Lo(ne),a.pushComponent(ee.components,void 0,!0)):(ee=ve,ee.newPos++,a.pushComponent(ee.components,!0,void 0)),Pe=a.extractCommon(ee,n,e,D),ee.newPos+1>=c&&Pe+1>=u)return s(Io(a,ee.components,n,e,a.useLongestToken));h[D]=ee}d++}if(o(_,"execEditLength"),i)o(function D(){setTimeout(function(){if(d>f)return i();_()||D()},0)},"exec")();else for(;d<=f;){var Q=_();if(Q)return Q}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function Io(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(_,Q){var D=r[u+Q];return D.length>_.length?D:_}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(Io,"buildValues");function Lo(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(Lo,"clonePath");var uo=new Oi;function Me(t,e,n){return uo.diff(t,e,n)}o(Me,"diffChars");function At(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(At,"generateOptions");var Pt=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Zt=/\S/,Dn=new Oi;Dn.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Zt.test(t)&&!Zt.test(e)},Dn.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Pt.test(e[n])&&Pt.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Wn(t,e,n){return n=At(n,{ignoreWhitespace:!0}),Dn.diff(t,e,n)}o(Wn,"diffWords");function $n(t,e,n){return Dn.diff(t,e,n)}o($n,"diffWordsWithSpace");var Dr=new Oi;Dr.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function ii(t,e,n){return Dr.diff(t,e,n)}o(ii,"diffLines");function Jr(t,e,n){var r=At(n,{ignoreWhitespace:!0});return Dr.diff(t,e,r)}o(Jr,"diffTrimmedLines");var Nr=new Oi;Nr.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function hi(t,e,n){return Nr.diff(t,e,n)}o(hi,"diffSentences");var Mr=new Oi;Mr.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Ea(t,e,n){return Mr.diff(t,e,n)}o(Ea,"diffCss");function fo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fo=o(function(e){return typeof e},"_typeof"):fo=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),fo(t)}o(fo,"_typeof");function Xi(t){return hl(t)||gl(t)||vl(t)||pl()}o(Xi,"_toConsumableArray");function hl(t){if(Array.isArray(t))return ko(t)}o(hl,"_arrayWithoutHoles");function gl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(gl,"_iterableToArray");function vl(t,e){if(!!t){if(typeof t=="string")return ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(t,e)}}o(vl,"_unsupportedIterableToArray");function ko(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(ko,"_arrayLikeToArray");function pl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(pl,"_nonIterableSpread");var ml=Object.prototype.toString,Aa=new Oi;Aa.useLongestToken=!0,Aa.tokenize=Dr.tokenize,Aa.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(xo(t,null,null,i),i,"  ")},Aa.equals=function(t,e){return Oi.prototype.equals.call(Aa,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Bc(t,e,n){return Aa.diff(t,e,n)}o(Bc,"diffJson");function xo(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(ml.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=xo(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),fo(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=xo(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(xo,"canonicalize");var ho=new Oi;ho.tokenize=function(t){return t.slice()},ho.join=ho.removeEmpty=function(t){return t};function Hc(t,e,n){return ho.diff(t,e,n)}o(Hc,"diffArrays");function Ua(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),_=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(_)&&(_=_.substr(1,_.length-2)),d[h+"FileName"]=_,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var _=0,Q=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var D=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(D==="+"||D==="-"||D===" "||D==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),D==="+"?_++:D==="-"?Q++:D===" "&&(_++,Q++);else break}if(!_&&p.newLines===1&&(p.newLines=0),!Q&&p.oldLines===1&&(p.oldLines=0),e.strict){if(_!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(Q!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ua,"parsePatch");function yl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(yl,"distanceIterator");function is(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ua(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Di,Ri,la,Bi){return Ri===Bi},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function _(Di,Ri){for(var la=0;la<Di.lines.length;la++){var Bi=Di.lines[la],Ta=Bi.length>0?Bi[0]:" ",Eo=Bi.length>0?Bi.substr(1):Bi;if(Ta===" "||Ta==="-"){if(!s(Ri+1,r[Ri],Ta,Eo)&&(c++,c>u))return!1;Ri++}}return!0}o(_,"hunkFits");for(var Q=0;Q<a.length;Q++){for(var D=a[Q],ee=r.length-D.oldLines,ve=0,ne=f+D.oldStart-1,Pe=yl(ne,d,ee);ve!==void 0;ve=Pe())if(_(D,ne+ve)){D.offset=f+=ve;break}if(ve===void 0)return!1;d=D.offset+D.oldStart+D.oldLines}for(var ke=0,We=0;We<a.length;We++){var je=a[We],it=je.oldStart+je.offset+ke-1;ke+=je.newLines-je.oldLines;for(var Je=0;Je<je.lines.length;Je++){var It=je.lines[Je],Xt=It.length>0?It[0]:" ",an=It.length>0?It.substr(1):It,$t=je.linedelimiters[Je];if(Xt===" ")it++;else if(Xt==="-")r.splice(it,1),i.splice(it,1);else if(Xt==="+")r.splice(it,0,an),i.splice(it,0,$t),it++;else if(Xt==="\\"){var dn=je.lines[Je-1]?je.lines[Je-1][0]:null;dn==="+"?h=!0:dn==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Tr=0;Tr<r.length-1;Tr++)r[Tr]=r[Tr]+i[Tr];return r.join("")}o(is,"applyPatch");function Uc(t,e){typeof t=="string"&&(t=Ua(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=is(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Uc,"applyPatches");function as(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=ii(n,r,s);c.push({value:"",lines:[]});function u(ve){return ve.map(function(ne){return" "+ne})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],_=1,Q=1,D=o(function(ne){var Pe=c[ne],ke=Pe.lines||Pe.value.replace(/\n$/,"").split(`
`);if(Pe.lines=ke,Pe.added||Pe.removed){var We;if(!f){var je=c[ne-1];f=_,h=Q,je&&(p=s.context>0?u(je.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}(We=p).push.apply(We,Xi(ke.map(function(Tr){return(Pe.added?"+":"-")+Tr}))),Pe.added?Q+=ke.length:_+=ke.length}else{if(f)if(ke.length<=s.context*2&&ne<c.length-2){var it;(it=p).push.apply(it,Xi(u(ke)))}else{var Je,It=Math.min(ke.length,s.context);(Je=p).push.apply(Je,Xi(u(ke.slice(0,It))));var Xt={oldStart:f,oldLines:_-f+It,newStart:h,newLines:Q-h+It,lines:p};if(ne>=c.length-2&&ke.length<=s.context){var an=/\n$/.test(n),$t=/\n$/.test(r),dn=ke.length==0&&p.length>Xt.oldLines;!an&&dn&&n.length>0&&p.splice(Xt.oldLines,0,"\\ No newline at end of file"),(!an&&!dn||!$t)&&p.push("\\ No newline at end of file")}d.push(Xt),f=0,h=0,p=[]}_+=ke.length,Q+=ke.length}},"_loop"),ee=0;ee<c.length;ee++)D(ee);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(as,"structuredPatch");function wl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(wl,"formatPatch");function Sl(t,e,n,r,i,a,s){return wl(as(t,e,n,r,i,a,s))}o(Sl,"createTwoFilesPatch");function Cl(t,e,n,r,i,a){return Sl(t,t,e,n,r,i,a)}o(Cl,"createPatch");function _l(t,e){return t.length!==e.length?!1:Fo(t,e)}o(_l,"arrayEqual");function Fo(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Fo,"arrayStartsWith");function bl(t){var e=Oo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(bl,"calcLineCount");function Wc(t,e,n){t=os(t,n),e=os(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(ss(t)?ss(e)?(r.oldFileName=go(r,t.oldFileName,e.oldFileName),r.newFileName=go(r,t.newFileName,e.newFileName),r.oldHeader=go(r,t.oldHeader,e.oldHeader),r.newHeader=go(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(ls(u,d))r.hunks.push(cs(u,s)),i++,c+=u.newLines-u.oldLines;else if(ls(d,u))r.hunks.push(cs(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};El(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o(Wc,"merge");function os(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ua(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return as(void 0,void 0,e,t)}return t}o(os,"loadPatch");function ss(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(ss,"fileNameChanged");function go(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(go,"selectField");function ls(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(ls,"hunkBefore");function cs(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(cs,"cloneHunk");function El(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(ds(t,a,s),ds(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))Al(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,Xi(pa(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,Xi(pa(s)))}else c[0]==="-"&&u[0]===" "?us(t,a,s):u[0]==="-"&&c[0]===" "?us(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):No(t,pa(a),pa(s))}fs(t,a),fs(t,s),bl(t)}o(El,"mergeLines");function Al(t,e,n){var r=pa(e),i=pa(n);if(hs(r)&&hs(i)){if(Fo(r,i)&&gs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,Xi(r));return}else if(Fo(i,r)&&gs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,Xi(i));return}}else if(_l(r,i)){var c;(c=t.lines).push.apply(c,Xi(r));return}No(t,r,i)}o(Al,"mutualChange");function us(t,e,n,r){var i=pa(e),a=Dl(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,Xi(a.merged))}else No(t,r?a:i,r?i:a)}o(us,"removal");function No(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(No,"conflict");function ds(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(ds,"insertLeading");function fs(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(fs,"insertTrailing");function pa(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(pa,"collectChange");function Dl(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(Dl,"collectContext");function hs(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(hs,"allRemoves");function gs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(gs,"skipRemoveSuperset");function Oo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Oo(r.mine),a=Oo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(Oo,"calcOldNewLineCount");function $c(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o($c,"convertChangesToDMP");function Kc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Rl(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Kc,"convertChangesToXML");function Rl(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Rl,"escapeHTML");var vs=/[^a-zA-Z0-9]/,ps=/\s/,ms=/[\r\n]/,Tl=/\n\r?\n$/,Ml=/^\r?\n\r?\n/,gt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(gt||(gt={}));function Pl(t,e){return t<e?t:e}o(Pl,"min");function Il(t,e){return t>e?t:e}o(Il,"max");var ai=ot,Wa=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case gt.DIFF_INSERT:i="+";break;case gt.DIFF_DELETE:i="-";break;case gt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Ll=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[gt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([gt.DIFF_EQUAL,u]),d&&f.push([gt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=ai.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=ai.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===gt.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=ai.max(c,u)&&a.length<=ai.max(d,f)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===gt.DIFF_DELETE&&e[s][0]===gt.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],_=this.diff_commonOverlap_(h,p),Q=this.diff_commonOverlap_(p,h);_>=Q?(_>=h.length/2||_>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,p.substring(0,_)]),e[s-1][1]=h.substring(0,h.length-_),e[s+1][1]=p.substring(_),s++):(Q>=h.length/2||Q>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,h.substring(0,Q)]),e[s-1][0]=gt.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-Q),e[s+1][0]=gt.DIFF_DELETE,e[s+1][1]=h.substring(Q),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===gt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([gt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case gt.DIFF_INSERT:i++,s+=e[n][1],n++;break;case gt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case gt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===gt.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[gt.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[gt.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[gt.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===gt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==gt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==gt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===gt.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case gt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case gt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case gt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case gt.DIFF_INSERT:r+=c.length;break;case gt.DIFF_DELETE:i+=c.length;break;case gt.DIFF_EQUAL:n+=ai.max(r,i),r=0,i=0;break}}return n+=ai.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case gt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case gt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case gt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[gt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[gt.DIFF_EQUAL,f]:r[i++]=[gt.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=ai.max(0,ai.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Wa,u=0,d=0,f=0,h=i,p=i,_=0;_<a.length;_++){var Q=a[_][0],D=a[_][1];switch(!u&&Q!==gt.DIFF_EQUAL&&(c.start1=d,c.start2=f),Q){case gt.DIFF_INSERT:c.diffs[u++]=a[_],c.length2+=D.length,p=p.substring(0,f)+D+p.substring(f);break;case gt.DIFF_DELETE:c.length1+=D.length,c.diffs[u++]=a[_],p=p.substring(0,f)+p.substring(f+D.length);break;case gt.DIFF_EQUAL:D.length<=2*this.patchMargin&&u&&a.length!==_+1?(c.diffs[u++]=a[_],c.length1+=D.length,c.length2+=D.length):D.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Wa,u=0,h=p,d=f);break}Q!==gt.DIFF_INSERT&&(d+=D.length),Q!==gt.DIFF_DELETE&&(f+=D.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Wa,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var _=0,Q=0,D=0;D<e[s].diffs.length;D++){var ee=e[s].diffs[D];ee[0]!==gt.DIFF_EQUAL&&(Q=this.diff_xIndex(p,_)),ee[0]===gt.DIFF_INSERT?n=n.substring(0,d+Q)+ee[1]+n.substring(d+Q):ee[0]===gt.DIFF_DELETE&&(n=n.substring(0,d+Q)+n.substring(d+this.diff_xIndex(p,_+ee[1].length))),ee[0]!==gt.DIFF_DELETE&&(_+=ee[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==gt.DIFF_EQUAL)s.unshift([gt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==gt.DIFF_EQUAL)s.push([gt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Wa,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([gt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===gt.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===gt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===gt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===gt.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===gt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([gt.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Wa;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([gt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([gt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([gt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[gt.DIFF_INSERT,n]];if(!n)return[[gt.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[gt.DIFF_INSERT,s.substring(0,u)],[gt.DIFF_EQUAL,c],[gt.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=gt.DIFF_DELETE,a[2][0]=gt.DIFF_DELETE),a;if(c.length===1)return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],_=d[3],Q=d[4],D=this.diff_main(f,p,r,i),ee=this.diff_main(h,_,r,i);return D.concat([[gt.DIFF_EQUAL,Q]],ee)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([gt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case gt.DIFF_INSERT:d++,h+=s[c][1];break;case gt.DIFF_DELETE:u++,f+=s[c][1];break;case gt.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),_=p.length-1;_>=0;_--)s.splice(c,0,p[_]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,_=p%2!=0,Q=0,D=0,ee=0,ve=0,ne=0;ne<s&&!(Date.now()>r);ne++){for(var Pe=-ne+Q;Pe<=ne-D;Pe+=2){var ke=c+Pe,We=void 0;Pe===-ne||Pe!==ne&&d[ke-1]<d[ke+1]?We=d[ke+1]:We=d[ke-1]+1;for(var je=We-Pe;We<i&&je<a&&e.charAt(We)===n.charAt(je);)We++,je++;if(d[ke]=We,We>i)D+=2;else if(je>a)Q+=2;else if(_){var it=c+p-Pe;if(it>=0&&it<u&&f[it]!==-1){var Je=i-f[it];if(We>=Je)return this.diff_bisectSplit_(e,n,We,je,r)}}}for(var It=-ne+ee;It<=ne-ve;It+=2){var it=c+It,Je=void 0;It===-ne||It!==ne&&f[it-1]<f[it+1]?Je=f[it+1]:Je=f[it-1]+1;for(var Xt=Je-It;Je<i&&Xt<a&&e.charAt(i-Je-1)===n.charAt(a-Xt-1);)Je++,Xt++;if(f[it]=Je,Je>i)ve+=2;else if(Xt>a)ee+=2;else if(!_){var ke=c+p-It;if(ke>=0&&ke<u&&d[ke]!==-1){var We=d[ke],je=c+We-ke;if(Je=i-Je,We>=Je)return this.diff_bisectSplit_(e,n,We,je,r)}}}}return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=ai.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(vs),s=i.match(vs),c=a&&r.match(ps),u=s&&i.match(ps),d=c&&r.match(ms),f=u&&i.match(ms),h=d&&e.match(Tl),p=f&&n.match(Ml);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=ai.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=ai.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var _=ai.max(1,r-d+1),Q=ai.min(r+d,e.length)+n.length,D=Array(Q+2);D[Q+1]=(1<<p)-1;for(var ee=Q;ee>=_;ee--){var ve=i[e.charAt(ee-1)];if(p===0?D[ee]=(D[ee+1]<<1|1)&ve:D[ee]=(D[ee+1]<<1|1)&ve|((h[ee+1]|h[ee])<<1|1)|h[ee+1],D[ee]&c){var ne=this.match_bitapScore_(p,ee-1,n,r);if(ne<=a)if(a=ne,s=ee-1,s>r)_=ai.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=D}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([gt.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([gt.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Bo(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const _={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=_,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Bo,"LCS");function kl(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(kl,"diffComm");function ys(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ys,"diffIndices");function Gc(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o(Gc,"diffPatch");function xl(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ys(e,t).forEach(u=>i(u,"a")),ys(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],_=p.oStart;if(_>f)break;f=Math.max(f,_+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const ne=u.oStart,Pe=ne+u.oLength,ke=u.abStart,We=ke+u.abLength;let je=p[u.ab];je[0]=Math.min(ke,je[0]),je[1]=Math.max(We,je[1]),je[2]=Math.min(ne,je[2]),je[3]=Math.max(Pe,je[3])}const _=p.a[0]+(d-p.a[2]),Q=p.a[1]+(f-p.a[3]),D=p.b[0]+(d-p.b[2]),ee=p.b[1]+(f-p.b[3]);let ve={stable:!1,aStart:_,aLength:Q-_,aContent:t.slice(_,Q),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:D,bLength:ee-D,bContent:n.slice(D,ee)};a.push(ve)}s=f}return c(e.length),a}o(xl,"diff3MergeRegions");function Ho(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=xl(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(_,Q){if(_.length!==Q.length)return!1;for(let D=0;D<_.length;D++)if(_[D]!==Q[D])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(_=>{_.stable?f.push(..._.bufferContent):r.excludeFalseConflicts&&p(_.aContent,_.bContent)?f.push(..._.aContent):(h(),u.push({conflict:{a:_.aContent,aIndex:_.aStart,o:_.oContent,oIndex:_.oStart,b:_.bContent,bIndex:_.bStart}}))}),h(),u}o(Ho,"diff3Merge");function zc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Ho(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(zc,"mergeDiff3");function Fl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Ho(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(Fl,"node_diff3_merge");function Vc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Ho(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=kl(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Vc,"mergeDigIn");function Jc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(Jc,"patch");function jc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(jc,"stripPatch");function Yc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(Yc,"invertPatch");const Uo=new Ll;Uo.diffTimeout=0;function ws(t,e,n){return Se.get("experimental.useDiffMatchPatch")===!0?Uo.patch_toText(Uo.patch_make(e,n)):Cl(t,e,n)}o(ws,"diffs_createPatch");function Ss(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ws(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(Ss,"createPatch2");function Cs(t,e,n){return is(t,e,n)}o(Cs,"diffs_applyPatch");function Nl(t,e){const n=[];for(const r of Ua(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(Nl,"reversePatch");function _s(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=Fl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(_s,"diffs_merge");var Ol=Object.defineProperty,Bl=Object.getOwnPropertyDescriptor,Hl=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Bl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Ol(e,n,i),i},"changeStore_decorateClass");const Ul=l.FileSystemError.FileNotFound().code,bs=`===================================================================
`,Gi=new TextDecoder,Wl=new TextEncoder;function $l(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o($l,"isOperation");function vo(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(vo,"toEvent");const $a=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new Pn,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new ct("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===x.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;S.log(n);const r=[];await this.lock.synchronizeWrite(A(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===R.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>X(f.uri,u.uri))||(d={type:R.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:vo(u,t)),u.type===R.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===R.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(vo(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;S.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){S.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=$(e),a=r.findIndex(u=>$(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case R.Created:c=R.Deleted;break;case R.Deleted:c=R.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===R.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:R.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===R.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:R.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;S.log(r);const i=[];await this.lock.synchronizeWrite(A(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case R.Created:f=R.Deleted;break;case R.Deleted:f=R.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===R.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:R.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;S.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;S.log(e);const n=[];await this.lock.synchronizeWrite(A(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(R.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",J(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case R.Changed:switch(n.type){case R.Created:return!1;case R.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case R.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,J(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:R.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case R.Created:switch(n.type){case R.Changed:case R.Deleted:return!1;case R.Created:return await this.spliceOperation(e,i,{...n,type:R.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case R.Deleted:switch(n.type){case R.Created:case R.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,J(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:R.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case R.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;S.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;S.log(e);const n=[];await this.lock.synchronizeWrite(A(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>vo(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=A(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=A(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=$(e);return i.some(s=>$(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(A(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(A(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(A(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=A(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=Gi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;$l(n)?a=n:r=r!=null?r:n,S.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Gi.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=x.getProviderUri(u),p=Gi.decode(await l.workspace.fs.readFile(h)),_=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),Q=Gi.decode(await l.workspace.fs.readFile(_)),D=await this.providerService.getMetadata(_);return{..._s(f,p,Q,D.HEAD.sha),baseUri:h,incomingUri:_}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(S.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;S.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var _;const Q=A(p),D=l.workspace.textDocuments.find(ee=>A(ee.uri)===Q);return(_=D==null?void 0:D.getText())!=null?_:Gi.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const _=await l.workspace.fs.stat(p);return Boolean(_)}catch{return!1}}o(u,"exists");async function d(p,_,Q){let D=Cs("",Q,{fuzzFactor:0});if(D===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${_}`);D=await n.getIncomingContent(_)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),D)}o(d,"applyCreate");async function f(p,_,Q,D){const ee=await c(p);let ve=Cs(ee,Q,{fuzzFactor:1});if(ve===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${_}; Resulted in conflicts`);const ne={title:l.l10n.t("Merge")},Pe={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,_),{modal:!0},ne,Pe)!==ne)return;const We=await n.merge(p,_,ee);ve=We.mergedContent,We.conflicts&&s.set(A(p),{type:D,baseUri:We.baseUri,incomingUri:We.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),ve)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?Nl(e,{}):Ua(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const _=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,Q=this.providerService.createRelativeVirtualUri(t,_);a.push(A(Q)),!await u(Q)?await d(Q,_,p):await f(Q,_,p,R.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const _=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,Q=this.providerService.createRelativeVirtualUri(t,_);await u(Q)&&i.deleteFile(Q)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const _=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(A(_)),!await u(_)?await d(_,p.newFileName,p):await f(_,p.newFileName,p,R.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const _=l.workspace.textDocuments.find(Q=>A(Q.uri)===p);await(_==null?void 0:_.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(A(t),async()=>{const _=await this.getWorkingOperations(t);if(_.length===0)return;let Q=-1;for(const D of _){Q++;const ee=s.get(A(D.uri));ee!==void 0&&await this.spliceOperation(D.uri,Q,{...D,conflicts:{baseUri:ee.baseUri,incomingUri:ee.incomingUri,status:[D.type,ee.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){S.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(S.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===R.Created){let u=await this.getContent(e.uri);return Ss(n,"",u,"add")}if(e.type===R.Deleted){let u=Gi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri)));return Ss(n,u,"","delete")}const i=await this.getContent(e.uri),a=Gi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri))),s=ws(n,a,i),c=s.indexOf(bs);return`${r}
${s.substr(c+bs.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;S.log(r,e);const i=[];await this.lock.synchronizeWrite(A(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case R.Changed:switch(a.type){case R.Changed:case R.Created:case R.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case R.Created:switch(a.type){case R.Changed:case R.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case R.Created:await this.spliceOperation(t,s,{...a,type:R.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case R.Deleted:switch(a.type){case R.Deleted:await this.discardCore(n,t,i);break;case R.Changed:await this.spliceOperation(t,s,{...a,type:R.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case R.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case R.Changed:switch(a.type){case R.Deleted:await this.spliceOperation(t,s,{...a,type:R.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case R.Created:break;case R.Changed:break}break;case R.Created:switch(a.type){case R.Changed:case R.Deleted:return;case R.Created:break}break;case R.Deleted:switch(a.type){case R.Deleted:return this.discardCore(n,t,i);case R.Changed:await this.spliceOperation(t,s,{...a,type:R.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case R.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:R.Changed,originalHash:c!==void 0?await Kt(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;S.log(i,e,n);const a=[];await this.lock.synchronizeWrite(A(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case R.Changed:switch(s.type){case R.Deleted:await this.spliceOperation(t,c,{...s,type:R.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case R.Created:break;case R.Changed:break}break;case R.Created:switch(s.type){case R.Deleted:case R.Changed:return;case R.Created:const _=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:_!==void 0?await Kt(_):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:R.Changed,timestamp:Date.now()},a);break}break;case R.Deleted:switch(s.type){case R.Deleted:return this.discardCore(r,t,a);case R.Changed:await this.spliceOperation(t,c,{...s,type:R.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case R.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===R.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=_s(Gi.decode(d),Gi.decode(f),Gi.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Wl.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===R.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===R.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;S.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new $a.ScopedChangeStore(this,e,this.workspaceId):new $a.ScopedChangeStore(new $a(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=A(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===R.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new ct(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=A(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,i===void 0?{type:R.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===R.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:R.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new ct(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=A(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=G(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case R.Changed:break;case R.Created:{if(X(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case R.Deleted:{if(X(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new ct(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(A(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new ct(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Kt(r),Kt(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===R.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:R.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new ct(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(A(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),Kt(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:R.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===R.Deleted?{...a,type:R.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:R.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===R.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:R.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ee(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=$(t);return this.findParent(t,e,(r,i)=>r.type===R.Created&&!i.some(a=>X(a.uri,r.uri)&&$(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===R.Deleted&&Z(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=$(t);let r=-1;const i=e.find((a,s)=>$(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=A(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){S.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=A(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),S.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw S.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){S.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ul)return;throw S.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){S.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw S.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${N(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(vo(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&M(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw S.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:$a.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Wo=$a;Wo.operationsStorageSchemaVersion=1,Wo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Hl([Wt()],Wo.prototype,"getWorkingOperations",1);function Kl(t){switch(t){case R.Changed:return l.l10n.t("Modified");case R.Created:return l.l10n.t("Added");case R.Deleted:return l.l10n.t("Deleted")}}o(Kl,"getStatusText");function Gl(t){const[e,n]=t;switch(e){case R.Changed:switch(n){case R.Changed:case R.Created:return l.l10n.t("Modified by Both");case R.Deleted:return l.l10n.t("Deleted by Incoming")}case R.Created:switch(n){case R.Changed:case R.Created:return l.l10n.t("Added by Both");case R.Deleted:return l.l10n.t("Deleted by Incoming")}case R.Deleted:switch(n){case R.Changed:case R.Created:return l.l10n.t("Deleted by Current");case R.Deleted:return l.l10n.t("Deleted by Both")}}}o(Gl,"getConflictStatusText");class Es{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(A(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(A(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Xn.scheme)return;await Or(this.providerService,e);const r=A(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1),s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory;if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>A(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case R.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case R.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case R.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",Gl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case R.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case R.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case R.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case R.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case R.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case R.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(Es,"ScmDecorationProvider");var qc=ur(919);function Qc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Qc,"globFilter");function As(t,e={}){if(!t)return Is;if(typeof t=="string"||rc(t)){const n=Ko(t,e);if(n===zi)return Is;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return ac(t,e)}o(As,"parse");function zl(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(zl,"equals");function $o(t){return!!t&&typeof t.then=="function"}o($o,"isThenable");function Xc(){return Object.create(null)}o(Xc,"getEmptyExpression");const po="**",Ds="/",mo="[/\\\\]",yo="[^/\\\\]",Zc=/\//g;function Rs(t,e){switch(t){case 0:return"";case 1:return`${yo}*?`;default:return`(?:${mo}|${yo}+${mo}${e?`|${mo}${yo}+`:""})*?`}}o(Rs,"starsToRegExp");function Ts(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Ts,"splitGlobAware");function Ms(t){if(!t)return"";let e="";const n=Ts(t,Ds);if(n.every(r=>r===po))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===po){if(r)return;e+=Rs(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===Ds?h="":h=tn(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Ts(c,",").map(_=>Ms(_)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=yo;continue;case"*":e+=Rs(1);continue;default:e+=tn(f)}}a<n.length-1&&(n[a+1]!==po||a+2<n.length)&&(e+=mo)}r=i===po})}return e}o(Ms,"parseRegExp");const Vl=/^\*\*\/\*\.[\w\.-]+$/,Jl=/^\*\*\/([\w\.-]+)\/?$/,jl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Yl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,ql=/^\*\*((\/[\w\.-]+)+)\/?$/,Ql=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ps=new kn(1e4),Is=o(function(){return!1},"FALSE"),zi=o(function(){return null},"NULL");function Ko(t,e){if(!t)return zi;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Ps.get(r);if(i)return Ls(i,t);let a;return Vl.test(n)?i=Zl(n.substr(4),n):(a=Jl.exec(Go(n,e)))?i=ec(a[1],n):(e.trimForExclusions?Yl:jl).test(n)?i=tc(n,e):(a=ql.exec(Go(n,e)))?i=ks(a[1].substr(1),n,!0):(a=Ql.exec(Go(n,e)))?i=ks(a[1],n,!1):i=nc(n),Ps.set(r,i),Ls(i,t)}o(Ko,"parsePattern");function Xl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Xl,"ltrim");function Ls(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return Z(r,e.base)?t(Xl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(Ls,"wrapRelativePattern");function Go(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(Go,"trimForExclusions");function Zl(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(Zl,"trivia1");function ec(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(ec,"trivia2");function tc(t,e){const n=xs(t.slice(1,-1).split(",").map(c=>Ko(c,e)).filter(c=>c!==zi),t),r=n.length;if(!r)return zi;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(tc,"trivia3");function ks(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(ks,"trivia4and5");function nc(t){try{const e=new RegExp(`^${Ms(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return zi}}o(nc,"toRegExp");function eu(t,e,n){return!t||typeof e!="string"?!1:As(t)(e,void 0,n)}o(eu,"match");function rc(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(rc,"isRelativePattern");function tu(t){return t.allBasenames||[]}o(tu,"getBasenameTerms");function nu(t){return t.allPaths||[]}o(nu,"getPathTerms");function ic(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(ic,"extname");function ac(t,e){const n=xs(Object.getOwnPropertyNames(t).map(c=>oc(c,t[c],e)).filter(c=>c!==zi)),r=n.length;if(!r)return zi;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let _=0,Q=n.length;_<Q;_++){const D=n[_](f,h);if(typeof D=="string")return D;$o(D)&&(p||(p=[]),p.push(D))}return p?(async()=>{for(const _ of p){const Q=await _;if(typeof Q=="string")return Q}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,_=n.length;p<_;p++){const Q=n[p];Q.requiresSiblings&&d&&(u||(u=J(c)),f||(f=u.substr(0,u.length-ic(c).length)));const D=Q(c,u,f,d);if(typeof D=="string")return D;$o(D)&&(h||(h=[]),h.push(D))}return h?(async()=>{for(const p of h){const _=await p;if(typeof _=="string")return _}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(ac,"parsedExpression");function oc(t,e,n){if(e===!1)return zi;const r=Ko(t,n);if(r===zi)return zi;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return $o(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(oc,"parseExpressionPattern");function xs(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(xs,"aggregateBasenameMatches");function ru(t,e){return zl(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(ru,"patternsEquals");class Fs{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return As(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(D=>D.trim()).filter(D=>D&&D[0]!=="#"),a=i.filter(D=>!D.endsWith("/")),s=a.filter(D=>!D.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(D=>D.includes("!")).map(D=>D.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(D=>!D.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(D=>D.includes("!")).map(D=>D.replace(/!/g,"")),_=this.gitignoreLinesToExpression(p,n,!1);return o((D,ee)=>{if(!D.startsWith(n))return!1;if(ee&&h(D)&&!_(D))return!0;const ve=c(D),ne=d(D);return ve&&!ne?!0:r?r.isPathIgnored(D,ee):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(Fs,"IgnoreFile");const Ns=new TextDecoder;class Os{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(Ns.decode(a)),s}return new Fs(Ns.decode(a),`${e.path}/`)}catch(i){}}}o(Os,"IgnoreFileService");const Bs=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Hs{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Bs(u)}return Bs(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Hs,"a");const Us={separator:"_",dictionaries:[]},sc=o(t=>{const e=[...t&&t.dictionaries||Us.dictionaries],n={...Us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Hs(n).generate()},"n");var lc=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],cc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],uc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],iu=null,au=null,ou=null;class Ws{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(Ws,"y");class Zi{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Zi,"CommandQuickPickItem");var wo;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new wr(500),h=[f],{defaultBranch:p,HEAD:_}=await n.getMetadata(r);async function Q(Pe){const[ke,We,je,it]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:Pe,limit:100}),n.getTags(r,{query:Pe,limit:100}),n.getSnapshots(r)]),Je=new Set,It=new Set;for(const dn of it)Je.add(dn.hash),It.add(dn.branch.name);const Xt=((c==null?void 0:c.filterBranches)?We.branches.filter(c==null?void 0:c.filterBranches):We.branches).filter(dn=>dn.name!==p.name).sort((dn,Tr)=>dn.committedDate&&Tr.committedDate?Tr.committedDate.getTime()-dn.committedDate.getTime():0),an=l.l10n.t("Open indexed commit"),$t=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:an}];if(Pe!==void 0&&u){for(const dn of u)if(dn.identifier==="remoteHub.createBranch"||dn.identifier==="remoteHub.createBranchFrom"){const Tr=dn.commandArguments;if(!Tr)continue;const Di=Tr.findIndex(la=>"uri"in la);let Ri;Di!==-1&&([Ri]=Tr.splice(Di,1),Ri.branch=Pe,Tr.push(Ri),dn.commandArguments=Tr)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${B(_.sha)}${Je.has(_.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:me.Commit,name:void 0,sha:_.sha,buttons:Je.has(_.sha)?$t:void 0}]:[],{label:`$(${(ke==null?void 0:ke.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${B(p.sha)}${It.has(p.name)||Je.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:me.Branch,name:void 0,sha:p.sha,buttons:It.has(p.name)||Je.has(p.sha)?$t:void 0},...Xt.map(dn=>({label:`$(${dn.locked?"lock":"git-branch"}) ${dn.name}`,description:`\u2022$(git-commit) ${B(dn.commit)}${It.has(dn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:me.Branch,name:dn.name,sha:dn.commit,buttons:It.has(dn.name)?$t:void 0})),...je.tags.map(dn=>({label:`$(tag) ${dn.name}`,description:`\u2022$(git-commit) ${B(dn.commit)}${Je.has(dn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:me.Tag,name:dn.name,sha:dn.commit,buttons:Je.has(dn.commit)?$t:void 0}))]}o(Q,"getItems");const D=Q(void 0);let ee,ve=!1;async function ne(Pe){ee=void 0;const ke=d.activeItems;d.items=Pe!=null?Pe:await D,ve&&ke.length!==0&&(d.activeItems=d.items.filter(We=>ke.some(je=>je.label===We.label))),d.busy=!1}o(ne,"setItems");try{return await new Promise(ke=>{var We;h.push(d.onDidHide(()=>ke(void 0)),d.onDidChangeValue(je=>{if(ve=!1,je=je.trim(),(c==null?void 0:c.allowResetToSha)&&_.branch&&O(je)){ne([{label:`Reset $(git-branch) ${_.branch.name} to $(git-commit) ${je}`,name:_.branch.name,sha:je,type:me.Branch}]);return}d.busy=!0;const it=f.debounce(je?()=>Q(je):()=>D);ee===void 0&&(ee=it.then(async Je=>ne(Je)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[je]=d.activeItems;ke(je)}}),d.onDidTriggerItemButton(je=>{const it=je.item;!(it instanceof Zi)&&it.kind!==l.QuickPickItemKind.Separator&&(it.useIndex=!0),ke(it)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=(We=c==null?void 0:c.ignoreFocusOut)!=null?We:!0,d.busy=!0,d.show(),ee=f.debounce(async()=>D,0).then(je=>ne(je))})}finally{d.dispose(),h.forEach(Pe=>void Pe.dispose())}}o(e,"show"),t.show=e})(wo||(wo={}));const dc=new TextDecoder;class $s{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(Se.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(x.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(x.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=Se.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){Se.changed(e,"staging")&&(this._staging=void 0,Se.changed(e,"staging.enabled")&&this.refresh()),Se.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>A(i.sourceControl.rootUri)===A(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Ks(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(Ka);if(c.length!==0){if(await Vo(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Vo(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!Ka(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Vo([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Ka(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Ka(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!Ka(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",async e=>{var n;if(e instanceof l.Uri){const i=await this.providerService.getMetadata(e),a=this.getOriginalVirtualUri(e,i);return void l.commands.executeCommand("vscode.diff",a,e,l.l10n.t("{0} (Working Tree)",J(e)))}const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(zo(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await ci("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ga(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<se.Write&&(a=await this.providerService.getFork(r),a===void 0)){const D={title:l.l10n.t("Fork Repository")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},D,ee)!==D){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!w(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>za(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let D;if(e==null?void 0:e.fromSha)D=e.fromSha,D==="HEAD"&&(D=i.HEAD.sha);else{const ee=await wo.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!ee){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}D=ee.sha,u=Boolean(ee.useIndex)}c&&D&&(s=await this.providerService.createBranch(r,c,D,a))}catch(D){S.error(D),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:me.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),Q=Se.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!Q||(await this.providerService.getChangeStore(r).discardAll(r),d.location=Q===p?Ve.NewWindow:Ve.CurrentWindow,u&&await Se.setMode(d.uri,ue.getIndexDefault(oe.Branch)),await Cn(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=dc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;zo(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await Ga(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new Zi(br({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new Zi(br({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case z.Branch:a.push(new Zi(br({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case z.RemoteBranch:a.push(new Zi(br({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case z.Tag:a.push(new Zi(br({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case z.Commit:a.push(new Zi(br({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await wo.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Zi?void d.execute():u&&d.type===me.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){S.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",B(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await Se.setMode(f.uri,ue.getIndexDefault(h))}return Cn(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ga(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ga(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Ga(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),Se.updateEffective("commitDirectlyWarning",wt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(et.asVirtualProviderErrorCode(i)===re.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ge.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(et.asVirtualProviderErrorCode(i)===re.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw S.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(et.asVirtualProviderErrorCode(r)===re.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}S.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new ct(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let _,Q;if(s.HEAD.type===z.RemoteBranch?(Q=s.HEAD.branch.remote.accessLevel<se.Write,_=Q&&s.accessLevel<se.Write):(_=s.accessLevel<se.Write,Q=_),u===void 0&&_&&(u=await this.providerService.getFork(r),u===void 0)){const D={title:l.l10n.t("Fork Repository")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},D,ee)!==D){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||Q){if(u===void 0){const ve={title:l.l10n.t("Commit to a New Branch")},ne={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},ve,ne)!==ve){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let D=0;try{const ve=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const ne of ve.branches){const Pe=/^patch-(?<num>\d+)$/.exec(ne.name);if(Pe==null?void 0:Pe.groups){const ke=Number(Pe.groups.num);ke>D&&(D=ke)}}}catch{}const ee=await za(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${D+1}`);if(ee&&(c=await this.providerService.createBranch(r,ee,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(D){const ee=et.asVirtualProviderErrorCode(D);if(ee===re.DetachedHEADError){const ve={title:l.l10n.t("Commit to a New Branch")},ne={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},ve,ne)!==ve){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const ke=await za(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(ke&&(c=await this.providerService.createBranch(r,ke,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ee===re.MergeConflictError){const ve={title:l.l10n.t("Pull")},ne={title:l.l10n.t("Sync (Pull & Push)")},Pe={title:l.l10n.t("Cancel"),isCloseAffordance:!0},ke=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},ve,ne,Pe);if(ke!==ve&&ke!==ne){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:ke===ve,conflictResolution:ge.Merge}),ke===ve){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(ee===re.CommitToProtectedBranchError){const ve={title:l.l10n.t("Commit to a New Branch")},ne={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?ve:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},ve,ne))!==ve){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const We=await za(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(We&&(c=await this.providerService.createBranch(r,We,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ee===re.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(D)}`;return}else throw S.error(D),a=`: Aborted; ${String(D)}`,D}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Yo(ya.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const D={title:l.l10n.t("Switch to Fork")},ee={title:l.l10n.t("Cancel"),isCloseAffordance:!0},ve=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},D,ee);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(ve===D)}),ve===D){let ne;c!==void 0?ne={type:me.Branch,id:c}:s.HEAD.branch!==void 0&&(ne={type:me.Branch,id:s.HEAD.branch.name}),Cn(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:ne}),location:Ve.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},_=Se.get("switchToCreatedBranch")==="always",Q=_?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(Q===h),autoConfirm:String(_)}),Q===h&&Cn(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:me.Branch,id:c}:void 0}),location:Ve.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=et.asVirtualProviderErrorCode(r);if(i===re.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===re.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}S.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new ct(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let _,Q;p.HEAD.type===z.RemoteBranch?(Q=p.HEAD.branch.remote.accessLevel<se.Write,_=Q&&p.accessLevel<se.Write):(_=p.accessLevel<se.Write,Q=_);let D=n==null?void 0:n.fork;if(D===void 0&&_&&(D=await this.providerService.getFork(i),D===void 0)){const je={title:l.l10n.t("Fork Repository")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},je,it)!==je){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(D=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),D===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const ee=h.trimStart().split(`
`),ve=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:ee[0]});if(!ve){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function ne(je){let it=0;try{const Xt=await this.providerService.getBranches(D?this.providerService.createVirtualUri(i,D):i,{query:"patch-"});for(const an of Xt.branches){const $t=/^patch-(?<num>\d+)$/.exec(an.name);if($t==null?void 0:$t.groups){const dn=Number($t.groups.num);dn>it&&(it=dn)}}}catch{}const Je=await za(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",D?D.name:p.name),`patch-${it+1}`);let It;return Je&&(It=await this.providerService.createBranch(i,Je,je,D)),It}o(ne,"createBranch");const Pe=await ne.call(this,p.HEAD.sha);if(!Pe){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,Pe,void 0,D);const ke=await this.providerService.createPullRequest(i,Pe,ve,ee.slice(1).join(`
`),{draft:a},D);e.inputBox.value="",(d==null?void 0:d.length)&&(D?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function We(){const je={title:l.l10n.t("Switch to Pull Request")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Je=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",ke.id,p.name),{modal:!0},je,it);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(Je===je)}),Je===je&&Cn(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:me.PullRequest,id:ke.id}}),location:Ve.CurrentWindow})}o(We,"showSwitchToPrompt"),We.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:f=>f.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,f.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",J(f.uri)))}))),u=await Promise.all(s.staged.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Index)",J(f.uri)))}))),d=await Promise.all(s.working.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,decorations:{strikeThrough:f.type===R.Deleted},command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Working Tree)",J(f.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?d:[...u,...d],i}getOriginalVirtualUri(e,n){return this.providerService.createVirtualUri(x.getProviderId(e),{repo:n.repo,ref:{type:me.Commit,id:n.HEAD.sha}},this.providerService.getRelativeFilePath(e))}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>x.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=se.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=se.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),Se.get("commitDirectlyWarning")===wt.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(Se.get("commitDirectlyWarning")===wt.Auto&&nl(ya.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name)),h="remoteHub.disableCommitDirectlyWarning";return f.isTrusted={enabledCommands:[h]},f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:${h} '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===j.Active,_=(h==null?void 0:h.type)===j.Active,Q=j.hasIndex(h==null?void 0:h.type),D=await this.providerService.getChangeStore(d).hasChanges(d),ee=(a=f.type===z.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:Mi(f.type),ve=[];if(ve.push(br({command:"remoteHub.switchToBranch",title:`${ee} ${f.name}${D?"*":""}`,tooltip:`${B(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?ve.push(br({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):ve.push(br({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||_?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&ve.push(br({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),Q){const ne=this.providerService.getIndexProvider(d);ne&&ve.push(...await ne.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=ve}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=A(e);return this._scmProviders.find(r=>A(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(fc(e))n=e;else if(Ks(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if(zo(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===x.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o($s,"VirtualSourceControl");function fc(t){return"rootUri"in t&&"inputBox"in t}o(fc,"isSourceControl");function Ks(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Ks,"isSourceControlResourceGroup");function zo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(zo,"isSourceControlResourceState");function Ka(t){return"type"in t}o(Ka,"isTrackedChange");async function Vo(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===R.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,J((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===R.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",J((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",J((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===R.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===R.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Vo,"confirmDiscard");async function Ga(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o(Ga,"getOrPickRootUri");async function za(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!w(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=hc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(za,"getBranchNameWithPrompt");function hc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=gc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(hc,"generateBranchName");function gc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(lc),r.toLowerCase()==="animals"&&n.push(cc),r.toLowerCase()==="colors"&&n.push(uc),r.toLowerCase()==="numbers"&&n.push(Ws.generate({length:3}));return n.length===0?"":sc({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(gc,"generateRandomBranchName");class Gs{constructor(e){this.providerService=e,this.id="remoteHubVsCodeDevLink",this.label="Copy vscode.dev Link",this.priority=10,l.env.appHost!=="codespaces"&&l.env.appHost!=="github.dev"&&l.window.registerShareProvider!==void 0&&(this._shareProviderRegistration=l.window.registerShareProvider({scheme:x.scheme},this))}dispose(){var e;(e=this._shareProviderRegistration)==null||e.dispose()}async provideShare(e){var n;const r=this.providerService.getRepository(e.resourceUri);if(!r)return;const i=this.providerService.getRelativeFilePath(r.uri,e.resourceUri),a=await this.providerService.getMetadata(r.uri),s=((n=a.HEAD.branch)==null?void 0:n.name)===a.defaultBranch.name||a.pullRequest?await this.providerService.getBestRemoteUri(r.uri,I.Branch,i,e):await this.providerService.getBestRemoteUri(r.uri,void 0,i,e);if(s!==void 0)return l.Uri.parse(`https://${Vr()}/${s.authority}${Y(s.path)}${s.fragment?`#${s.fragment}`:""}${s.query?`?${s.query}`:""}`)}}o(Gs,"RemoteHubShareProvider");class Vi extends l.TimelineItem{static is(e){return e instanceof Vi}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${x.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=vc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(Vi,"CommitTimelineItem");function vc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,B(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,B(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,B(t.hash),e.format(n),t.message)}o(vc,"getCommitTooltip");class ma extends l.TimelineItem{static is(e){return e instanceof ma}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${x.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Kl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(ma,"ChangeOperationTimelineItem");class zs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new wr(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),Se.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);!e.some(r=>A(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);(e.added.some(r=>A(r.uri)===n)||e.removed.some(r=>A(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||A(this.rootUri)!==A(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);e.some(r=>A(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const Q of this.providerService.repositories)if(Q.uri.path===this.rootUri.path){this.rootUri=Q.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=Se.getAny("git.timeline.date",void 0,"committed"),h=Se.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async Q=>new Vi(this.rootUri,s.provider.id,Q,await this.resolveDiffCommand(Q,s,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),_=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(_&&Boolean(_.staged&&Se.get("staging.enabled"))){const D=new ma(this.rootUri,s.provider.id,_,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(_.uri,x.getProviderUri(_.uri),l.l10n.t("{0} (Index)",J(_.uri))),{dateFormatter:d});p.splice(0,0,D)}return{items:p,paging:u}}catch(a){return S.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Xn.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Vi.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Vi.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!Vi.is(n)&&!ma.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Vi.is(n)&&!ma.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Vi.is(n)&&!ma.is(n)||A(r)!==A(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=J(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,B(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,B(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:me.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let _;p===void 0?_=l.l10n.t("{0} ({1})",u,B(n.hash)):p==="~"&&n.hash===""?_=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?_=l.l10n.t("{0} (Index)",u):_=l.l10n.t("{0} ({1})",u,B(n.hash));const Q=l.l10n.t("{0} \u27F7 {1}",f,_),D=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:me.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,D,Q)})]}async resolveDiffCommand(e,n,r,i,a){const s=J(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:me.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,B(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,B(c),B(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:me.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!Vi.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await ci("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(zs,"VirtualTimelineProvider");class Vs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new ct(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Or(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===Ve.CurrentWindow?Ve.CurrentWindow:Ve.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:Ve.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open ${i}.
You may need to install or enable additional extensions.`),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${qo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),Cn(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=_o())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(Vs,"RemoteUriHandler");var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,yc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?mc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pc(e,n,i),i},"view_decorateClass"),Da;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(Da||(Da={}));const Js=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof Js}get id(){}toString(){return`${S.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let Ra=Js;yc([Wt((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],Ra.prototype,"triggerChange",1);class js{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(S.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!Se.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(Se.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Or(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){S.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){S.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=Se.get("views")[this.configKey]),this._config}}o(js,"View");class Ys extends Ra{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:Da.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(Ys,"MessageNode");var wc=Object.defineProperty,Sc=Object.getOwnPropertyDescriptor,Jo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Sc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&wc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const qs=o(class extends Ra{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Va.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return qs.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${Da.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&Se.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=x.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",J(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",J(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:me.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",J(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",J(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Qs=qs;Qs.key=":changes";const Xs=o(class extends Ra{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${So.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Xs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Qs(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Fn(this.workspaceRepository),n=Xn.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${Da.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${zn(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?tl(this.canonical.provider.id):Xr(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Cc(this.workspaceRepository.ref.type),Mi(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",zn(this.workspaceRepository.timestamp,{ago:!0}),sn(this.workspaceRepository.ref.type,this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Va=Xs;Va.key=":wsrepo",Jo([Wt()],Va.prototype,"refresh",1);const Zs=o(class extends Ra{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Zs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Ys(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Va(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=Da.WorkspaceRepositories,e.iconPath=tl(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let So=Zs;So.key=":wsrepos",Jo([Wt()],So.prototype,"refresh",1);class jo extends Ra{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new Va(this.view,this,u,i[0],!0)):n.push(new So(this.view,this,u,i))}catch(s){if(s instanceof rn)continue;S.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(jo,"WorkspaceRepositoriesViewNode"),Jo([Wt()],jo.prototype,"refresh",1);class el extends js{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new jo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),Cn(this.providerService,{name:e.name,uri:e.uri,location:Ve.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),Cn(this.providerService,{name:e.name,uri:e.uri,location:Ve.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=A(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>A(a.canonicalUri)===n);return await _c(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(el,"WorkspaceRepositoriesView");function Cc(t,e){switch(t){case z.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case z.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case z.Tag:return l.l10n.t("Tag");case z.Commit:return l.l10n.t("Commit")}}o(Cc,"headTypeToString");function tl(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(tl,"providerToIconPath");async function _c(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(_c,"getRepository");let Co;function _o(){return Co}o(_o,"getOpenActionsService");var ya;(function(t){t.HasCommitted="has:committed",t.Version="version"})(ya||(ya={}));let bo;function nl(t){return bo.globalState.get(t)}o(nl,"getState");async function Yo(t,e){return bo.globalState.update(t,e)}o(Yo,"updateState");let rl=!1;function bc(){return rl}o(bc,"isPreRelease");async function Ec(t){bo=t,Ye.configure("remoteHub",t),S.configure(t,"Remote Repositories"),ct.start("Time to root directory",{log:!1});const e=on.configure(t),n=new be(t),r=t.extension.packageJSON.version;await Yo(ya.Version,r),await t.workspaceState.update(ya.Version,r);const[,i]=bo.extension.packageJSON.version.split(".");rl=Number.parseInt(i)%2==1;try{const a=new Xn(n,t.workspaceState);Co=new Ha(a);const s=new Os(a),c=new $s(a,Co,n,s),u=new _a(a);if(typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(x.scheme,new ha(a))),typeof l.workspace.registerCanonicalUriProvider!==void 0&&!l.extensions.getExtension("vscode.git")){const d=new bt(a);try{t.subscriptions.push(...bt.SupportedSchemes.map(f=>l.workspace.registerCanonicalUriProvider(f,d)))}catch{}}return t.subscriptions.push(a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:_,name:Q,provider:D,pullRequest:ee}=h,ve=p.name.replace(/\//g,"\u2009\u2215\u2009");let ne=" ";if(ee!==void 0)ne=` (PR ${ee.id}) `;else if(p.type===z.Tag)ne=` (${ve}) `;else if(p.type===z.Commit)ne=` (${ve}) `;else if(p.type===z.Branch||p.type===z.RemoteBranch){const ke=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==_.name&&(ne=` (${ke}) `)}const Pe={uri:f.uri,type:"folder",label:`${Q}${ne}[${D.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",Pe)}catch(h){S.error(h,"Failed to add repository to recently opened")}}),new Es(a,s),new Qi(a),new Vs(a,n),...Yr(a,t.extension.id,n),...Tc(a,n),...await Ac(a,c,t,n),new zs(a),new Gs(a),new el(a,e,n),c,Co,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw S.error(a),Fe(t,a),a}}o(Ec,"activate");async function Ac(t,e,n,r){const i=[];if(il()){const a=new _t(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Rc(t,e),Dc(e)),i}o(Ac,"registerProviders");function Dc(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Dc,"registerStaticWebApps");function Rc(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(S.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var _;a=(_=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?_:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),S.log("[ GHPR] Registering..."),Qn(Gn.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(_=>_.provider.id==="github");if(p.length!==0){S.log("[ GHPR] Checking for opened PRs...");for(const _ of p){const Q=await t.getBestRemoteUri(_.uri,I.PullRequest);if(!!Q){u.dispose(),S.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",Q.toString());return}}S.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),S.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return S.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Rc,"registerGitHub");function Tc(t,e){if(!il())return[];e.publicLog2("codex.enableRichNav",{});const n=new Ot(t);return[n,n.register(new cn(e)),...cn.createStatus()]}o(Tc,"registerNavigationServiceProviders");function il(){return!1}o(il,"isRichNavEnabled");const qo=["github.remotehub","ms-vscode.azure-repos"],Qo=new Map,Xo=new Map;async function Or(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Xn.getProviderId(e)),e&&Xo.has(e)){const a=Xo.get(e);if(!a)return;await Qo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!qo.includes(s.toLowerCase()))continue;const u=Qo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(_=>_.registerVirtualProviderService(t));if(p===void 0)return;Qo.set(s,p);for(const _ of d)Xo.set(_,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(Or,"ensureProvidersRegistered")})(),module.exports=Do})();
